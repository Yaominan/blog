{"config":{"lang":["zh","en","ja"],"separator":"[\\s\\u200b\\u3000\\-\u3001\u3002\uff0c\uff0e\uff1f\uff01\uff1b]+","pipeline":["stemmer"]},"docs":[{"location":"","title":"Welcome and Have A Good Day","text":""},{"location":"#k8s","title":"K8S","text":""},{"location":"#docker","title":"docker","text":""},{"location":"Linux/MYSQL%2Bkeepalived%E5%AE%9E%E7%8E%B0%E9%AB%98%E5%8F%AF%E7%94%A8/","title":"mysql\u9ad8\u53ef\u7528\u914d\u7f6e","text":"<p>mysql\u9ad8\u53ef\u7528\u53c2\u8003\u6587\u6863     https://www.cnblogs.com/kcxg/p/11130697.html</p>"},{"location":"Linux/MYSQL%2Bkeepalived%E5%AE%9E%E7%8E%B0%E9%AB%98%E5%8F%AF%E7%94%A8/#1mysql","title":"1.mysql \u4e3b\u4ece\u590d\u5236\u539f\u7406","text":"<ol> <li>\u4e3b\u4ece\u590d\u5236\u539f\u7406\u56fe\uff1a </li> <li>\u4e3b\u4e3b\u70ed\u5907\u539f\u7406\u56fe\uff1a </li> </ol>"},{"location":"Linux/MYSQL%2Bkeepalived%E5%AE%9E%E7%8E%B0%E9%AB%98%E5%8F%AF%E7%94%A8/#2root","title":"2.\u521d\u59cb\u5316\u5b89\u88c5\u5e76\u6539root\u5bc6\u7801","text":"Bash<pre><code># \u5b89\u88c5\u6570\u636e\u5e93\n# \u51c6\u5907\u672c\u5730\u5b89\u88c5\u5305\n[root@slave2 mysql8]# ls\nmysql-community-client-8.0.37-1.el7.x86_64.rpm          mysql-community-embedded-compat-8.0.37-1.el7.x86_64.rpm  mysql-community-server-8.0.37-1.el7.x86_64.rpm\nmysql-community-client-plugins-8.0.37-1.el7.x86_64.rpm  mysql-community-icu-data-files-8.0.37-1.el7.x86_64.rpm   mysql-community-server-debug-8.0.37-1.el7.x86_64.rpm\nmysql-community-common-8.0.37-1.el7.x86_64.rpm          mysql-community-libs-8.0.37-1.el7.x86_64.rpm\nmysql-community-devel-8.0.37-1.el7.x86_64.rpm           mysql-community-libs-compat-8.0.37-1.el7.x86_64.rpm\n\n# \u4ece\u672c\u5730\u5b89\u88c5\n[root@slave2 mysql8]# yum localinstall ./*\n\n# \u542f\u52a8mysql\n[root@slave2 mysql8]# systemctl start mysqld\n\n# \u67e5\u8be2mysql\u521d\u59cb\u5bc6\u7801\n[root@slave2 ~]# grep 'temporary password' /var/log/mysqld.log | awk '{print $NF}'\nnp:VItG;n4*F\n\n# \u4f7f\u7528\u521d\u59cb\u5bc6\u7801\u767b\u5f55mysql\n[root@slave2 mysql8]# mysql -uroot -p\nEnter password: \nWelcome to the MySQL monitor.  Commands end with ; or \\g.\nYour MySQL connection id is 8\nServer version: 8.0.37\n\n# \u4fee\u6539root\u5bc6\u7801\nmysql&gt; alter user 'root'@'localhost' identified with mysql_native_password  by '##EDC2wsx1qaz';\nQuery OK, 0 rows affected (0.01 sec)\n</code></pre>"},{"location":"Linux/MYSQL%2Bkeepalived%E5%AE%9E%E7%8E%B0%E9%AB%98%E5%8F%AF%E7%94%A8/#3mysql-","title":"3.\u914d\u7f6emysql\u5f00\u542f\u4e3b - \u4ece","text":""},{"location":"Linux/MYSQL%2Bkeepalived%E5%AE%9E%E7%8E%B0%E9%AB%98%E5%8F%AF%E7%94%A8/#1log-bin","title":"1.\u4fee\u6539\u914d\u7f6e\u6587\u4ef6\u5f00\u542flog-bin\u65e5\u5fd7","text":"Bash<pre><code>#  master1\n[root@slave2 ~]# hostname -I\n192.168.10.100 172.17.0.1 \n[root@slave2 ~]# hostname\nslave2\n\n# \u7f16\u8f91my.cnf\u914d\u7f6e\u6587\u4ef6\n\n# For advice on how to change settings please see\n# http://dev.mysql.com/doc/refman/8.0/en/server-configuration-defaults.html\n\n[mysqld]\n#\n# Remove leading # and set to the amount of RAM for the most important data\n# cache in MySQL. Start at 70% of total RAM for dedicated server, else 10%.\n# innodb_buffer_pool_size = 128M\n#\n# Remove the leading \"# \" to disable binary logging\n# Binary logging captures changes between backups and is enabled by\n# default. It's default setting is log_bin=binlog\n# disable_log_bin\n#\n# Remove leading # to set options mainly useful for reporting servers.\n# The server defaults are faster for transactions and fast SELECTs.\n# Adjust sizes as needed, experiment to find the optimal values.\n# join_buffer_size = 128M\n# sort_buffer_size = 2M\n# read_rnd_buffer_size = 2M\n#\n# Remove leading # to revert to previous value for default_authentication_plugin,\n# this will increase compatibility with older clients. For background, see:\n# https://dev.mysql.com/doc/refman/8.0/en/server-system-variables.html#sysvar_default_authentication_plugin\n# default-authentication-plugin=mysql_native_password\n\ndatadir=/var/lib/mysql\nsocket=/var/lib/mysql/mysql.sock\n\nlog-error=/var/log/mysqld.log\npid-file=/var/run/mysqld/mysqld.pid\n\n# \u914d\u7f6eserver-id \u6bcf\u4e2aMySQL\u5b9e\u4f8b\u7684server-id\u90fd\u4e0d\u80fd\u76f8\u540c\nserver-id=1\n# MySQL\u7684\u65e5\u5fd7\u6587\u4ef6\u7684\u540d\u5b57\nlog-bin=mysql_master100\n# \u4f5c\u4e3a\u4ece\u5e93\u65f6 \u66f4\u65b0\u64cd\u4f5c\u662f\u5426\u5199\u5165\u65e5\u5fd7 on\uff1a\u5199\u5165  \u5176\u4ed6\u6570\u636e\u5e93\u4ee5\u6b64\u6570\u636e\u5e93\u505a\u4e3b\u5e93\u65f6\u624d\u80fd\u8fdb\u884c\u540c\u6b65\nlog-slave-updates=on\n\n# MySQL\u7cfb\u7edf\u5e93\u7684\u6570\u636e\u4e0d\u9700\u8981\u540c\u6b65 \u6211\u4eec\u8fd9\u91cc\u5199\u4e863\u4e2a  \u66f4\u52a0\u4fdd\u9669\n# \u540c\u6b65\u6570\u636e\u65f6\u5ffd\u7565\u4e00\u4e0b\u6570\u636e\u5e93 \u4f46\u662f\u5fc5\u987b\u5728\u4f7f\u7528use db\u7684\u60c5\u51b5\u4e0b\u624d\u4f1a\u5ffd\u7565\uff1b\u5982\u679c\u6ca1\u6709\u4f7f\u7528use db \u6bd4\u5982create user  \u6570\u636e\u8fd8\u662f\u4f1a\u540c\u6b65\u7684\nreplicate-ignore-db=information_schema\nreplicate-ignore-db=mysql\nreplicate-ignore-db=performance_schema\nreplicate-ignore-db=sys\n# \u4f7f\u7528\u901a\u914d\u7b26\u5ffd\u7565MySQL\u7cfb\u7edf\u5e93\u7684\u8868  \u8fd9\u6837\u5728create user\u65f6\u4e5f\u4e0d\u4f1a\u8fdb\u884c\u540c\u6b65\u4e86\nreplicate_wild_ignore_table=information_schema.%\nreplicate_wild_ignore_table=mysql.%\nreplicate_wild_ignore_table=performance_schema.%\nreplicate_wild_ignore_table=sys.%\n# MySQL\u7cfb\u7edf\u5e93\u7684\u65e5\u5fd7\u4e0d\u8ba1\u5165binlog \u8fd9\u6837\u66f4\u52a0\u4fdd\u9669\u4e86\nbinlog-ignore-db=information_schema\nbinlog-ignore-db=mysql\nbinlog-ignore-db=performance_schema\nbinlog-ignore-db=sys\n</code></pre> Bash<pre><code># master2\u4e2d\u7684\u914d\u7f6e\u53ea\u8981\u57fa\u4e8emaster1\u7684\u914d\u7f6e\u4fee\u6539\u4ee5\u4e0b\u4e24\u9879\u5373\u53ef\n\n# \u914d\u7f6eserver-id \u6bcf\u4e2aMySQL\u5b9e\u4f8b\u7684server-id\u90fd\u4e0d\u80fd\u76f8\u540c\nserver-id=2\n# MySQL\u7684\u65e5\u5fd7\u6587\u4ef6\u7684\u540d\u5b57\nlog-bin=mysql_master200\n</code></pre>"},{"location":"Linux/MYSQL%2Bkeepalived%E5%AE%9E%E7%8E%B0%E9%AB%98%E5%8F%AF%E7%94%A8/#2","title":"2.\u5f00\u59cb\u914d\u7f6e\u4e3b\u4ece\u590d\u5236(\u5982\u679c\u53ea\u662f\u505a\u4e3b\u4ece\u590d\u5236\uff0c\u5230\u8fd9\u4e00\u6b65\u505a\u5b8c\u5c31\u5b8c\u6210\u4e86)","text":"Bash<pre><code># master1\u4e0a\u6267\u884c\n\n[root@slave2 ~]# mysql -utooy -p##EDC2wsx1qaz\nmysql: [Warning] Using a password on the command line interface can be insecure.\nERROR 1045 (28000): Access denied for user 'tooy'@'localhost' (using password: YES)\n[root@slave2 ~]# mysql -uroot -p##EDC2wsx1qaz\nmysql: [Warning] Using a password on the command line interface can be insecure.\nWelcome to the MySQL monitor.  Commands end with ; or \\g.\nYour MySQL connection id is 9\nServer version: 8.0.37 MySQL Community Server - GPL\n\nCopyright (c) 2000, 2024, Oracle and/or its affiliates.\n\nOracle is a registered trademark of Oracle Corporation and/or its\naffiliates. Other names may be trademarks of their respective\nowners.\n\nType 'help;' or '\\h' for help. Type '\\c' to clear the current input statement.\n\nmysql&gt; \nmysql&gt; create user 'repl_master100'@'%' identified with mysql_native_password by '##EDC2wsx1qaz';\nQuery OK, 0 rows affected (0.01 sec)\n\nmysql&gt; grant replication slave on *.* to 'repl_master100'@'%';\nQuery OK, 0 rows affected (0.00 sec)\n\nmysql&gt; flush privileges;\nQuery OK, 0 rows affected (0.00 sec)\n\nmysql&gt; show master status;\n+------------------------+----------+--------------+-------------------------------------------------+-------------------+\n| File                   | Position | Binlog_Do_DB | Binlog_Ignore_DB                                | Executed_Gtid_Set |\n+------------------------+----------+--------------+-------------------------------------------------+-------------------+\n| mysql_master100.000001 |      847 |              | information_schema,mysql,performance_schema,sys |                   |\n+------------------------+----------+--------------+-------------------------------------------------+-------------------+\n1 row in set (0.01 sec)\n</code></pre> Bash<pre><code># master2\u4e0a\u6267\u884c\nmysql&gt; change master to master_host='192.168.10.100',master_port=3306,master_user='repl_master100',master_password='##EDC2wsx1qaz',master_log_file='mysql_master100.000001',master_log_pos=847;\nQuery OK, 0 rows affected, 9 warnings (0.01 sec)\n\n# \u67e5\u8be2\nmysql&gt; show slave status\\G;\n*************************** 1. row ***************************\n               Slave_IO_State: \n                  Master_Host: 192.168.10.100\n                  Master_User: repl_master100\n                  Master_Port: 3306\n                Connect_Retry: 60\n              Master_Log_File: mysql_master100.000001\n          Read_Master_Log_Pos: 847\n               Relay_Log_File: Test1-relay-bin.000001\n                Relay_Log_Pos: 4\n        Relay_Master_Log_File: mysql_master100.000001\n             Slave_IO_Running: No\n            Slave_SQL_Running: No\n\n# \u5f00\u542fslave\nmysql&gt; start slave;\nQuery OK, 0 rows affected, 1 warning (0.02 sec)\n\n# \u518d\u6b21\u67e5\u8be2\nmysql&gt; show slave status\\G;\n*************************** 1. row ***************************\n               Slave_IO_State: Waiting for source to send event\n                  Master_Host: 192.168.10.100\n                  Master_User: repl_master100\n                  Master_Port: 3306\n                Connect_Retry: 60\n              Master_Log_File: mysql_master100.000001\n          Read_Master_Log_Pos: 847\n               Relay_Log_File: Test1-relay-bin.000002\n                Relay_Log_Pos: 332\n        Relay_Master_Log_File: mysql_master100.000001\n             Slave_IO_Running: Yes\n            Slave_SQL_Running: Yes\n\n## \u51fa\u73b0\u4ee5\u4e0b\u4e24\u4e2ayes\u8868\u793a\u6210\u529f\n# Slave_IO_Running: Yes\n# Slave_SQL_Running: Yes\n</code></pre>"},{"location":"Linux/MYSQL%2Bkeepalived%E5%AE%9E%E7%8E%B0%E9%AB%98%E5%8F%AF%E7%94%A8/#4mysql-","title":"4.\u914d\u7f6emysql\u5f00\u542f\u4e3b - \u4e3b","text":""},{"location":"Linux/MYSQL%2Bkeepalived%E5%AE%9E%E7%8E%B0%E9%AB%98%E5%8F%AF%E7%94%A8/#132","title":"1.\u63a5\u4e0b\u6765\u642d\u5efa\u4e3b\u4e3b\u590d\u5236\uff08\u5373\u57283\u7684\u57fa\u7840\u4e0a\u628a2\u4e2d\u7684\u8fc7\u7a0b\u5012\u7740\u505a\u4e00\u904d\uff09","text":"Bash<pre><code># \u5728master2\u4e0a\u64cd\u4f5c\nmysql&gt; create user 'repl_master200'@'%' identified with mysql_native_password by '##EDC2wsx1qaz';\nQuery OK, 0 rows affected (0.01 sec)\n\nmysql&gt; grant replication slave on *.* to 'repl_master200'@'%';\nQuery OK, 0 rows affected (0.00 sec)\n\nmysql&gt; flush privileges;\nQuery OK, 0 rows affected (0.00 sec)\n\nmysql&gt; show master status;\n+------------------------+----------+--------------+-------------------------------------------------+-------------------+\n| File                   | Position | Binlog_Do_DB | Binlog_Ignore_DB                                | Executed_Gtid_Set |\n+------------------------+----------+--------------+-------------------------------------------------+-------------------+\n| mysql_master200.000002 |     1137 |              | information_schema,mysql,performance_schema,sys |                   |\n+------------------------+----------+--------------+-------------------------------------------------+-------------------+\n1 row in set (0.00 sec)\n</code></pre> Bash<pre><code># \u5728master1\u4e0a\u64cd\u4f5c\nmysql&gt; change master to master_host='192.168.10.200',master_port=3306,master_user='repl_master200',master_password='##EDC2wsx1qaz',master_log_file='mysql_master200.000002',master_log_poos=1137;\nQuery OK, 0 rows affected, 9 warnings (0.01 sec)\n\nmysql&gt; show slave status\\G;\n*************************** 1. row ***************************\n               Slave_IO_State: \n                  Master_Host: 192.168.10.200\n                  Master_User: repl_master200\n                  Master_Port: 3306\n                Connect_Retry: 60\n              Master_Log_File: mysql_master200.000002\n          Read_Master_Log_Pos: 1137\n               Relay_Log_File: slave2-relay-bin.000001\n                Relay_Log_Pos: 4\n        Relay_Master_Log_File: mysql_master200.000002\n             Slave_IO_Running: No\n            Slave_SQL_Running: No\n\nmysql&gt; start slave;\nQuery OK, 0 rows affected, 1 warning (0.01 sec)\n\nmysql&gt; show slave status\\G;\n*************************** 1. row ***************************\n               Slave_IO_State: Waiting for source to send event\n                  Master_Host: 192.168.10.200\n                  Master_User: repl_master200\n                  Master_Port: 3306\n                Connect_Retry: 60\n              Master_Log_File: mysql_master200.000002\n          Read_Master_Log_Pos: 1137\n               Relay_Log_File: slave2-relay-bin.000002\n                Relay_Log_Pos: 332\n        Relay_Master_Log_File: mysql_master200.000002\n             Slave_IO_Running: Yes\n            Slave_SQL_Running: Yes\n</code></pre>"},{"location":"Linux/MYSQL%2Bkeepalived%E5%AE%9E%E7%8E%B0%E9%AB%98%E5%8F%AF%E7%94%A8/#keepalived","title":"\u7ed3\u5408keepalived\u5b9e\u73b0\u9ad8\u53ef\u7528","text":"<p>keepalived\u914d\u7f6e\u89c1\uff1akeepalived</p>"},{"location":"Linux/NGINX/","title":"nginx\u90e8\u7f72\u3001\u8d1f\u8f7d\u5747\u8861\u3001\u53cd\u5411\u4ee3\u7406\u3001\u9ad8\u53ef\u7528","text":""},{"location":"Linux/NGINX/#1nginx","title":"1.nginx\u90e8\u7f72\u65b9\u5f0f","text":"<ol> <li>\u6e90\u7801\u5b89\u88c5 Text Only<pre><code># \u7f16\u8bd1\u524d\u51c6\u5907\nNginx\u662f\u9ad8\u5ea6\u81ea\u7531\u5316\u7684Web\u670d\u52a1\u5668\uff0c\u5b83\u7684\u529f\u80fd\u662f\u7531\u8bb8\u591a\u6a21\u5757\u6765\u652f\u6301\u3002\u5982\u679c\u4f7f\u7528\u4e86\u67d0\u4e2a\u6a21\u5757\uff0c\u8fd9\u4e2a\u6a21\u5757\u4f7f\u7528\u4e86\u4e00\u4e9b\u7c7b\u4f3czlib\u6216OpenSSL\u7b49\u7684\u7b2c\u4e09\u65b9\u5e93\uff0c\u90a3\u4e48\u5c31\u5fc5\u987b\u5148\u5b89\u88c5\u8fd9\u4e9b\u8f6f\u4ef6\u3002centOS\u4e2d\u4f7f\u7528yum\u76f4\u63a5\u5728\u7ebf\u5b89\u88c5\uff0c\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u65b9\u6cd5\u3002\n\n\uff081\uff09PCRE\u5e93\n\nPCRE\u5e93\u652f\u6301\u6b63\u5219\u8868\u8fbe\u5f0f\u3002\u5982\u679c\u6211\u4eec\u5728\u914d\u7f6e\u6587\u4ef6nginx.conf\u4e2d\u4f7f\u7528\u4e86\u6b63\u5219\u8868\u8fbe\u5f0f\uff0c\u90a3\u4e48\u5728\u7f16\u8bd1Nginx\u65f6\u5c31\u5fc5\u987b\u628aPCRE\u5e93\u7f16\u8bd1\u8fdbNginx\uff0c\u56e0\u4e3aNginx\u7684HTTP\u6a21\u5757\u9700\u8981\u9760\u5b83\u6765\u89e3\u6790\u6b63\u5219\u8868\u8fbe\u5f0f\u3002\u53e6\u5916\uff0cpcre-devel\u662f\u4f7f\u7528PCRE\u505a\u4e8c\u6b21\u5f00\u53d1\u65f6\u6240\u9700\u8981\u7684\u5f00\u53d1\u5e93\uff0c\u5305\u62ec\u5934\u6587\u4ef6\u7b49\uff0c\u8fd9\u4e5f\u662f\u7f16\u8bd1Nginx\u6240\u5fc5\u987b\u4f7f\u7528\u7684\u3002\n\n(2\uff09zlib\u5e93  \nzlib\u5e93\u7528\u4e8e\u5bf9HTTP\u5305\u7684\u5185\u5bb9\u505agzip\u683c\u5f0f\u7684\u538b\u7f29\uff0c\u5982\u679c\u6211\u4eec\u5728nginx.conf\u4e2d\u914d\u7f6e\u4e86gzip on\uff0c\u5e76\u6307\u5b9a\u5bf9\u4e8e\u67d0\u4e9b\u7c7b\u578b\uff08content-type\uff09\u7684HTTP\u54cd\u5e94\u4f7f\u7528gzip\u6765\u8fdb\u884c\u538b\u7f29\u4ee5\u51cf\u5c11\u7f51\u7edc\u4f20\u8f93\u91cf\uff0c\u5219\u5728\u7f16\u8bd1\u65f6\u5c31\u5fc5\u987b\u628azlib\u7f16\u8bd1\u8fdbNginx\u3002zlib-devel\u662f\u4e8c\u6b21\u5f00\u53d1\u6240\u9700\u8981\u7684\u5e93\u3002\n\n\uff083\uff09OpenSSL\u5e93  \n\u5982\u679c\u670d\u52a1\u5668\u4e0d\u53ea\u662f\u8981\u652f\u6301HTTP\uff0c\u8fd8\u9700\u8981\u5728\u66f4\u5b89\u5168\u7684SSL\u534f\u8bae\u4e0a\u4f20\u8f93HTTP\uff0c\u90a3\u4e48\u9700\u8981\u62e5\u6709OpenSSL\u3002\u53e6\u5916\uff0c\u5982\u679c\u6211\u4eec\u60f3\u4f7f\u7528MD5\u3001SHA1\u7b49\u6563\u5217\u51fd\u6570\uff0c\u90a3\u4e48\u4e5f\u9700\u8981\u5b89\u88c5\u5b83\u3002\n</code></pre> <p>\u5b98\u65b9\u6587\u6863:https://nginx.org/en/docs/configure.html Bash<pre><code># \u5b89\u88c5nginx\u8f6f\u4ef6\u5e38\u89c1\u5fc5\u8981\u4f9d\u8d56\nyum install -y pcre pcre-devel openssl openssl-devel zlib zlib-devel gcc gcc-c++\n\n# \u521b\u5efanginx\u7528\u6237\uff0c\u7528\u6765\u8fd0\u884cnginx\u8f6f\u4ef6\ngroupadd -g 666 nginx\nuseradd -u 666 -g nginx -s /bin/false -M nginx\n# \u6839\u636e\u9700\u6c42\uff0c\u9700\u8981\u5f00\u54ea\u4e9b\u6a21\u5757\uff0c\u7f16\u8bd1\u65f6\u5c31\u9009\u54ea\u4e9b\u6a21\u5757\n</code></pre></p> </li> <li>\u5b98\u65b9yum\u6e90\u5b89\u88c5 Bash<pre><code>[root@slave2 yum.repos.d]# cat nginx.repo \n[nginx-stable]\nname=nginx stable repo\nbaseurl=http://nginx.org/packages/centos/$releasever/$basearch/\ngpgcheck=1\nenabled=1\ngpgkey=https://nginx.org/keys/nginx_signing.key\nmodule_hotfixes=true\n\n[nginx-mainline]\nname=nginx mainline repo\nbaseurl=http://nginx.org/packages/mainline/centos/$releasever/$basearch/\ngpgcheck=1\nenabled=0\ngpgkey=https://nginx.org/keys/nginx_signing.key\nmodule_hotfixes=true\n</code></pre></li> </ol>"},{"location":"Linux/NGINX/#2nginxupdating","title":"2.nginx\u914d\u7f6e\u591a\u865a\u62df\u4e3b\u673a\uff08updating\u3002\u3002\u3002\uff09","text":"<ol> <li>\u57fa\u4e8e\u591aIP\u7684\u865a\u62df\u4e3b\u673a\u914d\u7f6e</li> <li>\u57fa\u4e8e\u591a\u7aef\u53e3\u7684\u865a\u62df\u4e3b\u673a\u914d\u7f6e</li> <li>\u57fa\u4e8e\u591a\u57df\u540d\u7684\u865a\u62df\u4e3b\u673a\u914d\u7f6e</li> </ol>"},{"location":"Linux/NGINX/#3nginx","title":"3.nginx\u65e5\u5fd7\u914d\u7f6e","text":"<ol> <li>\u5168\u5c40\u65e5\u5fd7\u914d\u7f6e</li> <li>\u5355\u7ad9\u70b9\u65e5\u5fd7\u914d\u7f6e\u72ec\u7acb\u7684\u8bbf\u95ee\u65e5\u5fd7\uff0c\u6309\u4e1a\u52a1\u5206\u7c7b</li> <li>\u9519\u8bef\u65e5\u5fd7\u914d\u7f6e</li> <li>\u65e5\u5fd7\u6dfb\u52a0nginx\u5185\u7f6e\u53d8\u91cf</li> </ol> <p>nginx\u5b98\u65b9\u6587\u6863: https://nginx.org/en/docs/</p> <p>nginx\u4e03\u5c42\u8d1f\u8f7d\u5747\u8861\u65b9\u6848\u53c2\u8003\uff1ahttps://cloud.tencent.com/developer/article/2122754</p>"},{"location":"Linux/NGINX/#4nginx","title":"4.nginx\u914d\u7f6e\u53cd\u5411\u4ee3\u7406","text":"Bash<pre><code># \u4ee5\u4e0b\u662f\u4e00\u4e2a\u793a\u4f8b\u914d\u7f6e\uff0c\u7528\u4e8e\u5c06\u8bf7\u6c42\u53cd\u5411\u4ee3\u7406\u5230\u672c\u5730\u7684 8080 \u7aef\u53e3\uff1a\nhttp {\n    server {\n        listen 80;\n        server_name localhost; # \u4f60\u7684\u57df\u540d\n        location / {\n            proxy_pass http://127.0.0.1:8080;\n            proxy_set_header Host $host;\n            proxy_set_header X-Real-IP $remote_addr;\n            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        }\n    }\n}\n\n\n# location /\uff1a\u8868\u793a\u5339\u914d\u6240\u6709 URI \u7684 location \u5757\u3002\u5c31\u662f\u8bf4\uff0c\u8fd9\u4e2a location \u5757\u4f1a\u5904\u7406\u6240\u6709\u53d1\u9001\u5230 Nginx \u670d\u52a1\u5668\u7684\u8bf7\u6c42\uff0c\u4e0d\u7ba1 URI \u662f\u4ec0\u4e48\u3002\n\n# location \u662f Nginx \u914d\u7f6e\u4e2d\u7684\u4e00\u4e2a\u5173\u952e\u6307\u4ee4\uff0c\u7528\u4e8e\u6839\u636e\u8bf7\u6c42\u7684 URI \u6765\u8fdb\u884c\u76f8\u5e94\u7684\u5904\u7406\u8bf7\u6c42\u3002\n\n# \u4ee5\u4e0b\u662f\u4e00\u4e9b\u5e38\u89c1\u7684 location \u4f7f\u7528\u793a\u4f8b\uff1a\n#1. location /: \u5339\u914d\u6240\u6709\u8bf7\u6c42\uff0c\u5305\u62ec\u6839\u8def\u5f84\uff08\u4f8b\u5982 http://yourserver.com/\uff09\u3002\n#2. location /api/: \u5339\u914d\u4ee5 /api/ \u5f00\u5934\u7684\u6240\u6709\u8bf7\u6c42\uff0c\u5305\u62ec/api/\uff08\u4f8b\u5982 http://yourserver.com/api/users\uff09\u3002\n#3. location /static/: \u5339\u914d\u4ee5 /static/ \u5f00\u5934\u7684\u6240\u6709\u8bf7\u6c42\uff08\u4f8b\u5982 http://yourserver.com/static/css/style.css\uff09\u3002\n#4. location ~* \\.(jpg|jpeg|png)$: \u5339\u914d\u6240\u6709\u4ee5 .jpg, .jpeg, \u6216 .png \u7ed3\u5c3e\u7684\u8bf7\u6c42\uff0c\u65e0\u8bba\u5b83\u4eec\u4f4d\u4e8e\u54ea\u4e2a\u8def\u5f84\u4e0b\u3002\n#5. location = /path \u7cbe\u51c6\u5339\u914d\uff0c\u53ea\u5339\u914d/path\u8fd9\u4e2a\u8bf7\u6c42\u8def\u5f84\n</code></pre> Bash<pre><code>http {\n    server {\n        listen 80;\n\n        location /api/ {\n            proxy_pass http://127.0.0.1:8000;\n            proxy_set_header Host $host;\n            proxy_set_header X-Real-IP $remote_addr;\n            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        }\n\n        location /static/ {\n            proxy_pass http://127.0.0.1:8001;\n            proxy_set_header Host $host;\n            proxy_set_header X-Real-IP $remote_addr;\n            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        }\n\n        location / {\n            proxy_pass http://127.0.0.1:8002;\n            proxy_set_header Host $host;\n            proxy_set_header X-Real-IP $remote_addr;\n            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        }\n    }\n}\n\n#\u6ce8\u610f\uff1aNginx \u4f1a\u6309\u7167\u914d\u7f6e\u6587\u4ef6\u4e2d location \u5757\u7684\u987a\u5e8f\u8fdb\u884c\u5339\u914d\uff0c\u4e00\u65e6\u627e\u5230\u5339\u914d\u7684 location\uff0c\u5c31\u4f1a\u505c\u6b62\u67e5\u627e\u3002\u56e0\u6b64\uff0c\u4f60\u5e94\u8be5\u5c06\u6700\u7279\u6b8a\u7684 location\uff08\u4f8b\u5982\uff0c\u4ee5\u7279\u5b9a\u524d\u7f00\u5f00\u59cb\u7684\u8def\u5f84\uff09\u653e\u5728\u6700\u4e0a\u9762\uff0c\u5c06\u6700\u901a\u7528\u7684 location\uff08\u4f8b\u5982\uff0c\u7528\u4e8e\u5339\u914d\u6240\u6709\u5176\u4ed6\u8bf7\u6c42\u7684\u8def\u5f84\uff09\u653e\u5728\u6700\u4e0b\u9762\u3002\n</code></pre>"},{"location":"Linux/NGINX/#5nginxupstream","title":"5.nginx\u914d\u7f6e\u8d1f\u8f7d\u5747\u8861(upstream)","text":"<ol> <li>\u70ed\u5907backup Bash<pre><code># \u70ed\u5907\uff1a\u5982\u679c\u4f60\u67092\u53f0\u670d\u52a1\u5668\uff0c\u5f53\u4e00\u53f0\u670d\u52a1\u5668\u53d1\u751f\u4e8b\u6545\u65f6\uff0c\u624d\u542f\u7528\u7b2c\u4e8c\u53f0\u670d\u52a1\u5668\u7ed9\u63d0\u4f9b\u670d\u52a1\u3002\u670d\u52a1\u5668\u5904\u7406\u8bf7\u6c42\u7684\u987a\u5e8f\uff1aAAAAAA\u7a81\u7136A\u6302\u5566\uff0cBBBBBBBBBBBBBB.....\n\nupstream mysvr { \n    server 127.0.0.1:7878; \n    server 192.168.10.121:3333 backup;  #\u70ed\u5907     \n}\n</code></pre></li> <li>\u8f6e\u8be2 Bash<pre><code># \u8f6e\u8be2\uff1anginx\u9ed8\u8ba4\u5c31\u662f\u8f6e\u8be2\u5176\u6743\u91cd\u90fd\u9ed8\u8ba4\u4e3a1\uff0c\u670d\u52a1\u5668\u5904\u7406\u8bf7\u6c42\u7684\u987a\u5e8f\uff1aABABABABAB....\n\nupstream mysvr { \n    server 127.0.0.1:7878;\n    server 192.168.10.121:3333;       \n}\n</code></pre></li> <li>\u52a0\u6743\u8f6e\u8be2 Bash<pre><code># \u52a0\u6743\u8f6e\u8be2\uff1a\u8ddf\u636e\u914d\u7f6e\u7684\u6743\u91cd\u7684\u5927\u5c0f\u800c\u5206\u53d1\u7ed9\u4e0d\u540c\u670d\u52a1\u5668\u4e0d\u540c\u6570\u91cf\u7684\u8bf7\u6c42\u3002\u5982\u679c\u4e0d\u8bbe\u7f6e\uff0c\u5219\u9ed8\u8ba4\u4e3a1\u3002\u4e0b\u9762\u670d\u52a1\u5668\u7684\u8bf7\u6c42\u987a\u5e8f\u4e3a\uff1aABBABBABBABBABB....\n\nupstream mysvr { \n    server 127.0.0.1:7878 weight=1;\n    server 192.168.10.121:3333 weight=2;\n}\n</code></pre></li> <li>ip_hash Bash<pre><code># ip_hash:nginx\u4f1a\u8ba9\u76f8\u540c\u7684\u5ba2\u6237\u7aefip\u8bf7\u6c42\u76f8\u540c\u7684\u670d\u52a1\u5668\u3002\n\nupstream mysvr { \n    server 127.0.0.1:7878; \n    server 192.168.10.121:3333;\n    ip_hash;\n}\n</code></pre></li> </ol> Bash<pre><code># \u4ee5\u4e0b\u662f\u57fa\u4e8e\u5bb9\u5668\u7684\u6d4b\u8bd5\n[root@slave2 html]# docker ps\nCONTAINER ID   IMAGE          COMMAND                  CREATED          STATUS         PORTS                                   NAMES\n5fc8360b894c   nginx:latest   \"/docker-entrypoint.\u2026\"   5 minutes ago    Up 5 minutes   0.0.0.0:8083-&gt;80/tcp, :::8083-&gt;80/tcp   nginx3\ncfd27f5fd247   nginx:latest   \"/docker-entrypoint.\u2026\"   26 minutes ago   Up 6 seconds   0.0.0.0:8081-&gt;80/tcp, :::8081-&gt;80/tcp   nginx1\n95b734505a19   nginx:latest   \"/docker-entrypoint.\u2026\"   26 minutes ago   Up 6 seconds   0.0.0.0:8082-&gt;80/tcp, :::8082-&gt;80/tcp   nginx2\n\n[root@slave2 html]# cat /etc/nginx/conf.d/prox.conf \n# \u5f00\u542f\u8d1f\u8f7d\u5747\u8861\nupstream my_server {\n    server 127.0.0.1:8081 weight=1;\n    server 127.0.0.1:8082 weight=3;\n    server 127.0.0.1:8083 backup;\n}\n\nserver {\n    listen 80;\n    server_name my_server;\n\n    location / {\n    root /usr/share/nginx/html;\n    index index.html;\n    proxy_pass http://my_server; \n        proxy_set_header   Host             $host;\n        proxy_set_header   X-Real-IP        $remote_addr;\n        proxy_set_header   X-Forwarded-For  $proxy_add_x_forwarded_for;\n}\n}\n</code></pre> <p>\u5f53\u8bbf\u95ee\u8be5\u7ad9\u70b9\u65f6(\u5c40\u57df\u7f51IP\u662f192.168.10.100),\u5237\u65b0\u9875\u97624\u6b21\uff0c\u5148\u51fa\u73b082\u9875\u9762\uff0c\u5171\u51fa\u73b03\u6b21\uff0c\u7136\u540e\u51fa\u73b0\u4e00\u6b2181\u9875\u9762\uff0c\u7136\u540e\u4f9d\u6b21\u5faa\u73af! 82\uff1a  81\uff1a  \u5f53\u5c06\u5bb9\u5668nginx1\u505c\u6389\u65f6\uff0c\u5237\u65b0\u9875\u9762\uff0c\u53ea\u670982\uff0cnginx1\u548cnginx2\u90fd\u505c\u6389\u65f6\uff0c\u624d\u4f1a\u663e\u793a 83\uff1a Bash<pre><code>[root@slave2 html]# docker stop nginx1 nginx2\nnginx1\nnginx2\n[root@slave2 html]# docker ps\nCONTAINER ID   IMAGE          COMMAND                  CREATED          STATUS          PORTS                                   NAMES\n5fc8360b894c   nginx:latest   \"/docker-entrypoint.\u2026\"   16 minutes ago   Up 16 minutes   0.0.0.0:8083-&gt;80/tcp, :::8083-&gt;80/tcp   nginx3\n</code></pre>  \u5f53\u5f00\u542f\u4e86ip_hash\u548c\u6743\u91cd\u65f6\uff0c\u6d4f\u89c8\u5668\u6307\u6325\u8bbf\u95ee\u6743\u91cd\u6700\u9ad8\u7684\u90a3\u53f0\u670d\u52a1\u5668;\u5982\u679c\u53ea\u8bbe\u7f6e\u4e86ip_hash,\u6ca1\u6709\u8bbe\u7f6e\u6743\u91cd\uff0c\u5219\u9ed8\u8ba4\u8bbf\u95ee\u6700\u5f00\u59cb\u8bbf\u95ee\u7684\u90a3\u53f0\u670d\u52a1\u5668 Bash<pre><code>[root@slave2 html]# cat /etc/nginx/conf.d/prox.conf \n# \u5f00\u542f\u8d1f\u8f7d\u5747\u8861\nupstream my_server {\n    server 127.0.0.1:8081 weight=1;\n    server 127.0.0.1:8082 weight=3;\n    server 127.0.0.1:8083;\n    ip_hash;  \n}\n\nserver {\n    listen 80;\n    server_name my_server;\n\n    location / {\n        root /usr/share/nginx/html;\n        index index.html;\n        proxy_pass http://my_server; \n        proxy_set_header   Host             $host;\n        proxy_set_header   X-Real-IP        $remote_addr;\n        proxy_set_header   X-Forwarded-For  $proxy_add_x_forwarded_for;\n}\n}\n</code></pre></p> <p>Text Only<pre><code>\u5173\u4e8enginx\u8d1f\u8f7d\u5747\u8861\u914d\u7f6e\u7684\u51e0\u4e2a\u72b6\u6001\u53c2\u6570\u8bb2\u89e3\u3002\n\n- down\uff0c\u8868\u793a\u5f53\u524d\u7684server\u6682\u65f6\u4e0d\u53c2\u4e0e\u8d1f\u8f7d\u5747\u8861\u3002\n\n- backup\uff0c\u9884\u7559\u7684\u5907\u4efd\u673a\u5668\u3002\u5f53\u5176\u4ed6\u6240\u6709\u7684\u975ebackup\u673a\u5668\u51fa\u73b0\u6545\u969c\u6216\u8005\u5fd9\u7684\u65f6\u5019\uff0c\u624d\u4f1a\u8bf7\u6c42backup\u673a\u5668\uff0c\u56e0\u6b64\u8fd9\u53f0\u673a\u5668\u7684\u538b\u529b\u6700\u8f7b\u3002\n\n- max_fails\uff0c\u5141\u8bb8\u8bf7\u6c42\u5931\u8d25\u7684\u6b21\u6570\uff0c\u9ed8\u8ba4\u4e3a1\u3002\u5f53\u8d85\u8fc7\u6700\u5927\u6b21\u6570\u65f6\uff0c\u8fd4\u56deproxy_next_upstream \u6a21\u5757\u5b9a\u4e49\u7684\u9519\u8bef\u3002\n\n- fail_timeout\uff0c\u5728\u7ecf\u5386\u4e86max_fails\u6b21\u5931\u8d25\u540e\uff0c\u6682\u505c\u670d\u52a1\u7684\u65f6\u95f4\u3002max_fails\u53ef\u4ee5\u548cfail_timeout\u4e00\u8d77\u4f7f\u7528\u3002\n\n- least_conn, \u8be5\u7b56\u7565\u4f1a\u5c06\u8bf7\u6c42\u5206\u914d\u5230\u8fde\u63a5\u6570\u6700\u5c11\u7684\u670d\u52a1\u4e0a\u3002\n</code></pre> 5. \u7b2c\u4e09\u65b9\u7b56\u7565 Text Only<pre><code>Nginx\u652f\u6301\u96c6\u6210\u7b2c\u4e09\u65b9\u7684\u7b56\u7565\u63d2\u4ef6\u3002\n\n\u6bd4\u5982\uff1a\n\nfair\uff1a\u6b64\u79cd\u7b97\u6cd5\u53ef\u4ee5\u4f9d\u636e\u9875\u9762\u5927\u5c0f\u548c\u52a0\u8f7d\u65f6\u95f4\u957f\u77ed\u667a\u80fd\u5730\u8fdb\u884c\u8d1f\u8f7d\u5747\u8861\uff0c\u5373\u54cd\u5e94\u65f6\u95f4\u77ed\u7684\u4f18\u5148\u5206\u914d\u3002\u6bd4\u4e0a\u9762\u66f4\u52a0\u667a\u80fd\u7684\u8d1f\u8f7d\u5747\u8861\u7b97\u6cd5\u3002\u4e0b\u8f7d\u5b89\u88c5 Nginx\u7684upstream_fair\u6a21\u5757\u3002\nurl_hash\uff1a\u6309\u8bbf\u95ee url\u7684 hash\u7ed3\u679c\u6765\u5206\u914d\u8bf7\u6c42\uff0c\u4f7f\u6bcf\u4e2aurl\u5b9a\u5411\u5230\u540c\u4e00\u4e2a\u540e\u7aef\u670d\u52a1\u5668\uff0c\u53ef\u4ee5\u8fdb\u4e00\u6b65\u63d0\u9ad8\u540e\u7aef\u7f13\u5b58\u670d\u52a1\u5668\u7684\u6548\u7387\u3002\u4e0b\u8f7d\u5b89\u88c5 Nginx \u7684hash\u8f6f\u4ef6\u5305\u3002\n</code></pre></p> Text Only<pre><code>\u9ad8\u53ef\u7528keepalive\n\n\n\n# Tengine\n&gt; \u6dd8\u5b9d\u57fa\u4e8enginx\u5f00\u53d1\u7684\u9ad8\u6027\u80fdweb\u670d\u52a1\u5668\uff0c\u80fd\u6297\u66f4\u9ad8\u5e76\u53d1\n&gt; https://tengine.taobao.org/document/install.html\n</code></pre>"},{"location":"Linux/NGINX/#6nginx-keepalived","title":"6.nginx + keepalived","text":""},{"location":"Linux/NGINX/#keepalived","title":"keepalived","text":"<p>keepalived \u76f8\u5173\u914d\u7f6e\u67e5\u770b\uff1akeepalived</p>"},{"location":"Linux/NGINX/#keepalivednginx","title":"keepalived\u914d\u7f6enginx\u91cd\u542f","text":"<ol> <li> <p>\u589e\u52a0nginx\u91cd\u542f\u811a\u672c Bash<pre><code>vim /etc/keepalived/check_nginx_alive_or_not.sh\n\n#!/bin/bash\n\nA=`ps -C nginx --no-header |wc -l`\n# \u5224\u65adnginx\u662f\u5426\u5b95\u673a\uff0c\u5982\u679c\u5b95\u673a\u4e86\uff0c\u5c1d\u8bd5\u91cd\u542f\nif [ $A -eq 0 ];then\n    /usr/local/nginx/sbin/nginx\n    # \u7b49\u5f85\u4e00\u5c0f\u4f1a\u518d\u6b21\u68c0\u67e5nginx\uff0c\u5982\u679c\u6ca1\u6709\u542f\u52a8\u6210\u529f\uff0c\u5219\u505c\u6b62keepalived\uff0c\u4f7f\u5176\u542f\u52a8\u5907\u7528\u673a\n    sleep 3\n    if [ `ps -C nginx --no-header |wc -l` -eq 0 ];then\n        killall keepalived\n    fi\nfi\n\n# \u589e\u52a0\u6267\u884c\u6743\u9650\nchmod +x /etc/keepalived/check_nginx_alive_or_not.sh\n</code></pre></p> </li> <li> <p>\u5728 keepalived.conf \u914d\u7f6e\u5b9a\u65f6\u76d1\u542c nginx \u72b6\u6001\u811a\u672c Bash<pre><code>vrrp_script check_nginx_alive {\n    script \"/etc/keepalived/check_nginx_alive_or_not.sh\"\n    interval 2 # \u6bcf\u9694\u4e24\u79d2\u8fd0\u884c\u4e0a\u4e00\u884c\u811a\u672c\n    weight 10 # \u5982\u679c\u811a\u672c\u8fd0\u884c\u6210\u529f\uff0c\u5219\u5347\u7ea7\u6743\u91cd+10\n    # weight -10 # \u5982\u679c\u811a\u672c\u8fd0\u884c\u5931\u8d25\uff0c\u5219\u5347\u7ea7\u6743\u91cd-10\n}\n</code></pre></p> </li> <li> <p>\u5728vrrp_instance\u4e2d\u65b0\u589e\u76d1\u63a7\u7684\u811a\u672c Bash<pre><code>    track_script {\n        check_nginx_alive   # \u8ffd\u8e2a nginx \u811a\u672c\n    }\n</code></pre></p> </li> </ol>"},{"location":"Linux/keepalived/","title":"\u9ad8\u53ef\u7528 keepalived","text":""},{"location":"Linux/keepalived/#keepalived_1","title":"keepalived","text":"<ol> <li>\u7528keepalived\u5b9e\u73b0\u670d\u52a1\u5668\u4e3b\u5907\u9ad8\u53ef\u7528 Bash<pre><code># \u5b89\u88c5keepalived\n[root@Test1 ~]# yum -y install keepalived\n\n# \u4fee\u6539\u914d\u7f6e\u6587\u4ef6\n[root@Test1 ~]# cat /etc/keepalived/keepalived.conf \n! Configuration File for keepalived\n\nglobal_defs {\n   notification_email {\n     acassen@firewall.loc\n     failover@firewall.loc\n     sysadmin@firewall.loc\n   }\n   notification_email_from Alexandre.Cassen@firewall.loc\n   smtp_server 192.168.200.1\n   smtp_connect_timeout 30\n   #router_id LVS_DEVEL\n   router_id Test1\n   vrrp_skip_check_adv_addr\n   #vrrp_strict\n   vrrp_garp_interval 0\n   vrrp_gna_interval 0\n}\n\nvrrp_instance VI_1 {\n    state BACKUP\n    interface ens32\n    virtual_router_id 66\n    priority 80\n    advert_int 1\n    authentication {\n        auth_type PASS\n        auth_pass 123456\n    }\n    virtual_ipaddress {\n        192.168.10.5/24 dev ens32 label ens32:0\n    }\n}\n</code></pre></li> </ol> <p>Bash<pre><code># \u914d\u7f6e\u89e3\u6790\uff0c\u6839\u636e\u4e3b\u5907\u7684\u5177\u4f53\u60c5\u51b5\u4fee\u6539\n#vrrp_strict            \u8fd9\u4e00\u9879\u9700\u8981\u6ce8\u91ca\u6389\uff0c\u5426\u5219\u4f1a\u8d70\u9632\u706b\u5899\u7b56\u7565\nrouter_id Test1         \u5199\u4e3b\u673a\u540d\u5c31\u884c\nstate BACKUP            \u6839\u636e\u4e3b\u5907\u673a\u5668\u4fee\u6539  \u4e3b\uff1aMASTER  \u5907\uff1aBACKUP\ninterface ens32         \u586b\u5199\u627f\u8f7d\u865a\u62dfIP\u7684\u7f51\u5361\uff0c\u4e0d\u662f\u56fa\u5b9a\u7684\uff0c\u9700\u8981\u6839\u636e\u673a\u5668\u5b9e\u9645\u7684\u7f51\u5361\u540d\u4fee\u6539\nvirtual_router_id 66    \u4fee\u6539\u8def\u7531id\u7684\u4f18\u5148\u7ea7\uff0c\u5177\u4f53\u54ea\u53f0\u673a\u5668\u662f\u4e3b\uff0c\u54ea\u53f0\u673a\u5668\u662f\u5907\u901a\u8fc7\u8fd9\u4e2a\u4f18\u5148\u7ea7\u51b3\u5b9a\nauthentication {\n    auth_type PASS\n    auth_pass 123456    \u53ef\u4ee5\u6539\u4e2a\u5bc6\u7801\n}\nvirtual_ipaddress {\n    192.168.10.5/24 dev ens32 label ens32:0     \u4fee\u6539\u9ed8\u8ba4\u7684\u865a\u62dfIP\uff0c\u4ee5\u53ca\u627f\u8f7dip\u7684\u7f51\u5361\u8bbe\u5907\n}\n</code></pre> 2. keepalived\u53cc\u4e3b\u673a\u4e92\u4e3a\u4e3b\u5907     \u89c4\u5219\uff1a\u4ee5\u4e00\u4e2a\u865a\u62dfip\u5206\u7ec4\u5f52\u4e3a\u540c\u4e00\u4e2a\u8def\u7531  Bash<pre><code># \u4e3b\u8282\u70b9\u914d\u7f6e\nglobal_defs {\n   router_id keep_104\n}\n\nvrrp_instance VI_1 {\n    state MASTER\n    interface ens33\n    virtual_router_id 51\n    priority 100\n    advert_int 1\n    authentication {\n        auth_type PASS\n        auth_pass 1111\n    }\n    virtual_ipaddress {\n        192.168.1.108\n    }\n}\n\nvrrp_instance VI_2 {\n    state BACKUP\n    interface ens33\n    virtual_router_id 52\n    priority 80\n    advert_int 1\n    authentication {\n        auth_type PASS\n        auth_pass 1111\n    }\n    virtual_ipaddress {\n        192.168.1.138\n    }\n}\n</code></pre></p> Bash<pre><code># \u5907\u7528\u8282\u70b9\u914d\u7f6e\nglobal_defs {\n   router_id keep_105\n}\n\nvrrp_instance VI_1 {\n    state BACKUP\n    interface ens33\n    virtual_router_id 51\n    priority 80\n    advert_int 1\n    authentication {\n        auth_type PASS\n        auth_pass 1111\n    }\n    virtual_ipaddress {\n        192.168.1.108\n    }\n}\n\nvrrp_instance VI_2 {\n    state MASTER\n    interface ens33\n    virtual_router_id 52\n    priority 100\n    advert_int 1\n    authentication {\n        auth_type PASS\n        auth_pass 1111\n    }\n    virtual_ipaddress {\n        192.168.1.138\n    }\n}\n</code></pre> <p>keepalived \u53cc\u4e3b\u673a\u4e92\u4e3a\u4e3b\u5907\u5176\u5b9e\u548c\u70ed\u5907\u5dee\u4e0d\u591a\uff0c\u53ea\u662f\u901a\u8fc7\u4e24\u7ec4\u4e0d\u540c\u8def\u7531 id \u6765\u7ba1\u7406\uff0cid 51 \u8bbe\u4e3aA\u673a\u5668\u662f\u4e3b\u3001B\u673a\u5668\u662f\u5907\uff1bid 52 \u8bbe\u4e3aA\u673a\u5668\u662f\u5907\uff0cB\u673a\u5668\u662f\u4e3b\uff1b\u5177\u4f53\u4e3b\u5907\u8bbe\u7f6e\u901a\u8fc7\u914d\u7f6e priority \u4f18\u5148\u7ea7\u5b9e\u73b0</p>"},{"location":"Linux/linux/","title":"linux\u76f8\u5173","text":""},{"location":"Linux/linux/#1","title":"1.\u7cfb\u7edf\u5b89\u88c5","text":"Text Only<pre><code>centos\u5149\u76d8\u9009\u62e9\n\nhttps://mirrors.aliyun.com/centos-vault/7.6.1810/isos/x86_64/?spm=a2c6h.25603864.0.0.484d289bf1kM8o\n\n\u9009\u62e9 CentOS-7-x86_64-DVD-1810.iso\ninstall\uff08\u53c2\u8003\u7f51\u7ad9\uff1ahttps://www.cnblogs.com/mr-xiong/p/12470034.html\uff09\n</code></pre> <p>Bash<pre><code>\u5206\u533a\u914d\u7f6e\n\nboot\u5206\u533a\u4e00\u822c\u662f 200M\nswap\u5206\u533a \u4e00\u822c\u662f\u5185\u5b58\u7684\u4e24\u500d\uff0816G\uff09\n/\u5206\u533a\n\u7f51\u7edc\u914d\u7f6e(NAT\u6a21\u5f0f)\n\nnmcli connection modify ens33 ipv4.methord manual ipv4.address [] ipv4.dns [] ipv4.gateway [] autoconnect yes\n\nip a s\n</code></pre> \u89e3\u51b3\u7269\u7406\u673aping\u4e0d\u901a\u865a\u62df\u673a</p> <p>\u7269\u7406\u673a\u4e0a\u4fee\u6539\u865a\u62df\u7f51\u5361\u5730\u5740</p> <p>ip\u548c\u865a\u62df\u4ea4\u6362\u673a\u673a\u7684IP\u5728\u540c\u4e00\u7f51\u6bb5\uff0c\u7f51\u5173\u548c\u865a\u62df\u4ea4\u6362\u673a\u7684\u7f51\u5173\u4e00\u6837\uff0c\u5982\u56fenat</p> <p>\u89e3\u51b3\u865a\u62df\u673aping\u4e0d\u901a\u7f51\u5173</p> <p>\u91cd\u7f6e\u865a\u62df\u673a\u7f51\u5361\uff08\u5220\u9664\u6dfb\u52a0\uff09</p>"},{"location":"Linux/linux/#linux","title":"Linux\u7cfb\u7edf\u76f8\u5173","text":"<p>https://www.linuxcool.com/ \uff08Linux\u547d\u4ee4\u5927\u5168\uff09</p> <p>\u67e5\u770b\u7cfb\u7edf\u7248\u672c\u53f7 Bash<pre><code>[root@192 ~]# cat /etc/centos-release\n</code></pre> \u67e5\u770b\u5185\u6838\u53c2\u6570 Bash<pre><code>[root@192 ~]# uname -a\n</code></pre> \u67e5\u770b\u7aef\u53e3\u5360\u7528</p> <p>netstate -luntp | grep ... \u5904\u7406boot\u5206\u533a\u6ee1\u4e86\u7684\u529e\u6cd5 Bash<pre><code>[root@localhost boot]# uname -r\n[root@localhost boot]# rpm -qa | grep kernel\n\n\n[root@localhost boot]# rpm -q kernel\n\n\n[root@localhost boot]# rpm -e kernel-3.10.0-957.el7.x86_64   \uff08\u5220\u9664\u8f83\u8001\u7684\u7248\u672c\uff09\n\n\n[root@localhost boot]# df  -lh\n</code></pre></p>"},{"location":"Linux/linux/#_1","title":"\u8f6f\u4ef6\u90e8\u7f72\u5b89\u88c5","text":""},{"location":"Linux/linux/#linux_1","title":"Linux\u4e0b\u8f6f\u4ef6\u5b89\u88c5\u7684\u51e0\u79cd\u65b9\u5f0f","text":"<p>Linux\u4e0b\u5e38\u89c1\u7684\u5b89\u88c5\u5305\u6709\u4ee5\u4e0b\u96c6\u4e2d\u5f62\u5f0f\uff08\u540d\u79f0-\u7248\u672c-\u4fee\u6b63\u7248-\u7c7b\u578b\uff09\uff1a</p> <p>tar\u5305\uff1a\u5982software-1.2.3-1.tar.gz \u8be5\u5f62\u5f0f\u662f\u7528\u6253\u5305\u5de5\u5177tar\u6253\u5305\u7684 rpm\u5305\uff1a\u5982software-1.2.3-1.i386.rpm \u8fd9\u662fRedhat Linux\u63d0\u4f9b\u7684\u4e00\u79cd\u62a5\u9053\u989d\u5c01\u88c5\u683c\u5f0f dpkg\u5305\uff1a\u5982software-1.2.3-1.deb \u8fd9\u662fDebian\u63d0\u4f9b\u7684\u5305\u7684\u5c01\u88c5\u683c\u5f0f \u6e90\u7801\u5b89\u88c5</p> <p>rpm\u5b89\u88c5</p> <p>yum\u5b89\u88c5</p> <p>\u914d\u7f6e\u8f6f\u4ef6\u4ed3\u5e93 Bash<pre><code>[root@192 yum.repos.d]# wget -O /etc/yum.repos.d/CentOS-Base.repo   https://mirrors.aliyun.com/repo/Centos-7.repo\n[root@192 yum.repos.d]# yum clean all\n\n\n[root@192 yum.repos.d]# yum makecache\n</code></pre></p>"},{"location":"Linux/linux/#jdk","title":"\u5b89\u88c5jdk","text":"<p>\u4e0b\u8f7djdk\u538b\u7f29\u5305</p> <p>\u89e3\u538b Bash<pre><code>tar -xzvf jdk-18_linux-x64_bin.tar.gz\nmv jdk-18.0.2 /usr/local/tools/\n</code></pre> \u5378\u8f7dopenjdk</p> <p>yum remove ***</p> <p>\u4fee\u6539\u914d\u7f6e/etc/profile Bash<pre><code>export JAVA_HOME=/usr/local/tools/jdk-18.0.2 \uff08jdk\u7684\u5b58\u653e\u8def\u5f84\uff09\u200b export CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar\u200b export PATH=$PATH:$JAVA_HOME/bin\n\nsource /etc/profile\n\nJava -version\n</code></pre></p>"},{"location":"Linux/linux/#mysql","title":"\u5b89\u88c5mysql","text":"<p>\u4e0b\u8f7dmysql Bash<pre><code>mysql-8.0.30-1.el7.x86_64.rpm-bundle.tar\n#\u5220\u9664\u81ea\u5e26\u7684mariadb\n[root@localhost opt]# rpm -qa | grep mariadb\n[root@localhost opt]# yum list | grep mariadb*\n[root@localhost opt]# yum remove mariadb-libs.x86_64\n# \u89e3\u538b\n\n[root@localhost mysql]# tar -xvf mysql-8.0.30-1.el7.x86_64.rpm-bundle.tar\n#\u5b89\u88c5\uff08\u9700\u8981\u6309\u7167\u987a\u5e8f\uff09\n\n[root@localhost mysql]# rpm -ivh mysql-community-common-8.0.30-1.el7.x86_64.rpm -c --nodeps --force\n[root@localhost mysql]# rpm -ivh mysql-community-libs-8.0.30-1.el7.x86_64.rpm -c --nodeps --force\n[root@localhost mysql]# rpm -ivh mysql-community-client-8.0.30-1.el7.x86_64.rpm -c --nodeps --force\n[root@localhost mysql]# rpm -ivh mysql-community-server-8.0.30-1.el7.x86_64.rpm -c --nodeps --force\n#\u68c0\u67e5\n[localhost mysql]# rpm -qa | grep mysql\n#\u521d\u59cb\u5316mysql\n\n#\u521d\u59cb\u5316\n\n[root@localhost mysql]# mysqld --initialize\n\n#\u751f\u6210\u521d\u59cb\u5bc6\u7801\n\nroot@localhost mysql]# chown mysql:mysql /var/lib/mysql -R\n\n#\u5f00\u542f\u670d\u52a1\u67e5\u770b\u521d\u59cb\u5bc6\u7801\n\n[root@localhost mysql]# cat /var/log/mysqld.log | grep password\n\n#\u767b\u5f55mysql\n\n[root@localhost mysql]# mysql -uroot -p [enter\u8f93\u5165\u590d\u5236\u7684\u5bc6\u7801]\n\n#\u91cd\u7f6e\u5bc6\u7801\uff08\u5bc6\u7801\u6c38\u4e45\u4e0d\u8fc7\u671f\uff09\n\nmysql&gt; alter user root@'localhost' identified by 'yma666' password expire never;\n\n#\u5f00\u653e\u9632\u706b\u5899\u7aef\u53e3\n\n[root@localhost mysql]# firewall-cmd --list-all\n[root@localhost mysql]# firewall-cmd --zone=public --add-port=3306/tcp --permanent\n[root@localhost mysql]# firewall-cmd --reload\n#\u8fde\u63a5\u6570\u636e\u5e93\n\n#\u521b\u5efa\u7528\u6237\u7528\u6765\u5916\u90e8\u8fde\u63a5\u6570\u636e\u5e93\n\nmysql&gt; create user yma@'%' identified by 'yma666';\n\n#\u6388\u6743\n\nmysql&gt; grant all on . to yma@'%';\n\n#\u5176\u4ed6\u8fde\u63a5\u95ee\u9898\u89e3\u51b3\u65b9\u6848\n\nalter user 'lzj'@'%' identified by 'zdx123zdx' password expire never;\nalter user 'root'@'localhost' identified with mysql_native_password by 'password';\n\n\nalter user 'lzj'@'%' identified with mysql_native_password by 'zdx123zdx';\n\n\n\nalter user 'root'@'localhost' identified with mysql_native_password by 'password';\n</code></pre></p>"},{"location":"Linux/linux/#tomcat","title":"\u5b89\u88c5tomcat","text":"<p>Bash<pre><code>[root@localhost yum.repos.d]# yum -y install tomcat\n[root@localhost mysql]# rpm -qa | grep tomcat\n#\u542f\u52a8tomcat\n[root@localhost mysql]# systemctl start tomcat.service\n#\u5f00\u653e\u9632\u706b\u5899\u7aef\u53e3\n[root@localhost mysql]# firewall-cmd --zone=public --add-port=8080/tcp --permanent\n#\u91cd\u542f\u6216\u91cd\u65b0\u52a0\u8f7d\uff08--reload\uff09\u9632\u706b\u5899\n[root@localhost mysql]# systemctl restart firewalld.service\n#\u5b89\u88c5\u7f51\u9875\u63d2\u4ef6\n[root@localhost mysql]# yum -y install tomcat-admin-webapps.noarch tomcat-webapps.noarch\n#\u4fee\u6539\u6587\u4ef6/etc/tomcat/tomcat-users.xml\n\n8. \u767b\u5f55\u7ba1\u7406\u6240\u6709\u53d1\u5e03\u7684\u5e94\u7528\nhttp://192.168.10.11:8080/manager/html\n\n\n\n\n\u9009\u62e9war\u5305\u53d1\u5e03\n\n\nimage-20220808184124941\n\n\n\n\n\u914d\u7f6eSSL\n\n\n\n\n\ncd /usr/java/jdk1.6.0_32/bin\n./keytool -genkey -alias tomcat -keyalg RSA -keystore /usr/local/tomcat/conf/.keystore\n</code></pre> \u53c2\u8003\uff1ahttps://www.jb51.net/LINUXjishu/801011.html</p>"},{"location":"Linux/linux/#tomcat_1","title":"\u6e90\u7801\u5b89\u88c5tomcat","text":"<p>\u4e0b\u8f7dapache-tomcat-9.0.65.tar.gz</p> <p>\u4e0a\u4f20\u5230\u670d\u52a1\u5668</p> <p>\u5c06\u6587\u4ef6\u89e3\u538b\u5230\u5b89\u88c5\u4f4d\u7f6e\uff08/usr/local/tools/tomcat\uff09 Bash<pre><code>[root@localhost bin]# cp -p /usr/local/tools/tomcat/bin/catalina.sh /etc/init.d/tomcat\n</code></pre> \u8bbe\u7f6e\u5f00\u673a\u81ea\u542f</p> <p>\u53c2\u8003\uff1ahttps://blog.csdn.net/cbuy888/article/details/87190065</p> <p>[root@localhost bin]# vim /etc/init.d/tomcat Bash<pre><code># chkconfig: 112\uff08\u542f\u52a8\u7ea7\u522b0-6\uff09 63\uff08\u542f\u52a8\u4f18\u5148\u7ea70-100\uff09 37\uff08\u505c\u6b62\u4f18\u5148\u7ea70-100\uff0c\u6570\u5b57\u8d8a\u5927\uff0c\u4f18\u5148\u7ea7\u8d8a\u4f4e\uff09\n# description: tomcat server init script\n# Source Function Library\n. /etc/init.d/functions\nJAVA_HOME=/usr/local/tools/jdk-18.0.2\nCATALINA_HOME=/usr/local/tools/tomcat\n[root@localhost bin]# chmod 755 /etc/init.d/tomcat\n[root@localhost bin]# chkconfig --add tomcat\n[root@localhost bin]# chkconfig tomcat on\n</code></pre> \u914d\u7f6etomcat</p> <p>\u4fee\u6539\u7aef\u53e3\uff08\u5982\u4e0b\u4ee3\u7801\u5757\uff09 Bash<pre><code>[root@localhost conf]# vim /usr/local/tools/tomcat/conf/server.xml\n    &lt;Connector port=\"80\" protocol=\"HTTP/1.1\"\n               connectionTimeout=\"20000\"\n               redirectPort=\"8443\" /&gt;\n[root@localhost conf]# firewall-cmd --zone=public --add-port=80/tcp --permanent \n#\u914d\u7f6e\u865a\u62df\u4e3b\u673a\uff08\u7f51\u7ad9\uff09\n\n[root@localhost conf]# vim /usr/local/tools/tomcat/conf/server.xml\n&lt;Host name=\"www.yma.ca\"  appBase=\"webapps\"\n         unpackWARs=\"true\" autoDeploy=\"true\"&gt;\n         &lt;!-- SingleSignOn valve, share authentication between web applications\n      Documentation at: /docs/config/valve.html --&gt;\n &lt;!--\n &lt;Valve className=\"org.apache.catalina.authenticator.SingleSignOn\" /&gt;\n --&gt;\na\n\n#\u914d\u7f6eSSL\n\n[root@localhost conf]# cd /usr/local/tools/jdk-18.0.2/bin\n[root@localhost bin]# ./keytool -genkey -alias tomcat -keyalg RSA -keystore /usr/local/tools/tomcat/conf/.keystore\n</code></pre></p>"},{"location":"Linux/linux/#2linux","title":"2.Linux\u7cfb\u7edf\u8c03\u4f18","text":""},{"location":"Linux/linux/#selinux","title":"\u5173\u95edselinux","text":"Bash<pre><code>vim /etc/selinux/config\n</code></pre>"},{"location":"Linux/linux/#_2","title":"\u67e5\u770b\u73af\u5883\u53d8\u91cf","text":"Bash<pre><code>env\n\nenv | grep JAVA\n\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf\u6587\u4ef6/etc/profile\n\n\u8bbe\u7f6e\u8d26\u6237\u8d85\u65f6\u65f6\u95f4\n\n[root@chao ~]# echo 'export TMOUT=300' &gt;&gt;/etc/profile\n[root@chao ~]# source /etc/profile\n[root@chao ~]# env |grep -i tmout\n</code></pre>"},{"location":"Linux/linux/#_3","title":"\u5f00\u673a\u81ea\u542f\u670d\u52a1","text":"<ul> <li>\u9700\u8981\u5f00\u673a\u81ea\u542f\u7684\u670d\u52a1</li> <li>sshd,\u8fdc\u7a0b\u8fde\u63a5\u9700\u8981\u4f7f\u7528\u6b64\u670d\u52a1</li> <li>rsyslog,\u65e5\u5fd7\u6709\u5173\u7684\u8f6f\u4ef6</li> <li>networ\uff0c\u7f51\u7edc\u76f8\u5173\u7684\u8f6f\u4ef6</li> <li>crond,\u5b9a\u65f6\u4efb\u52a1\u76f8\u5173\u8f6f\u4ef6</li> <li>sysstat\u6570\u636e\u5206\u6790\u7684\u8f6f\u4ef6</li> <li>\u67e5\u770b\u76ee\u524d\u5f00\u673a\u81ea\u542f\u7684\u670d\u52a1 Bash<pre><code>systemctl list-unit-files|grep enabled\n</code></pre></li> <li>\u5173\u95ed\u5f00\u673a\u81ea\u542f Bash<pre><code>systemctl disable postfix.service \n</code></pre></li> </ul>"},{"location":"Linux/linux/#ssh","title":"\u8bbe\u7f6essh\u670d\u52a1","text":"Bash<pre><code>#\u7f16\u8f91/etc/ssh/sshd_config\n\n#Port 22222 \uff08\u9ed8\u8ba4\u7aef\u53e322\uff09\nLinux\u4e2d\u6587\u8bbe\u7f6e\n\u67e5\u770b\u7cfb\u7edf\u662f\u5426\u662f zh_CN.UTF-8\uff0c\u6dfb\u52a0\u4ee3\u7801\n\ncat /etc/locale.conf\n\nLANG=\"zh_CN.UTF-8\"\n</code></pre>"},{"location":"Linux/linux/#_4","title":"\u8bbe\u7f6e\u547d\u4ee4\u884c\u5386\u53f2\u8bb0\u5f55\u6570","text":"Bash<pre><code>[root@chao ~]# sed -i 's/^HISTSIZE=5/HISTSIZE=10/' /etc/profile\n[root@chao ~]# source /etc/profile\n</code></pre>"},{"location":"Linux/linux/#_5","title":"\u9501\u5b9a\u91cd\u8981\u6587\u4ef6","text":"Bash<pre><code>[root@chao ~]# chattr -i /etc/passwd /etc/shoadow /etc/group /etc/gshadow /etc/inittab\n</code></pre>"},{"location":"Linux/linux/#_6","title":"\u9690\u85cf\u7cfb\u7edf\u7248\u672c","text":"Bash<pre><code>[root@chao ~]# echo redflag 5.9 &gt;/etc/issue\n[root@chao ~]# cat /etc/issue\nredflag 5.9\n</code></pre>"},{"location":"Linux/linux/#_7","title":"\u901a\u914d\u7b26","text":"<p>\u88683-3 Linux\u7cfb\u7edf\u4e2d\u7684\u901a\u914d\u7b26\u53ca\u542b\u4e49</p> \u901a\u914d\u7b26 \u542b\u4e49 * \u4efb\u610f\u5b57\u7b26 ? \u5355\u4e2a\u4efb\u610f\u5b57\u7b26 [a-z] \u5355\u4e2a\u5c0f\u5199\u5b57\u6bcd [A-Z] \u5355\u4e2a\u5927\u5199\u5b57\u6bcd [a-Z] \u5355\u4e2a\u5b57\u6bcd [0-9] \u5355\u4e2a\u6570\u5b57 [[:alpha:]] \u4efb\u610f\u5b57\u6bcd [[:upper:]] \u4efb\u610f\u5927\u5199\u5b57\u6bcd [[:lower:]] \u4efb\u610f\u5c0f\u5199\u5b57\u6bcd [[:digit:]] \u6240\u6709\u6570\u5b57 [[:alnum:]] \u4efb\u610f\u5b57\u6bcd\u52a0\u6570\u5b57 [[:punct:]] \u6807\u70b9\u7b26\u53f7 \u8f6c\u4e49\u7b26 \u53cd\u659c\u6760\uff08\\\uff09\uff1a\u4f7f\u53cd\u659c\u6760\u540e\u9762\u7684\u4e00\u4e2a\u53d8\u91cf\u53d8\u4e3a\u5355\u7eaf\u7684\u5b57\u7b26\u3002 \u5355\u5f15\u53f7\uff08' '\uff09\uff1a\u8f6c\u4e49\u5176\u4e2d\u6240\u6709\u7684\u53d8\u91cf\u4e3a\u5355\u7eaf\u7684\u5b57\u7b26\u4e32\u3002 \u53cc\u5f15\u53f7\uff08\" \"\uff09\uff1a\u4fdd\u7559\u5176\u4e2d\u7684\u53d8\u91cf\u5c5e\u6027\uff0c\u4e0d\u8fdb\u884c\u8f6c\u4e49\u5904\u7406\u3002 \u53cd\u5f15\u53f7\uff08\uff09\uff1a\u628a\u5176\u4e2d\u7684\u547d\u4ee4\u6267\u884c\u540e\u8fd4\u56de\u7ed3\u679c\u3002"},{"location":"Linux/linux/#top","title":"top","text":"<p>top -p \uff1a\u67e5\u770b\u6307\u5b9a\u8fdb\u7a0b\u7684top\u4fe1\u606f top -H -p:\u67e5\u770b\u6307\u5b9a\u8fdb\u7a0b\u7684\u6240\u6709\u7ebf\u7a0b\u7684top\u4fe1\u606f</p>"},{"location":"Linux/linux/#_8","title":"\u91cd\u8981\u7684\u73af\u5883\u53d8\u91cf","text":"<p>\u88683-4 Linux\u7cfb\u7edf\u4e2d\u6700\u91cd\u8981\u768410\u4e2a\u73af\u5883\u53d8\u91cf</p> <p>\u53d8\u91cf\u540d\u79f0    \u4f5c\u7528 HOME    \u7528\u6237\u7684\u4e3b\u76ee\u5f55\uff08\u5373\u5bb6\u76ee\u5f55\uff09 SHELL   \u7528\u6237\u5728\u4f7f\u7528\u7684Shell\u89e3\u91ca\u5668\u540d\u79f0 HISTSIZE    \u8f93\u51fa\u7684\u5386\u53f2\u547d\u4ee4\u8bb0\u5f55\u6761\u6570 HISTFILESIZE    \u4fdd\u5b58\u7684\u5386\u53f2\u547d\u4ee4\u8bb0\u5f55\u6761\u6570 MAIL    \u90ae\u4ef6\u4fdd\u5b58\u8def\u5f84 LANG    \u7cfb\u7edf\u8bed\u8a00\u3001\u8bed\u7cfb\u540d\u79f0 RANDOM  \u751f\u6210\u4e00\u4e2a\u968f\u673a\u6570\u5b57 PS1 Bash\u89e3\u91ca\u5668\u7684\u63d0\u793a\u7b26 PATH    \u5b9a\u4e49\u89e3\u91ca\u5668\u641c\u7d22\u7528\u6237\u6267\u884c\u547d\u4ee4\u7684\u8def\u5f84 EDITOR  \u7528\u6237\u9ed8\u8ba4\u7684\u6587\u672c\u7f16\u8f91\u5668</p>"},{"location":"Linux/linux/#_9","title":"\u7f51\u5361\u914d\u7f6e","text":"<p>\u8bbe\u5907\u7c7b\u578b\uff1aTYPE=Ethernet</p> <p>\u5730\u5740\u5206\u914d\u6a21\u5f0f\uff1aBOOTPROTO=static</p> <p>\u7f51\u5361\u540d\u79f0\uff1aNAME=ens160</p> <p>\u662f\u5426\u542f\u52a8\uff1aONBOOT=yes</p> <p>IP\u5730\u5740\uff1aIPADDR=192.168.10.10</p> <p>\u5b50\u7f51\u63a9\u7801\uff1aNETMASK=255.255.255.0</p> <p>\u7f51\u5173\u5730\u5740\uff1aGATEWAY=192.168.10.1</p> <p>DNS\u5730\u5740\uff1aDNS1=192.168.10.1</p> <p>\u6309\u7167\u6d4b\u8bd5\u5bf9\u8c61\u6765\u5212\u5206\uff0c\u6761\u4ef6\u6d4b\u8bd5\u8bed\u53e5\u53ef\u4ee5\u5206\u4e3a4\u79cd\uff1a \u6587\u4ef6\u6d4b\u8bd5\u8bed\u53e5\uff1b</p> <p>\u903b\u8f91\u6d4b\u8bd5\u8bed\u53e5\uff1b</p> <p>\u6574\u6570\u503c\u6bd4\u8f83\u8bed\u53e5\uff1b</p> <p>\u5b57\u7b26\u4e32\u6bd4\u8f83\u8bed\u53e5\u3002</p> <p>\u88684-3 \u6587\u4ef6\u6d4b\u8bd5\u6240\u7528\u7684\u53c2\u6570</p> <p>\u64cd\u4f5c\u7b26 \u4f5c\u7528 -d  \u6d4b\u8bd5\u6587\u4ef6\u662f\u5426\u4e3a\u76ee\u5f55\u7c7b\u578b -e  \u6d4b\u8bd5\u6587\u4ef6\u662f\u5426\u5b58\u5728 -f  \u5224\u65ad\u662f\u5426\u4e3a\u4e00\u822c\u6587\u4ef6 -r  \u6d4b\u8bd5\u5f53\u524d\u7528\u6237\u662f\u5426\u6709\u6743\u9650\u8bfb\u53d6 -w  \u6d4b\u8bd5\u5f53\u524d\u7528\u6237\u662f\u5426\u6709\u6743\u9650\u5199\u5165 -x  \u6d4b\u8bd5\u5f53\u524d\u7528\u6237\u662f\u5426\u6709\u6743\u9650\u6267\u884c \u88684-4 \u53ef\u7528\u7684\u6574\u6570\u6bd4\u8f83\u8fd0\u7b97\u7b26</p> <p>\u64cd\u4f5c\u7b26 \u4f5c\u7528 -eq \u662f\u5426\u7b49\u4e8e -ne \u662f\u5426\u4e0d\u7b49\u4e8e -gt \u662f\u5426\u5927\u4e8e -lt \u662f\u5426\u5c0f\u4e8e -le \u662f\u5426\u7b49\u4e8e\u6216\u5c0f\u4e8e -ge \u662f\u5426\u5927\u4e8e\u6216\u7b49\u4e8e \u88684-5 \u5e38\u89c1\u7684\u5b57\u7b26\u4e32\u6bd4\u8f83\u8fd0\u7b97\u7b26</p> <p>\u64cd\u4f5c\u7b26 \u4f5c\u7528 =   \u6bd4\u8f83\u5b57\u7b26\u4e32\u5185\u5bb9\u662f\u5426\u76f8\u540c !=  \u6bd4\u8f83\u5b57\u7b26\u4e32\u5185\u5bb9\u662f\u5426\u4e0d\u540c -z  \u5224\u65ad\u5b57\u7b26\u4e32\u5185\u5bb9\u662f\u5426\u4e3a\u7a7a \u88685-7 SUID\u3001SGID\u3001SBIT\u7279\u6b8a\u6743\u9650\u7684\u8bbe\u7f6e\u53c2\u6570</p> <p>\u53c2\u6570  \u4f5c\u7528 u+s \u8bbe\u7f6eSUID\u6743\u9650 u-s \u53d6\u6d88SUID\u6743\u9650 g+s \u8bbe\u7f6eSGID\u6743\u9650 g-s \u53d6\u6d88SGID\u6743\u9650 o+t \u8bbe\u7f6eSBIT\u6743\u9650 o-t \u53d6\u6d88SBIT\u6743\u9650 \u88685-8 chattr/lsattr\u547d\u4ee4\u4e2d\u7684\u53c2\u6570\u53ca\u5176\u4f5c\u7528</p> <p>\u53c2\u6570  \u4f5c\u7528 i   \u65e0\u6cd5\u5bf9\u6587\u4ef6\u8fdb\u884c\u4fee\u6539\uff1b\u82e5\u5bf9\u76ee\u5f55\u8bbe\u7f6e\u4e86\u8be5\u53c2\u6570\uff0c\u5219\u4ec5\u80fd\u4fee\u6539\u5176\u4e2d\u7684\u5b50\u6587\u4ef6\u5185\u5bb9\u800c\u4e0d\u80fd\u65b0\u5efa\u6216\u5220\u9664\u6587\u4ef6 a   \u4ec5\u5141\u8bb8\u8865\u5145\uff08\u8ffd\u52a0\uff09\u5185\u5bb9\uff0c\u65e0\u6cd5\u8986\u76d6/\u5220\u9664\u5185\u5bb9\uff08Append Only\uff09 S   \u6587\u4ef6\u5185\u5bb9\u5728\u53d8\u66f4\u540e\u7acb\u5373\u540c\u6b65\u5230\u786c\u76d8\uff08sync\uff09 s   \u5f7b\u5e95\u4ece\u786c\u76d8\u4e2d\u5220\u9664\uff0c\u4e0d\u53ef\u6062\u590d\uff08\u75280\u586b\u5145\u539f\u6587\u4ef6\u6240\u5728\u786c\u76d8\u533a\u57df\uff09 A   \u4e0d\u518d\u4fee\u6539\u8fd9\u4e2a\u6587\u4ef6\u6216\u76ee\u5f55\u7684\u6700\u540e\u8bbf\u95ee\u65f6\u95f4\uff08atime\uff09 b   \u4e0d\u518d\u4fee\u6539\u6587\u4ef6\u6216\u76ee\u5f55\u7684\u5b58\u53d6\u65f6\u95f4 D   \u68c0\u67e5\u538b\u7f29\u6587\u4ef6\u4e2d\u7684\u9519\u8bef d   \u4f7f\u7528dump\u547d\u4ee4\u5907\u4efd\u65f6\u5ffd\u7565\u672c\u6587\u4ef6/\u76ee\u5f55 c   \u9ed8\u8ba4\u5c06\u6587\u4ef6\u6216\u76ee\u5f55\u8fdb\u884c\u538b\u7f29 u   \u5f53\u5220\u9664\u8be5\u6587\u4ef6\u540e\u4f9d\u7136\u4fdd\u7559\u5176\u5728\u786c\u76d8\u4e2d\u7684\u6570\u636e\uff0c\u65b9\u4fbf\u65e5\u540e\u6062\u590d t   \u8ba9\u6587\u4ef6\u7cfb\u7edf\u652f\u6301\u5c3e\u90e8\u5408\u5e76\uff08tail-merging\uff09 x   \u53ef\u4ee5\u76f4\u63a5\u8bbf\u95ee\u538b\u7f29\u6587\u4ef6\u4e2d\u7684\u5185\u5bb9 partprobe \u91cd\u8bfb\u5206\u533a\u8868</p> <p>uquota \u78c1\u76d8\u5bb9\u91cf\u914d\u989d</p> <p>xfs_quota\u7ba1\u7406\u8bbe\u5907\u7684\u78c1\u76d8\u5bb9\u91cf\u914d\u989d</p> <p>xfs_quota -x -c 'limit bsoft=3M bhard=6M isoft=3 ihard=6 tom' /boot edquota\u7ba1\u7406\u7cfb\u7edf\u7684\u78c1\u76d8\u914d\u989d</p> <p>\u88686-6 edquota\u547d\u4ee4\u4e2d\u53ef\u7528\u7684\u53c2\u6570\u4ee5\u53ca\u4f5c\u7528</p> <p>\u53c2\u6570  \u4f5c\u7528 -u  \u5bf9\u67d0\u4e2a\u7528\u6237\u8fdb\u884c\u8bbe\u7f6e -g  \u5bf9\u67d0\u4e2a\u7528\u6237\u7ec4\u8fdb\u884c\u8bbe\u7f6e -p  \u590d\u5236\u539f\u6709\u7684\u89c4\u5219\u5230\u65b0\u7684\u7528\u6237/\u7ec4 -t  \u9650\u5236\u5bbd\u9650\u671f\u9650</p>"},{"location":"Linux/linux/#_10","title":"\u8f6f\u786c\u94fe\u63a5","text":"<p>\u88686-8 ln\u547d\u4ee4\u4e2d\u53ef\u7528\u7684\u53c2\u6570\u4ee5\u53ca\u4f5c\u7528</p> <p>\u53c2\u6570  \u4f5c\u7528 -s  \u521b\u5efa\u201c\u7b26\u53f7\u94fe\u63a5\u201d\uff08\u5982\u679c\u4e0d\u5e26-s\u53c2\u6570\uff0c\u5219\u9ed8\u8ba4\u521b\u5efa\u786c\u94fe\u63a5\uff09 -f  \u5f3a\u5236\u521b\u5efa\u6587\u4ef6\u6216\u76ee\u5f55\u7684\u94fe\u63a5 -i  \u8986\u76d6\u524d\u5148\u8be2\u95ee -v  \u663e\u793a\u521b\u5efa\u94fe\u63a5\u7684\u8fc7\u7a0b</p>"},{"location":"Linux/linux/#3raidlvm","title":"3.raid\u78c1\u76d8\u9635\u5217\u4e0elvm\u903b\u8f91\u5377\u7ba1\u7406","text":""},{"location":"Linux/linux/#raid","title":"raid","text":"<p>\u88687-3 RAID 0\u30011\u30015\u300110\u65b9\u6848\u6280\u672f\u5bf9\u6bd4</p> <p>RAID\u7ea7\u522b  \u6700\u5c11\u786c\u76d8    \u53ef\u7528\u5bb9\u91cf    \u8bfb\u5199\u6027\u80fd    \u5b89\u5168\u6027 \u7279\u70b9 0   2   n   n   \u4f4e   \u8ffd\u6c42\u6700\u5927\u5bb9\u91cf\u548c\u901f\u5ea6\uff0c\u4efb\u4f55\u4e00\u5757\u76d8\u635f\u574f\uff0c\u6570\u636e\u5168\u90e8\u5f02\u5e38\u3002 1   2   n/2 n   \u9ad8   \u8ffd\u6c42\u6700\u5927\u5b89\u5168\u6027\uff0c\u53ea\u8981\u9635\u5217\u7ec4\u4e2d\u6709\u4e00\u5757\u786c\u76d8\u53ef\u7528\uff0c\u6570\u636e\u4e0d\u53d7\u5f71\u54cd\u3002 5   3   n-1 n-1 \u4e2d   \u5728\u63a7\u5236\u6210\u672c\u7684\u524d\u63d0\u4e0b\uff0c\u8ffd\u6c42\u786c\u76d8\u7684\u6700\u5927\u5bb9\u91cf\u3001\u901f\u5ea6\u53ca\u5b89\u5168\u6027\uff0c\u5141\u8bb8\u6709\u4e00\u5757\u786c\u76d8\u5f02\u5e38\uff0c\u6570\u636e\u4e0d\u53d7\u5f71\u54cd\u3002 10  4   n/2 n/2 \u9ad8   \u7efc\u5408RAID1\u548cRAID0\u7684\u4f18\u70b9\uff0c\u8ffd\u6c42\u786c\u76d8\u7684\u901f\u5ea6\u548c\u5b89\u5168\u6027\uff0c\u5141\u8bb8\u6709\u4e00\u534a\u786c\u76d8\u5f02\u5e38\uff08\u4e0d\u53ef\u540c\u7ec4\uff09\uff0c\u6570\u636e\u4e0d\u53d7\u5f71\u54cd raid0</p> <p>\u5c06\u81f3\u5c11\u4e24\u5757\u7684\u7269\u7406\u8bbe\u5907\u901a\u8fc7\u786c\u4ef6\u6216\u8f6f\u4ef6\u7684\u65b9\u5f0f\u4e32\u8054\u5230\u4e00\u8d77\uff0c\u5c06\u6570\u636e\u4f9d\u6b21\u5199\u5165\u5230\u5404\u4e2a\u7269\u7406\u786c\u76d8\u4e2d\uff0c\u5bb9\u91cf\u5927\uff0c\u8bfb\u5199\u5feb\uff0c\u5b89\u5168\u6027\u4f4e raid1</p> <p>\u5c06\u4e24\u5757\u4ee5\u4e0a\u7684\u786c\u76d8\u8fdb\u884c\u7ed1\u5b9a\uff0c\u5728\u5199\u5165\u6570\u636e\u7684\u65f6\u5019\uff0c\u540c\u65f6\u5199\u5165\u5230\u591a\u5757\u786c\u76d8\u8bbe\u5907\u4e0a\uff08\u7c7b\u4f3c\u4e8e\u955c\u50cf/\u5907\u4efd\uff09\uff0c\u5f53\u4e00\u5757\u786c\u76d8\u53d1\u751f\u6545\u969c\uff0c\u4e00\u822c\u4f1a\u4ee5\u81ea\u52a8\u70ed\u4ea4\u6362\u7684\u65b9\u5f0f\u56de\u590d\u6570\u636e\u7684\u4f7f\u7528\u3002\u7a7a\u95f4\u4f7f\u7528\u7387\u4f4e\uff0c\u6570\u636e\u5b89\u5168\u6027\u9ad8\uff0c\u8bfb\u5199\u901f\u5ea6\u8f83raid0\u7a0d\u4f4e raid5</p> <p>raid5\u662f\u628a\u786c\u76d8\u8bbe\u5907\u7684\u6570\u636e\u7684\u5947\u5076\u6821\u9a8c\u4fe1\u606f\u4fdd\u5b58\u5230\u5176\u4ed6\u6bcf\u4e00\u5757\u786c\u76d8\u4e0a\uff0c\u800c\u4e0d\u662f\u5907\u4efd\u771f\u5b9e\u7684\u6570\u636e\u4fe1\u606f\uff0c\u5f53\u53d1\u751f\u6545\u969c\u65f6\uff0c\u901a\u8fc7\u5947\u5076\u6821\u9a8c\u4fe1\u606f\u5c1d\u8bd5\u91cd\u5efa\u635f\u574f\u7684\u6570\u636e\uff0c\u517c\u987e\u901f\u5ea6\u3001\u5b89\u5168\u3001\u6210\u672c\u3002 RAID 5\u6700\u5c11\u75313\u5757\u786c\u76d8\u7ec4\u6210\uff0c\u4f7f\u7528\u7684\u662f\u786c\u76d8\u5207\u5272\uff08Disk Striping\uff09\u6280\u672f\u3002\u76f8\u8f83\u4e8eRAID 1\u7ea7\u522b\uff0c\u597d\u5904\u5c31\u5728\u4e8e\u4fdd\u5b58\u7684\u662f\u5947\u5076\u6821\u9a8c\u4fe1\u606f\u800c\u4e0d\u662f\u4e00\u6a21\u4e00\u6837\u7684\u6587\u4ef6\u5185\u5bb9\uff0c\u6240\u4ee5\u5f53\u91cd\u590d\u5199\u5165\u67d0\u4e2a\u6587\u4ef6\u65f6\uff0cRAID 5\u7ea7\u522b\u7684\u78c1\u76d8\u9635\u5217\u7ec4\u53ea\u9700\u8981\u5bf9\u5e94\u4e00\u4e2a\u5947\u5076\u6821\u9a8c\u4fe1\u606f\u5c31\u53ef\u4ee5\uff0c\u6548\u7387\u66f4\u9ad8\uff0c\u5b58\u50a8\u6210\u672c\u4e5f\u4f1a\u968f\u4e4b\u964d\u4f4e\u3002 raid10</p> <p>\u7ed3\u5408\u4e86raid0 \u548craid1\u7684\u6280\u672f\uff0c\u6700\u5c11\u9700\u89814\u5757\u786c\u76d8\uff0c\u5148\u4e24\u4e24\u7ec4\u6210raid1\u9635\u5217\uff0c\u7136\u540e\u5229\u7528raid0\u6280\u672f\u5c06\u4e24\u4e2a\u9635\u5217\u7ec4\u5408\u6210raid0\u9635\u5217</p>"},{"location":"Linux/linux/#_11","title":"\u90e8\u7f72\u78c1\u76d8\u9635\u5217","text":"<p>\u88687-2 mdadm\u547d\u4ee4\u7684\u5e38\u7528\u53c2\u6570\u548c\u4f5c\u7528</p> \u53c2\u6570 \u4f5c\u7528 -a \u68c0\u6d4b\u8bbe\u5907\u540d\u79f0 -n \u6307\u5b9a\u8bbe\u5907\u6570\u91cf -l \u6307\u5b9aRAID\u7ea7\u522b -C \u521b\u5efa -v \u663e\u793a\u8fc7\u7a0b -f \u6a21\u62df\u8bbe\u5907\u635f\u574f -r \u79fb\u9664\u8bbe\u5907 -Q \u67e5\u770b\u6458\u8981\u4fe1\u606f -D \u67e5\u770b\u8be6\u7ec6\u4fe1\u606f -S \u505c\u6b62RAID\u78c1\u76d8\u9635\u5217 -x \u5907\u4efd\u76d8 <ul> <li>\u90e8\u7f72raid10 Bash<pre><code>mdadm -Cv /dev/md0 -n 4 -l 10 /dev/sdb /dev/sdc /dev/sdd /dev/sde\nmdadm -Q /dev/md0\nmdadm -D /dev/md0\nmkfs.ext4 /dev/md0\nmdadm --detail --scan &gt;&gt; /etc/mdadm.conf\nmkdir /RAID\necho \"/dev/md0 /RAID ext4 defaults 0 0\" &gt;&gt; /etc/fstab\nmount -a\n</code></pre></li> <li>\u90e8\u7f72raid5 Bash<pre><code>mdadm -Cv /dev/md0 -n 3 -l 5 -x 1 /dev/sdb /dev/sdc /dev/sdd /dev/sde\nmdadm -D /dev/md0\nmkfs.ext4 /dev/md0\nmount /dev/md0 /RAID\n</code></pre></li> </ul>"},{"location":"Linux/linux/#_12","title":"\u635f\u574f\u78c1\u76d8\u9635\u5217\u53ca\u4fee\u590d","text":"<p>*\u91cd\u542f\u540e\u9047\u5230\u8fdb\u5165emergency mode\uff0c\u8fdbfstab\u628a\u65e0\u6548\u7684\u6302\u8f7d\u5220\u6389 Bash<pre><code>mdadm /dev/md0 -f /dev/sdd (\u6a21\u62df\u786c\u76d8)\nmdadm /dev/md0 -r /dev/sdd (\u79fb\u9664\u786c\u76d8)\numount /RAID\nmdadm /dev/md0 -a /dev/sdf\nmdadm -D /dev/md0\n</code></pre></p>"},{"location":"Linux/linux/#raid_1","title":"\u89e3\u9664raid","text":"Bash<pre><code>umount /RAID\nmdadm /dev/md0 -r /dev/sd[b-e]\nmdadm -S /dev/md0\nmdadm --remove /dev/md0\nmdadm --misc --zero-superblock /dev/sd[b-e]\nrm -rf /etc/mdadm.conf\n\u5220\u9664fstab\u6302\u8f7d\u9879\n</code></pre>"},{"location":"Linux/linux/#lvm","title":"LVM\u903b\u8f91\u5377\u7ba1\u7406\u5668","text":""},{"location":"Linux/linux/#_13","title":"\u90e8\u7f72\u903b\u8f91\u5377","text":"<p>\u88687-3 \u5e38\u7528\u7684LVM\u90e8\u7f72\u547d\u4ee4</p> \u529f\u80fd/\u547d\u4ee4 \u7269\u7406\u5377\u7ba1\u7406 \u5377\u7ec4\u7ba1\u7406 \u903b\u8f91\u5377\u7ba1\u7406 \u626b\u63cf pvscan vgscan lvscan \u5efa\u7acb pvcreate vgcreate lvcreate \u663e\u793a pvdisplay vgdisplay lvdisplay \u5220\u9664 pvremove vgremove lvremove \u6269\u5c55 vgextend lvextend \u7f29\u5c0f vgreduce lvreduce Bash<pre><code>pvcreate /dev/sdf /dev/sdg\nvgcreate storage /dev/sdf /dev/sdg\nvgdisplay\nlvcreate -n vo -L 150M storage\nlvdisplay\nmkfs.ext4 /dev/storage/vo\nmkdir /gmiao\nmount /dev/storage/vo /gmiao/\necho \"/dev/storage/vo /gmiao/ ext4 defaults 0 0\" &gt;&gt; /etc/fstab\n</code></pre>"},{"location":"Linux/linux/#_14","title":"\u6269\u5bb9\u903b\u8f91\u5377","text":"Bash<pre><code>umount /gmiao\nlvextend -L 290M /dev/storage/vo\ne2fsck -f /dev/storage/vo\nresize2fs /dev/storage/vo\nmount -a\ndf -h\n</code></pre>"},{"location":"Linux/linux/#_15","title":"\u7f29\u5c0f\u903b\u8f91\u5377","text":"Bash<pre><code>umount /gmiao\ne2fsck -f /dev/storage/vo \uff08\u68c0\u67e5\u6587\u4ef6\u7cfb\u7edf\u7684\u5b8c\u6574\u6027\uff09\nresize2fs /dev/storage/vo 120M\nlvreduce -L 120M /dev/storage/vo\nmount -a\ndf -h\n</code></pre>"},{"location":"Linux/linux/#_16","title":"\u903b\u8f91\u5377\u5feb\u7167","text":"Bash<pre><code>lvcreate -L 120M -s -n snap /dev/storage/vo (-s\u53c2\u6570\u8868\u793a\u521b\u5efa\u5feb\u7167\u5377)\ndd if=/dev/zero of=/gmiao/gm count=1 bs=100M\numount /gmiao\nlvconvert --merge /dev/storage/snap\nmount -a\n</code></pre>"},{"location":"Linux/linux/#_17","title":"\u5220\u9664\u903b\u8f91\u5377","text":"Bash<pre><code>umount /gmiao\n\u5220\u9664fstab\u5173\u8054\u9879\nlvremove /dev/storage/vo\nvgremove storage\npvremove /dev/sdf /dev/sdg\n</code></pre>"},{"location":"Linux/linux/#4iptablesfirewalld","title":"4.iptables\u548cfirewalld\u9632\u706b\u5899","text":""},{"location":"Linux/linux/#iptables","title":"iptables","text":"<p>\u88688-1 iptables\u4e2d\u5e38\u7528\u7684\u53c2\u6570\u4ee5\u53ca\u4f5c\u7528</p> \u53c2\u6570 \u4f5c\u7528 -P \u8bbe\u7f6e\u9ed8\u8ba4\u7b56\u7565 -F \u6e05\u7a7a\u89c4\u5219\u94fe -L \u67e5\u770b\u89c4\u5219\u94fe -A \u5728\u89c4\u5219\u94fe\u7684\u672b\u5c3e\u52a0\u5165\u65b0\u89c4\u5219 -I num \u5728\u89c4\u5219\u94fe\u7684\u5934\u90e8\u52a0\u5165\u65b0\u89c4\u5219 -D num \u5220\u9664\u67d0\u4e00\u6761\u89c4\u5219 -s \u5339\u914d\u6765\u6e90\u5730\u5740IP/MASK\uff0c\u52a0\u53f9\u53f7\u201c!\u201d\u8868\u793a\u9664\u8fd9\u4e2aIP\u5916 -d \u5339\u914d\u76ee\u6807\u5730\u5740 -i \u7f51\u5361\u540d\u79f0 \u5339\u914d\u4ece\u8fd9\u5757\u7f51\u5361\u6d41\u5165\u7684\u6570\u636e -o \u7f51\u5361\u540d\u79f0 \u5339\u914d\u4ece\u8fd9\u5757\u7f51\u5361\u6d41\u51fa\u7684\u6570\u636e -p \u5339\u914d\u534f\u8bae\uff0c\u5982TCP\u3001UDP\u3001ICMP --dport num \u5339\u914d\u76ee\u6807\u7aef\u53e3\u53f7 --sport num \u5339\u914d\u6765\u6e90\u7aef\u53e3\u53f7 <p>\u9632\u706b\u5899\u7684\u7b56\u7565\u89c4\u5219\u662f\u6309\u7167\u4ece\u4e0a\u5230\u4e0b\u7684\u987a\u5e8f\u5339\u914d\u7684\uff0c\u6240\u4ee5\u4e00\u5b9a\u8981\u628a\u5141\u8bb8\u52a8\u4f5c\u653e\u5728\u62d2\u7edd\u52a8\u4f5c\u524d\u9762\uff0c\u5426\u5219\u6240\u6709\u7684\u6d41\u91cf\u90fd\u4f1a\u88ab\u62d2\u7edd\u3002(\u9488\u5bf9\u5355\u6761\u89c4\u5219) Bash<pre><code># \u5c06INPUT\u89c4\u5219\u94fe\u8bbe\u7f6e\u4e3a\u53ea\u5141\u8bb8\u6307\u5b9a\u7f51\u6bb5\u7684\u4e3b\u673a\u8bbf\u95ee\u672c\u673a\u768422\u7aef\u53e3\uff0c\u62d2\u7edd\u6765\u81ea\u5176\u4ed6\u6240\u6709\u4e3b\u673a\u7684\u6d41\u91cf\u3002\niptables -I INPUT -s 192.168.10.0/24 -p tcp --dport 22 -j ACCEPT\niptables -A INPUT -p tcp --dport 22 -j REJECT\n# \u5411INPUT\u89c4\u5219\u94fe\u4e2d\u6dfb\u52a0\u62d2\u7edd\u6240\u6709\u4eba\u8bbf\u95ee\u672c\u673a12345\u7aef\u53e3\u7684\u7b56\u7565\u89c4\u5219\u3002\n\niptables -I INPUT -p tcp --dport 12345 -j REJECT\niptables -I INPUT -p udp --dport 12345 -j REJECT\n# \u5411INPUT\u89c4\u5219\u94fe\u4e2d\u6dfb\u52a0\u62d2\u7edd192.168.10.5\u4e3b\u673a\u8bbf\u95ee\u672c\u673a80\u7aef\u53e3\uff08Web\u670d\u52a1\uff09\u7684\u7b56\u7565\u89c4\u5219\u3002\n\niptables -I INPUT -s 192.168.10.5 -p tcp --dport 80 -j REJECT\n# \u5411INPUT\u89c4\u5219\u94fe\u4e2d\u6dfb\u52a0\u62d2\u7edd\u6240\u6709\u4e3b\u673a\u8bbf\u95ee\u672c\u673a1000\uff5e1024\u7aef\u53e3\u7684\u7b56\u7565\u89c4\u5219\u3002\n\niptables -A INPUT -p tcp --dport 1000:1024 -j REJECT\niptables -A INPUT -p udp --dport 1000:1024 -j REJECT\niptables-save\n</code></pre></p>"},{"location":"Linux/linux/#firewalld","title":"firewalld","text":"<p>\u88688-2 firewalld\u4e2d\u5e38\u7528\u7684\u533a\u57df\u540d\u79f0\u53ca\u7b56\u7565\u89c4\u5219</p> \u533a\u57df \u9ed8\u8ba4\u89c4\u5219\u7b56\u7565 trusted \u5141\u8bb8\u6240\u6709\u7684\u6570\u636e\u5305 home \u62d2\u7edd\u6d41\u5165\u7684\u6d41\u91cf\uff0c\u9664\u975e\u4e0e\u6d41\u51fa\u7684\u6d41\u91cf\u76f8\u5173\uff1b\u800c\u5982\u679c\u6d41\u91cf\u4e0essh\u3001mdns\u3001ipp-client\u3001amba-client\u4e0edhcpv6-client\u670d\u52a1\u76f8\u5173\uff0c\u5219\u5141\u8bb8\u6d41\u91cf internal \u7b49\u540c\u4e8ehome\u533a\u57df work \u62d2\u7edd\u6d41\u5165\u7684\u6d41\u91cf\uff0c\u9664\u975e\u4e0e\u6d41\u51fa\u7684\u6d41\u91cf\u76f8\u5173\uff1b\u800c\u5982\u679c\u6d41\u91cf\u4e0essh\u3001ipp-client\u4e0edhcpv6-client\u670d\u52a1\u76f8\u5173\uff0c\u5219\u5141\u8bb8\u6d41\u91cf public \u62d2\u7edd\u6d41\u5165\u7684\u6d41\u91cf\uff0c\u9664\u975e\u4e0e\u6d41\u51fa\u7684\u6d41\u91cf\u76f8\u5173\uff1b\u800c\u5982\u679c\u6d41\u91cf\u4e0essh\u3001dhcpv6-client\u670d\u52a1\u76f8\u5173\uff0c\u5219\u5141\u8bb8\u6d41\u91cf external \u62d2\u7edd\u6d41\u5165\u7684\u6d41\u91cf\uff0c\u9664\u975e\u4e0e\u6d41\u51fa\u7684\u6d41\u91cf\u76f8\u5173\uff1b\u800c\u5982\u679c\u6d41\u91cf\u4e0essh\u670d\u52a1\u76f8\u5173\uff0c\u5219\u5141\u8bb8\u6d41\u91cf dmz \u62d2\u7edd\u6d41\u5165\u7684\u6d41\u91cf\uff0c\u9664\u975e\u4e0e\u6d41\u51fa\u7684\u6d41\u91cf\u76f8\u5173\uff1b\u800c\u5982\u679c\u6d41\u91cf\u4e0essh\u670d\u52a1\u76f8\u5173\uff0c\u5219\u5141\u8bb8\u6d41\u91cf block \u62d2\u7edd\u6d41\u5165\u7684\u6d41\u91cf\uff0c\u9664\u975e\u4e0e\u6d41\u51fa\u7684\u6d41\u91cf\u76f8\u5173 drop \u62d2\u7edd\u6d41\u5165\u7684\u6d41\u91cf\uff0c\u9664\u975e\u4e0e\u6d41\u51fa\u7684\u6d41\u91cf\u76f8\u5173 - \u7ec8\u7aef\u7ba1\u7406\u5de5\u5177 <ul> <li>\u88688-3 firewall-cmd\u547d\u4ee4\u4e2d\u4f7f\u7528\u7684\u53c2\u6570\u4ee5\u53ca\u4f5c\u7528</li> </ul> \u53c2\u6570 \u4f5c\u7528 --get-default-zone \u67e5\u8be2\u9ed8\u8ba4\u7684\u533a\u57df\u540d\u79f0 --set-default-zone=&lt;\u533a\u57df\u540d\u79f0&gt; \u8bbe\u7f6e\u9ed8\u8ba4\u7684\u533a\u57df\uff0c\u4f7f\u5176\u6c38\u4e45\u751f\u6548 --get-zones \u663e\u793a\u53ef\u7528\u7684\u533a\u57df --get-services \u663e\u793a\u9884\u5148\u5b9a\u4e49\u7684\u670d\u52a1 --get-active-zones \u663e\u793a\u5f53\u524d\u6b63\u5728\u4f7f\u7528\u7684\u533a\u57df\u4e0e\u7f51\u5361\u540d\u79f0 --add-source= \u5c06\u6e90\u81ea\u6b64IP\u6216\u5b50\u7f51\u7684\u6d41\u91cf\u5bfc\u5411\u6307\u5b9a\u7684\u533a\u57df --remove-source= \u4e0d\u518d\u5c06\u6e90\u81ea\u6b64IP\u6216\u5b50\u7f51\u7684\u6d41\u91cf\u5bfc\u5411\u67d0\u4e2a\u6307\u5b9a\u533a\u57df --add-interface=&lt;\u7f51\u5361\u540d\u79f0&gt; \u5c06\u6e90\u81ea\u8be5\u7f51\u5361\u7684\u6240\u6709\u6d41\u91cf\u90fd\u5bfc\u5411\u67d0\u4e2a\u6307\u5b9a\u533a\u57df --change-interface=&lt;\u7f51\u5361\u540d\u79f0&gt; \u5c06\u67d0\u4e2a\u7f51\u5361\u4e0e\u533a\u57df\u8fdb\u884c\u5173\u8054 --list-all \u663e\u793a\u5f53\u524d\u533a\u57df\u7684\u7f51\u5361\u914d\u7f6e\u53c2\u6570\u3001\u8d44\u6e90\u3001\u7aef\u53e3\u4ee5\u53ca\u670d\u52a1\u7b49\u4fe1\u606f --list-all-zones \u663e\u793a\u6240\u6709\u533a\u57df\u7684\u7f51\u5361\u914d\u7f6e\u53c2\u6570\u3001\u8d44\u6e90\u3001\u7aef\u53e3\u4ee5\u53ca\u670d\u52a1\u7b49\u4fe1\u606f --add-service=&lt;\u670d\u52a1\u540d&gt; \u8bbe\u7f6e\u9ed8\u8ba4\u533a\u57df\u5141\u8bb8\u8be5\u670d\u52a1\u7684\u6d41\u91cf --add-port=&lt;\u7aef\u53e3\u53f7/\u534f\u8bae&gt; \u8bbe\u7f6e\u9ed8\u8ba4\u533a\u57df\u5141\u8bb8\u8be5\u7aef\u53e3\u7684\u6d41\u91cf --remove-service=&lt;\u670d\u52a1\u540d&gt; \u8bbe\u7f6e\u9ed8\u8ba4\u533a\u57df\u4e0d\u518d\u5141\u8bb8\u8be5\u670d\u52a1\u7684\u6d41\u91cf --remove-port=&lt;\u7aef\u53e3\u53f7/\u534f\u8bae&gt; \u8bbe\u7f6e\u9ed8\u8ba4\u533a\u57df\u4e0d\u518d\u5141\u8bb8\u8be5\u7aef\u53e3\u7684\u6d41\u91cf --reload \u8ba9\u201c\u6c38\u4e45\u751f\u6548\u201d\u7684\u914d\u7f6e\u89c4\u5219\u7acb\u5373\u751f\u6548\uff0c\u5e76\u8986\u76d6\u5f53\u524d\u7684\u914d\u7f6e\u89c4\u5219 --panic-on \u5f00\u542f\u5e94\u6025\u72b6\u51b5\u6a21\u5f0f --panic-off \u5173\u95ed\u5e94\u6025\u72b6\u51b5\u6a21\u5f0f <ul> <li>\u67e5\u770bfirewalld\u670d\u52a1\u5f53\u524d\u6240\u4f7f\u7528\u7684\u533a\u57df\u3002 Bash<pre><code>firewall-cmd --get-default-zone\n\u67e5\u8be2\u6307\u5b9a\u7f51\u5361\u5728firewalld\u670d\u52a1\u4e2d\u7ed1\u5b9a\u7684\u533a\u57df\n\nfirewall-cmd --get-zone-of-interface=ens33\n\u628a\u7f51\u5361\u9ed8\u8ba4\u533a\u57df\u4fee\u6539\u4e3aexternal\uff0c\u5e76\u5728\u7cfb\u7edf\u91cd\u542f\u540e\u751f\u6548\n\nfirewall-cmd --permanent --zone=external --change-interface=ens33\nfirewall-cmd --get-zone-of-interface=ens33 --permanent\n\u542f\u52a8\u548c\u5173\u95edfirewalld\u9632\u706b\u5899\u670d\u52a1\u7684\u5e94\u6025\u72b6\u51b5\u6a21\u5f0f\u3002\n\nfirewall-cmd --panic-on\nfirewall-cmd --panic-off\n\u67e5\u8be2SSH\u548cHTTPS\u534f\u8bae\u7684\u6d41\u91cf\u662f\u5426\u5141\u8bb8\u653e\u884c\u3002\n\n[root@192 ~]# firewall-cmd --zone=public --query-service=ssh\nyes\n[root@192 ~]# firewall-cmd --zone=public --query-service=https\nno\n\u628aHTTPS\u534f\u8bae\u7684\u6d41\u91cf\u8bbe\u7f6e\u4e3a\u6c38\u4e45\u5141\u8bb8\u653e\u884c\uff0c\u5e76\u7acb\u5373\u751f\u6548\n\n[root@192 ~]# firewall-cmd --permanent --zone=public --add-service=https\nsuccess\n[root@192 ~]# firewall-cmd --zone=public --query-service=https\nno\n[root@192 ~]# firewall-cmd --reload \nsuccess\n[root@192 ~]# firewall-cmd --zone=public --query-service=https\nyes\n\u628aHTTP\u534f\u8bae\u7684\u6d41\u91cf\u8bbe\u7f6e\u4e3a\u6c38\u4e45\u62d2\u7edd\uff0c\u5e76\u7acb\u5373\u751f\u6548\n\n[root@192 ~]# firewall-cmd --permanent --zone=public --remove-service=http\nWarning: NOT_ENABLED: http\nsuccess\n[root@192 ~]# firewall-cmd --zone=public --query-service=http\nno\n[root@192 ~]# firewall-cmd --reload \nsuccess\n[root@192 ~]# firewall-cmd --zone=public --query-service=http\nno\n\n\u628a\u8bbf\u95ee8080\u548c8081\u7aef\u53e3\u7684\u6d41\u91cf\u7b56\u7565\u8bbe\u7f6e\u4e3a\u5141\u8bb8\uff0c\u4f46\u4ec5\u9650\u5f53\u524d\u751f\u6548\n\n[root@192 ~]# firewall-cmd --zone=public --add-port=8080-8081/tcp\nsuccess\n[root@192 ~]# firewall-cmd --zone=public --query-port=8080-8081\nError: INVALID_PORT: bad port (most likely missing protocol), correct syntax is portid[-portid]/protocol\n[root@192 ~]# firewall-cmd --zone=public --query-port=8080\nError: INVALID_PORT: bad port (most likely missing protocol), correct syntax is portid[-portid]/protocol\n[root@192 ~]# firewall-cmd --zone=public --query-port=8080/tcp\nyes\n[root@192 ~]# firewall-cmd --zone=public --query-port=8080-8081/tcp\nyes\n\u628a\u539f\u672c\u8bbf\u95ee\u672c\u673a888\u7aef\u53e3\u7684\u6d41\u91cf\u8f6c\u53d1\u523022\u7aef\u53e3\uff0c\u8981\u4e14\u6c42\u5f53\u524d\u548c\u957f\u671f\u5747\u6709\u6548\n\n[root@192 ~]# firewall-cmd --permanent --zone=public --add-forward-port=port=888:proto=tcp:toport=22:toaddr=192.168.10.10\nsuccess\n[root@192 ~]# firewall-cmd --reload \nsuccess\n\u5bcc\u89c4\u5219\u7684\u8bbe\u7f6e\n\n[root@192 ~]# man firewall-cmd\nman firewalld.richlanguage\n[--permanent] [--zone=zone] --add-rich-rule='rule family=\"ipv6\" source address=\"1:2:3:4:6::\" service name=\"radius\" log prefix=\"dns\" level=\"info\" limit value=\"3/m\" reject'\n\n[root@linuxprobe ~]# firewall-cmd --permanent --zone=public --add-rich-rule=\"rule family=\"ipv4\" source address=\"192.168.10.0/24\" service name=\"ssh\" reject\"\nsuccess\n[root@linuxprobe ~]# firewall-cmd --reload\nsuccess\n</code></pre></li> </ul>"},{"location":"Linux/linux/#_18","title":"\u56fe\u5f62\u7ba1\u7406\u5de5\u5177","text":"<p>firewall-config</p>"},{"location":"Linux/linux/#_19","title":"\u670d\u52a1\u7684\u8bbf\u95ee\u63a7\u5236\u5217\u8868","text":"Bash<pre><code>root@192 ~]# vim /etc/hosts.deny\nsshd:*\n[root@192 ~]# vim /etc/hosts.allow\nsshd:192.168.10.\n</code></pre>"},{"location":"Linux/linux/#cockpit","title":"Cockpit\u9a7e\u9a76\u8231\u7ba1\u7406\u5de5\u5177","text":"Text Only<pre><code>\u603b\u5171\u5206\u4e3a\u5341\u4e09\u4e2a\u529f\u80fd\u6a21\u5757\uff0c\u5373\uff1a\u7cfb\u7edf\u72b6\u6001\u3001\u65e5\u5fd7\u4fe1\u606f\u3001\u786c\u76d8\u5b58\u50a8\u3001\u7f51\u5361\u7f51\u7edc\u3001\u8d26\u6237\u5b89\u5168\u3001\u670d\u52a1\u7a0b\u5e8f\u3001\u8f6f\u4ef6\u4ed3\u5e93\u3001\u62a5\u544a\u5206\u6790\u3001\u5185\u6838\u6392\u9519\u3001SElinux\u3001\u66f4\u65b0\u8f6f\u4ef6\u3001\u8ba2\u9605\u670d\u52a1\u3001\u7ec8\u7aef\u754c\u9762\u3002\n\nSystem\n\n\u7c7b\u4f3cweb\u7248\u7684\u4efb\u52a1\u7ba1\u7406\u5668\nLogs\n\n\u53ef\u6839\u636e\u65f6\u95f4\u548c\u65e5\u5fd7\u7ea7\u522b\u67e5\u8be2\u65e5\u5fd7\nStorage\n\n\u53ef\u4ee5\u7b80\u5355\u7684\u521b\u5efaRAIDD\u3001LVM\u3001VDO\u3001iSCSI\u7b49\u5b58\u50a8\u8bbe\u5907\nNetworking\n\n\u52a8\u6001\u67e5\u770b\u7f51\u5361\u7684\u8f93\u51fa\u548c\u63a5\u53d7\u503c\uff0c\u8fd8\u53ef\u8fdb\u884c\u7f51\u5361\u7684\u7ed1\u5b9a\u3001\u805a\u5408\u3001\u521b\u5efa\u6865\u63a5\u7f51\u5361\u3001\u6dfb\u52a0vlan\uff0c\u5217\u51fa\u7f51\u5361\u76f8\u5173\u7684\u65e5\u5fd7\u4fe1\u606f\nAccounts\n\n\u53ef\u4ee5\u5bf9\u7528\u6237\u8fdb\u884c\u7ba1\u7406\nServices\n\n\u53ef\u67e5\u770b\u670d\u52a1\u5e76\u8fdb\u884c\u7ba1\u7406\uff08\u5305\u62ec\u505c\u6b62\u542f\u52a8\u7b49\uff09\uff0c\u70b9\u51fb\u5355\u4e2a\u670d\u52a1\uff0c\u4e0b\u9762\u8fd8\u6709\u76f8\u5173\u7684\u65e5\u5fd7\u4fe1\u606f\nApplications\n\n\u8f6f\u4ef6\u4ed3\u5e93\nDiagnostic Report\n\nsosreport\nKernel Dump\n\n\u5185\u6838\u6392\u9519\nSElinux\n\nTerminal\uff08\u8fd0\u7ef4\u5e38\u7528\uff09\n</code></pre>"},{"location":"Linux/linux/#5ssh","title":"5.\u4f7f\u7528ssh\u670d\u52a1\u7ba1\u7406\u8fdc\u7a0b\u4e3b\u673a","text":""},{"location":"Linux/linux/#_20","title":"\u914d\u7f6e\u7f51\u5361\u670d\u52a1","text":"<ul> <li>\u914d\u7f6e\u7f51\u5361\u53c2\u6570</li> </ul> Bash<pre><code>nmtui\n\nONBOOT=yes\uff08\u91cd\u542f\u540e\u7f51\u5361\u6fc0\u6d3b\uff09\nnmcli connection reload ens33\nnmcli connection up ens33\n</code></pre> <ul> <li>\u521b\u5efa\u7f51\u7edc\u4f1a\u8bdd\uff08\u5b9e\u73b0\u4e0d\u7528\u9891\u7e41\u7684\u66f4\u6539ip\uff09</li> <li> Text Only<pre><code>```bash\n[root@192 ~]# nmcli connection add con-name company ifname ens33 autoconnect no type ethernet ip4 192.168.10.10/24 gw4 192.168.10.2\n[root@192 ~]# nmcli connection show\n[root@192 ~]# nmcli connection up company (\u5f00\u542f\u4f1a\u8bdd\uff0c\u8868\u793a\u5f53\u524d\u53ef\u7528\u7684\u662f\u8fd9\u4e2a\u4f1a\u8bdd=\u8fde\u63a5)\n[root@192 ~]# nmcli connection delete company \uff08\u5220\u9664\u4e0d\u7528\u7684\u4f1a\u8bdd\uff09\n```\n</code></pre> </li> <li> <p>\u7ed1\u5b9a\u4e24\u5757\u7f51\u5361</p> </li> <li> <p>round-robin(\u8f6e\u5faa\u6a21\u5f0f)</p> <ul> <li> <p>\u6839\u636e\u8bbe\u5907\u7684\u987a\u5e8f\u4f9d\u6b21\u4f20\u8f93\u6570\u636e\u5305\uff0c\u4e00\u53f0\u7f51\u5361\u53d1\u751f\u6545\u969c\uff0c\u4f1a\u5207\u6362\u5230\u53e6\u4e00\u53f0\u4e0a\uff0c\u7f51\u7edc\u4e0d\u4f1a\u65ad       Bash<pre><code>### \u521b\u5efa\u4e00\u4e2abond\u7f51\u5361\n[root@192 ~]# nmcli connection add type bond con-name bond0 ifname bond0 bond.options \"mode=balance-rr\"\nConnection 'bond0' (2525bc21-b229-4a94-b2a9-d2d4f47bfba1) successfully added\n#### \u5411bond0\u4e2d\u6dfb\u52a0\u4ece\u5c5e\u7f51\u5361\n\n[root@192 ~]# nmcli connection add type ethernet slave-type bond con-name bond0-port1 ifname ens33 master bond0\n\n\n[root@192 ~]# nmcli connection add type ethernet slave-type bond con-name bond0-port2 ifname ens37 master bond0\n\n\n[root@192 ~]# nmcli connection up bond0\n</code></pre></p> </li> <li> <p>\u63d0\u4f9b\u8d1f\u8f7d\u5747\u8861\u7684\u6548\u679c\uff0c\u5e26\u5bbd\u7684\u6027\u80fd\u66f4\u597d</p> </li> </ul> </li> </ul> <p>active-backup(\u4e3b\u5907\u6a21\u5f0f)</p> <p>\u4e00\u53f0\u7f51\u5361\u53d1\u751f\u635f\u574f\uff0c\u53e6\u4e00\u4e2a\u4f1a\u81ea\u52a8\u9876\u4e0a\uff0c\u5197\u4f59\u80fd\u529b\u8f83\u5f3a</p>"},{"location":"Linux/linux/#_21","title":"\u8fdc\u7a0b\u63a7\u5236\u670d\u52a1","text":"<ul> <li>\u914d\u7f6esshd\u670d\u52a1,\u7f16\u8f91\uff08/etc/ssh/sshd_config\uff09\u6587\u4ef6</li> <li>sshd\u63d0\u4f9b\u4e24\u79cd\u5b89\u5168\u9a8c\u8bc1\u7684\u65b9\u5f0f\uff08\u57fa\u4e8e\u5bc6\u7801\u7684\u9a8c\u8bc1\uff0c\u57fa\u4e8e\u5bc6\u94a5\u7684\u9a8c\u8bc1\uff09</li> </ul> <p>\u57fa\u4e8e\u5bc6\u7801\u7684\u9a8c\u8bc1\u2014\u7528\u8d26\u6237\u548c\u5bc6\u7801\u6765\u9a8c\u8bc1\u767b\u5f55\uff1b \u57fa\u4e8e\u5bc6\u94a5\u7684\u9a8c\u8bc1\u2014\u9700\u8981\u5728\u672c\u5730\u751f\u6210\u5bc6\u94a5\u5bf9\uff0c\u7136\u540e\u628a\u5bc6\u94a5\u5bf9\u4e2d\u7684\u516c\u94a5\u4e0a\u4f20\u81f3\u670d\u52a1\u5668\uff0c\u5e76\u4e0e\u670d\u52a1\u5668\u4e2d\u7684\u516c\u94a5\u8fdb\u884c\u6bd4\u8f83\uff1b\u8be5\u65b9\u5f0f\u76f8\u8f83\u6765\u8bf4\u66f4\u5b89\u5168\u3002</p> <ul> <li>\u88689-1 sshd\u670d\u52a1\u914d\u7f6e\u6587\u4ef6\uff08/etc/ssh/sshd_config\uff09\u4e2d\u5305\u542b\u7684\u53c2\u6570\u4ee5\u53ca\u4f5c\u7528</li> </ul> \u53c2\u6570 \u4f5c\u7528 Port 22 \u9ed8\u8ba4\u7684sshd\u670d\u52a1\u7aef\u53e3 ListenAddress 0.0.0.0 \u8bbe\u5b9asshd\u670d\u52a1\u5668\u76d1\u542c\u7684IP\u5730\u5740 Protocol 2 SSH\u534f\u8bae\u7684\u7248\u672c\u53f7 HostKey /tc/ssh/ssh_host_key SSH\u534f\u8bae\u7248\u672c\u4e3a1\u65f6\uff0cDES\u79c1\u94a5\u5b58\u653e\u7684\u4f4d\u7f6e HostKey /etc/ssh/ssh_host_rsa_key SSH\u534f\u8bae\u7248\u672c\u4e3a2\u65f6\uff0cRSA\u79c1\u94a5\u5b58\u653e\u7684\u4f4d\u7f6e HostKey /etc/ssh/ssh_host_dsa_key SSH\u534f\u8bae\u7248\u672c\u4e3a2\u65f6\uff0cDSA\u79c1\u94a5\u5b58\u653e\u7684\u4f4d\u7f6e PermitRootLogin yes \u8bbe\u5b9a\u662f\u5426\u5141\u8bb8root\u7ba1\u7406\u5458\u76f4\u63a5\u767b\u5f55 StrictModes yes \u5f53\u8fdc\u7a0b\u7528\u6237\u7684\u79c1\u94a5\u6539\u53d8\u65f6\u76f4\u63a5\u62d2\u7edd\u8fde\u63a5 MaxAuthTries 6 \u6700\u5927\u5bc6\u7801\u5c1d\u8bd5\u6b21\u6570 MaxSessions 10 \u6700\u5927\u7ec8\u7aef\u6570 PasswordAuthentication yes \u662f\u5426\u5141\u8bb8\u5bc6\u7801\u9a8c\u8bc1 PermitEmptyPasswords no \u662f\u5426\u5141\u8bb8\u7a7a\u5bc6\u7801\u767b\u5f55\uff08\u5f88\u4e0d\u5b89\u5168\uff09"},{"location":"Linux/linux/#_22","title":"\u5b89\u5168\u5bc6\u94a5\u9a8c\u8bc1","text":"Bash<pre><code>#\u5728\u5ba2\u6237\u7aef\u4e3b\u673a\u4e2d\u751f\u6210\u5bc6\u94a5\u5bf9\nssh-keygen\n#\u5c06\u5ba2\u6237\u7aef\u4e2d\u751f\u6210\u7684\u516c\u94a5\u6587\u4ef6\u53d1\u9001\u5230\u670d\u52a1\u5668\n\nssh-copy-id root@192.168.10.10\nssh root@192.168.10.10\nPasswordAuthentication no (\u7981\u6b62\u5bc6\u7801\u767b\u5f55)\n[root@server ~]# systemctl restart sshd\n#windows\u5c06\u516c\u94a5\u590d\u5236\u5230Linux\uff0c\u5c06\u6587\u4ef6\u5185\u5bb9\u8ffd\u52a0\u5230.ssh/authorized_keys\u6587\u4ef6\u4e2d\uff0c\u91cd\u542fsshd\u670d\u52a1\uff0c\u5c31\u53ef\u4ee5\u5b9e\u73b0\u5bc6\u94a5\u8fdc\u7a0b\u8fde\u63a5\n</code></pre> <ul> <li>\u8fdc\u7a0b\u4f20\u8f93\u547d\u4ee4</li> <li>\u88689-3 scp\u547d\u4ee4\u4e2d\u53ef\u7528\u7684\u53c2\u6570\u53ca\u4f5c\u7528</li> </ul> \u53c2\u6570 \u4f5c\u7528 -v \u663e\u793a\u8be6\u7ec6\u7684\u8fde\u63a5\u8fdb\u5ea6 -P \u6307\u5b9a\u8fdc\u7a0b\u4e3b\u673a\u7684sshd\u7aef\u53e3\u53f7 -r \u7528\u4e8e\u4f20\u9001\u6587\u4ef6\u5939 -6 \u4f7f\u7528IPv6\u534f\u8bae"},{"location":"Linux/linux/#_23","title":"\u4e0d\u95f4\u65ad\u4f1a\u8bdd\u670d\u52a1","text":"<ul> <li> <p>Tmux\u7ba1\u7406\u8fdc\u7a0b\u4f1a\u8bdd Bash<pre><code>[root@server ~]# tmux\n[exited]\n[root@server ~]# tmux new -s backup  \uff08\u65b0\u5efa\u4f1a\u8bdd\uff09\n[detached]\n[root@server ~]# tmux ls   \uff08\u67e5\u770b\u6709\u54ea\u4e9b\u540e\u53f0\u4f1a\u8bdd\uff09\nbackup: 1 windows (created Mon Sep 26 16:13:21 2022) [60x19]\n\n\n[root@server ~]# tmux attach -t backup  \uff08\u8fd4\u56dei\u4f1a\u8bdd\uff09\n[exited]\n[root@server ~]# tmux ls\nfailed to connect to server\n[root@server ~]# tmux new \"vim yma.a\"    \uff08\u76f4\u63a5\u6267\u884c\u547d\u4ee4\uff0c\u5b8c\u6210\u4e4b\u540e\u63a8\u51fa\u4f1a\u8bdd\uff09\n[exited]\n</code></pre></p> </li> <li> <p>\u7ba1\u7406\u591a\u7a97\u683c</p> </li> <li>Tmux\u670d\u52a1\u4e3a\u7528\u6237\u63d0\u4f9b\u4e86\u4e00\u7cfb\u5217\u5feb\u6377\u952e\u6765\u6267\u884c\u7a97\u683c\u7684\u5207\u6362\u3002\u65b9\u6cd5\u662f\u5148\u540c\u65f6\u6309\u4e0bCtrl+B\u7ec4\u5408\u952e\uff0c\u7136\u540e\u677e\u624b\u540e\u518d\u8fc5\u901f\u6309\u4e0b\u5176\u4ed6\u540e\u7eed\u6309\u952e\uff0c\u800c\u4e0d\u662f\u4e00\u8d77\u6309\u4e0b\u3002</li> <li>\u88689-5 Tmux\u4f1a\u8bdd\u7a97\u683c\u76f8\u5173\u7684\u5e38\u7528\u5feb\u6377\u952e</li> </ul> \u5feb\u6377\u952e \u4f5c\u7528 % \u5212\u5206\u5de6\u53f3\u4e24\u4e2a\u7a97\u683c \" \u5212\u5206\u4e0a\u4e0b\u4e24\u4e2a\u7a97\u683c &lt;\u65b9\u5411\u952e&gt; \u5207\u6362\u5230\u4e0a\u4e0b\u5de6\u53f3\u76f8\u90bb\u7684\u4e00\u4e2a\u7a97\u683c ; \u5207\u6362\u81f3\u4e0a\u4e00\u4e2a\u7a97\u683c o \u5207\u6362\u81f3\u4e0b\u4e00\u4e2a\u7a97\u683c { \u5c06\u5f53\u524d\u7a97\u683c\u4e0e\u4e0a\u4e00\u4e2a\u7a97\u683c\u4f4d\u7f6e\u4e92\u6362 } \u5c06\u5f53\u524d\u7a97\u683c\u4e0e\u4e0b\u4e00\u4e2a\u7a97\u683c\u4f4d\u7f6e\u4e92\u6362 x \u5173\u95ed\u7a97\u683c ! \u5c06\u5f53\u524d\u7a97\u683c\u62c6\u5206\u6210\u72ec\u7acb\u7a97\u53e3 q \u663e\u793a\u7a97\u683c\u7f16\u53f7 \u4f1a\u8bdd\u5171\u4eab <p>tmux new -s share tmux attach-session -t share</p>"},{"location":"Linux/linux/#_24","title":"\u68c0\u7d22\u65e5\u5fd7\u4fe1\u606f","text":"<ul> <li> <p>\u5728RHEL 8\u7cfb\u7edf\u4e2d\uff0c\u9ed8\u8ba4\u7684\u65e5\u5fd7\u670d\u52a1\u7a0b\u5e8f\u662frsyslog</p> </li> <li> <p>\u88689-7 \u5e38\u89c1\u7684\u65e5\u5fd7\u6587\u4ef6\u4fdd\u5b58\u8def\u5f84</p> </li> </ul> \u6587\u4ef6\u8def\u5f84\u53ca\u547d\u4ee4 \u4f5c\u7528 /var/log/boot.log \u7cfb\u7edf\u5f00\u673a\u81ea\u68c0\u4e8b\u4ef6\u53ca\u5f15\u5bfc\u8fc7\u7a0b\u7b49\u4fe1\u606f /var/log/lastlog \u7528\u6237\u767b\u5f55\u6210\u529f\u65f6\u95f4\u3001\u7ec8\u7aef\u540d\u79f0\u53caIP\u5730\u5740\u7b49\u4fe1\u606f /var/log/btmp \u8bb0\u5f55\u767b\u5f55\u5931\u8d25\u7684\u65f6\u95f4\u3001\u7ec8\u7aef\u540d\u79f0\u53caIP\u5730\u5740\u7b49\u4fe1\u606f /var/log/messages \u7cfb\u7edf\u53ca\u5404\u4e2a\u670d\u52a1\u7684\u8fd0\u884c\u548c\u62a5\u9519\u4fe1\u606f /var/log/secure \u7cfb\u7edf\u5b89\u5168\u76f8\u5173\u7684\u4fe1\u606f /var/log/wtmp \u7cfb\u7edf\u542f\u52a8\u4e0e\u5173\u673a\u7b49\u76f8\u5173\u4fe1\u606f - \u4ece\u7406\u8bba\u4e0a\u8bb2\uff0c\u65e5\u5fd7\u6587\u4ef6\u5206\u4e3a\u4e0b\u97623\u79cd\u7c7b\u578b\u3002\u5728\u65e5\u5e38\u5de5\u4f5c\u4e2d\uff0c/var/log/message\u8fd9\u4e2a\u7efc\u5408\u6027\u7684\u6587\u4ef6\u7528\u5f97\u6700\u591a <p>\u7cfb\u7edf\u65e5\u5fd7\uff1a\u4e3b\u8981\u8bb0\u5f55\u7cfb\u7edf\u7684\u8fd0\u884c\u60c5\u51b5\u548c\u5185\u6838\u4fe1\u606f\u3002 \u7528\u6237\u65e5\u5fd7\uff1a\u4e3b\u8981\u8bb0\u5f55\u7528\u6237\u7684\u8bbf\u95ee\u4fe1\u606f\uff0c\u5305\u542b\u7528\u6237\u540d\u3001\u7ec8\u7aef\u540d\u79f0\u3001\u767b\u5165\u53ca\u9000\u51fa\u65f6\u95f4\u3001\u6765\u6e90IP\u5730\u5740\u548c\u6267\u884c\u8fc7\u7684\u64cd\u4f5c\u7b49\u3002 \u7a0b\u5e8f\u65e5\u5fd7\uff1a\u7a0d\u5fae\u5927\u4e00\u4e9b\u7684\u670d\u52a1\u4e00\u822c\u90fd\u4f1a\u4fdd\u5b58\u4e00\u4efd\u4e0e\u5176\u540c\u540d\u7684\u65e5\u5fd7\u6587\u4ef6\uff0c\u91cc\u9762\u8bb0\u5f55\u7740\u670d\u52a1\u8fd0\u884c\u8fc7\u7a0b\u4e2d\u5404\u79cd\u4e8b\u4ef6\u7684\u4fe1\u606f\uff1b\u6bcf\u4e2a\u670d\u52a1\u7a0b\u5e8f\u90fd\u6709\u81ea\u5df1\u72ec\u7acb\u7684\u65e5\u5fd7\u6587\u4ef6\uff0c\u4e14\u683c\u5f0f\u76f8\u5dee\u8f83\u5927\u3002</p> <ul> <li> <p>journalctl\u5b83\u53ef\u4ee5\u6839\u636e\u4e8b\u4ef6\u3001\u7c7b\u578b\u3001\u670d\u52a1\u540d\u79f0\u7b49\u4fe1\u606f\u8fdb\u884c\u4fe1\u606f\u68c0\u7d22\uff0c\u4ece\u800c\u5927\u5927\u63d0\u9ad8\u4e86\u65e5\u5e38\u6392\u9519\u7684\u6548\u7387\u3002</p> </li> <li> <p>\u88689-7 journalctl\u547d\u4ee4\u4e2d\u5e38\u7528\u6309\u952e\u4ee5\u53ca\u4f5c\u7528</p> </li> </ul> \u53c2\u6570 \u4f5c\u7528 -k \u5185\u6838\u65e5\u5fd7 -b \u542f\u52a8\u65e5\u5fd7 -u \u6307\u5b9a\u670d\u52a1 -n \u6307\u5b9a\u6761\u6570 -p \u6307\u5b9a\u7c7b\u578b -f \u5b9e\u65f6\u5237\u65b0\uff08\u8ffd\u8e2a\u65e5\u5fd7\uff09 --since \u6307\u5b9a\u65f6\u95f4 --disk-usage \u5360\u7528\u7a7a\u95f4 <ul> <li>\u88689-9 \u65e5\u5fd7\u4fe1\u606f\u767b\u8bb0\u5206\u7c7b</li> </ul> \u65e5\u5fd7\u7b49\u7ea7 \u8bf4\u660e\u4ecb\u7ecd emerg \u7cfb\u7edf\u51fa\u73b0\u4e25\u91cd\u6545\u969c\uff0c\u5185\u6838\u5d29\u6e83\u7b49\u60c5\u51b5 alert \u5e94\u7acb\u5373\u4fee\u590d\u7684\u6545\u969c\uff0c\u6570\u636e\u5e93\u635f\u574f\u7b49\u60c5\u51b5 crit \u5371\u9669\u8f83\u9ad8\u7684\u6545\u969c\uff0c\u786c\u76d8\u635f\u574f\u5bfc\u81f4\u7a0b\u5e8f\u8fd0\u884c\u5931\u8d25\u7684\u60c5\u51b5 err \u4e00\u822c\u5371\u9669\u7684\u6545\u969c\uff0c\u67d0\u4e2a\u670d\u52a1\u542f\u52a8\u6216\u8fd0\u884c\u5931\u8d25\u7684\u60c5\u51b5 warning \u8b66\u544a\u4fe1\u606f\uff0c\u67d0\u4e2a\u670d\u52a1\u53c2\u6570\u6216\u529f\u80fd\u9519\u8bef\u7684\u60c5\u51b5 notice \u4e00\u822c\u65e0\u5371\u9669\u7684\u6545\u969c\uff0c\u53ea\u662f\u9700\u8981\u5904\u7406\u7684\u60c5\u51b5 info \u901a\u7528\u6027\u6d88\u606f\uff0c\u7ed9\u7528\u6237\u63d0\u793a\u4e00\u4e9b\u6709\u7528\u4fe1\u606f debug \u8c03\u8bd5\u7a0b\u5e8f\u6240\u4ea7\u751f\u7684\u4fe1\u606f none \u6ca1\u6709\u4f18\u5148\u7ea7\uff0c\u4e0d\u505a\u65e5\u5fd7\u8bb0\u5f55 Bash<pre><code>[root@server ~]# journalctl -p crit   \uff08\u6309\u7ea7\u522b\u67e5\u8be2\uff09\n[root@server ~]# journalctl --since today\n[root@server ~]# journalctl --since \"-1 hour\"   (\u6700\u8fd1\u4e00\u5c0f\u65f6\u7684\u65e5\u5fd7)\n[root@server ~]# journalctl --since \"15:00\" --until \"16:00\"\n\uff08\u6307\u5b9a\u65f6\u95f4\u6bb5\u65e5\u5fd7\uff09\n[root@server ~]# journalctl  -u sshd  \uff08\u67e5\u770b\u67d0\u4e2a\u670d\u52a1\u7684\u65e5\u5fd7\uff09\n</code></pre>"},{"location":"Linux/linux/#6apache","title":"6.\u4f7f\u7528apache\u670d\u52a1\u90e8\u7f72\u9759\u6001\u7f51\u7ad9","text":""},{"location":"Linux/linux/#_25","title":"\u7f51\u7ad9\u670d\u52a1\u7a0b\u5e8f","text":"<p>Apache\u670d\u52a1\u7a0b\u5e8f\u53ef\u4ee5\u8fd0\u884c\u5728Linux\u7cfb\u7edf\u3001UNIX\u7cfb\u7edf\u751a\u81f3\u662fWindows\u7cfb\u7edf\u4e2d\uff0c\u5b83\u652f\u6301\u57fa\u4e8eIP\u3001\u57df\u540d\u53ca\u7aef\u53e3\u53f7\u7684\u865a\u62df\u4e3b\u673a\u529f\u80fd\uff0c\u652f\u6301\u591a\u79cd\u8ba4\u8bc1\u65b9\u5f0f\uff0c\u96c6\u6210\u6709\u4ee3\u7406\u670d\u52a1\u5668\u6a21\u5757\u3001\u5b89\u5168Socket\u5c42\uff08SSL\uff09\uff0c\u80fd\u591f\u5b9e\u65f6\u76d1\u89c6\u670d\u52a1\u72b6\u6001\u4e0e\u5b9a\u5236\u65e5\u5fd7\u6d88\u606f\uff0c\u5e76\u652f\u6301\u5404\u7c7b\u4e30\u5bcc\u7684\u6a21\u5757\u3002</p> Bash<pre><code>yum -y install httpd\nsystemctl start httpd\nsystemctl enable httpd\n\u5168\u5c40\u914d\u7f6e\u53c2\u6570\u662f\u4e00\u79cd\u5168\u5c40\u6027\u7684\u914d\u7f6e\u53c2\u6570\uff0c\u53ef\u4f5c\u7528\u4e8e\u6240\u6709\u7684\u5b50\u7ad9\u70b9\uff1b\u533a\u57df\u914d\u7f6e\u53c2\u6570 (\u5199\u5728\u4e2d\u7684) \u5219\u662f\u5355\u72ec\u9488\u5bf9\u6bcf\u4e2a\u72ec\u7acb\u7684\u5b50\u7ad9\u70b9\u8bbe\u7f6e\u7684\uff1b\u800c\u6ce8\u91ca\u884c\u4fe1\u606f\u4e00\u822c\u662f\u5bf9\u670d\u52a1\u7a0b\u5e8f\u7684\u529f\u80fd\u6216\u67d0\u4e00\u884c\u53c2\u6570\u8fdb\u884c\u4ecb\u7ecd\u7684\u3002\n</code></pre>"},{"location":"Linux/linux/#_26","title":"\u914d\u7f6e\u670d\u52a1\u6587\u4ef6\u53c2\u6570","text":"<ul> <li>\u886810-1 Linux\u7cfb\u7edf\u4e2d\u7684httpd\u914d\u7f6e\u6587\u4ef6</li> </ul> \u4f5c\u7528 \u6587\u4ef6\u540d\u79f0 \u670d\u52a1\u76ee\u5f55 /etc/httpd \u4e3b\u914d\u7f6e\u6587\u4ef6 /etc/httpd/conf/httpd.conf \u7f51\u7ad9\u6570\u636e\u76ee\u5f55 /var/www/html \u8bbf\u95ee\u65e5\u5fd7 /var/log/httpd/access_log \u9519\u8bef\u65e5\u5fd7 /var/log/httpd/error_log <ul> <li>\u886810-2 \u914d\u7f6ehttpd\u670d\u52a1\u7a0b\u5e8f\u65f6\u6700\u5e38\u7528\u7684\u53c2\u6570\u4ee5\u53ca\u7528\u9014\u63cf\u8ff0</li> </ul> \u53c2\u6570 \u4f5c\u7528 ServerRoot \u670d\u52a1\u76ee\u5f55 ServerAdmin \u7ba1\u7406\u5458\u90ae\u7bb1 User \u8fd0\u884c\u670d\u52a1\u7684\u7528\u6237 Group \u8fd0\u884c\u670d\u52a1\u7684\u7528\u6237\u7ec4 ServerName \u7f51\u7ad9\u670d\u52a1\u5668\u7684\u57df\u540d DocumentRoot \u7f51\u7ad9\u6570\u636e\u76ee\u5f55 Listen \u76d1\u542c\u7684IP\u5730\u5740\u4e0e\u7aef\u53e3\u53f7 DirectoryIndex \u9ed8\u8ba4\u7684\u7d22\u5f15\u9875\u9875\u9762 ErrorLog \u9519\u8bef\u65e5\u5fd7\u6587\u4ef6 CustomLog \u8bbf\u95ee\u65e5\u5fd7\u6587\u4ef6 Timeout \u7f51\u9875\u8d85\u65f6\u65f6\u95f4\uff0c\u9ed8\u8ba4\u4e3a300\u79d2 <ul> <li>\u5efa\u7acb\u7f51\u7ad9\u6570\u636e\u7684\u4fdd\u5b58\u76ee\u5f55\uff0c\u521b\u5efa\u9996\u9875\u6587\u4ef6 Bash<pre><code>mkdir /home/wwwroot\necho \"this is new web site pagemkdir /home/wwwroot\" &gt; /home/wwwroot/index.html\nvim /etc/httpd/conf/httpd.conf\nDocumentRoot \"/home/wwwroot\"\n&lt;Directory \"/home/wwwroot\"&gt;\nAllowOverride None\n# Allow open access:\nRequire all granted\n&lt;/Directory&gt;\n# Further relax access to the default document root:\n&lt;Directory \"/home/wwwroot\"&gt;\n\n[root@server wwwroot]# systemctl restart httpd\n[root@server wwwroot]# semanage fcontext -a -t httpd_sys_content_t \"/home/wwwroot/index.html\"\n[root@server wwwroot]# restorecon -R -v /home/wwwroot/index.html\n[root@server wwwroot]# ll -Z\n-rw-r--r--. root root unconfined_u:object_r:httpd_sys_content_t:s0 index.html\n</code></pre></li> </ul>"},{"location":"Linux/linux/#selinux_1","title":"SELinux\u5b89\u5168\u5b50\u7cfb\u7edf","text":"<ul> <li> <p>SELinux\u5b89\u5168\u4e0a\u4e0b\u6587\u786e\u4fdd\u6587\u4ef6\u8d44\u6e90\u53ea\u80fd\u88ab\u5176\u6240\u5c5e\u7684\u670d\u52a1\u7a0b\u5e8f\u8fdb\u884c\u8bbf\u95ee</p> </li> <li> <p>SELinux\u670d\u52a1\u67093\u79cd\u914d\u7f6e\u6a21\u5f0f\uff0c\u5177\u4f53\u5982\u4e0b\u3002</p> <p>enforcing\uff1a\u5f3a\u5236\u542f\u7528\u5b89\u5168\u7b56\u7565\u6a21\u5f0f\uff0c\u5c06\u62e6\u622a\u670d\u52a1\u7684\u4e0d\u5408\u6cd5\u8bf7\u6c42\u3002 permissive\uff1a\u9047\u5230\u670d\u52a1\u8d8a\u6743\u8bbf\u95ee\u65f6\uff0c\u53ea\u53d1\u51fa\u8b66\u544a\u800c\u4e0d\u5f3a\u5236\u62e6\u622a\u3002 disabled\uff1a\u5bf9\u4e8e\u8d8a\u6743\u7684\u884c\u4e3a\u4e0d\u8b66\u544a\u4e5f\u4e0d\u62e6\u622a\u3002</p> </li> <li> <p>\u886810-3 semanage\u547d\u4ee4\u4e2d\u5e38\u7528\u53c2\u6570\u4ee5\u53ca\u4f5c\u7528</p> </li> </ul> \u53c2\u6570 \u4f5c\u7528 -l \u67e5\u8be2 -a \u6dfb\u52a0 -m \u4fee\u6539 -d \u5220\u9664 Bash<pre><code>[root@server wwwroot]# semanage fcontext -a -t httpd_sys_content_t \"/home/wwwroot\n[root@server wwwroot]# semanage fcontext -a -t httpd_sys_content_t \"/home/wwwroot/*\n[root@server wwwroot]# restorecon -R -v /home/wwwroot/index.html\n</code></pre> ### \u4e2a\u4eba\u7528\u6237\u4e3b\u9875\u529f\u80fd - userdir Bash<pre><code>[root@server wwwroot]# vim /etc/httpd/conf.d/userdir.conf \n    #UserDir disabled\n    UserDir public_html  \uff08\u7f51\u7ad9\u6570\u636e\u5728\u7528\u6237\u5bb6\u76ee\u5f55\u4e2d\u7684\u4fdd\u5b58\u76ee\u5f55\u540d\u79f0\uff1apublic_html\uff09\n[minayao@server ~]$ chmod -R 755 ./\n[minayao@server ~]$ mkdir public_html\n[minayao@server ~]$ echo \"This is yma's site pageecho \uff01\uff01\uff01 \" &gt; public_html/index.html\n[minayao@server ~]$ systemctl restart httpd\n[root@server wwwroot]# firefox \n[root@server wwwroot]#  setsebool -P httpd_read_user_content=on\n[root@server wwwroot]# getsebool -a | grep http\n[root@server wwwroot]#  setsebool -P httpd_enable_homedirs=on\n</code></pre> <ul> <li> <p>\u4e3a\u4e2a\u4eba\u4e3b\u9875\u8bbe\u7f6e\u5bc6\u7801 Bash<pre><code>htpasswd -c /etc/httpd/passwd minayao\n\nvim /etc/httpd/conf.d/userdir.conf\n\n&lt;Directory \"/home/*/public_html\"&gt;\n    AllowOverride all\n    authuserfile \"/etc/httpd/passwd\"\n    authname \"My paivately website\"\n    authtype basic\n    Require user minayao\n&lt;/Directory&gt;\nsystemctl restart httpd\n</code></pre></p> </li> <li> <p>\u7f51\u9875\u4e2d\u8f93\u5165\u7528\u6237\u540d\u548c\u5bc6\u7801</p> </li> </ul>"},{"location":"Linux/linux/#_27","title":"\u865a\u62df\u7f51\u7ad9\u4e3b\u673a","text":"<ul> <li> <p>\u57fa\u4e8eIP\u5730\u5740\uff08\u4e00\u53f0\u673a\u5668\u6709\u591a\u4e2aIP\u5730\u5740\uff09 Bash<pre><code>[root@localhost yum.repos.d]# ping -c 4 192.168.10.30\n\uff08\u68c0\u67e5\u4e09\u4e2a\u5730\u5740\u7684\u8fde\u901a\u6027\uff09\n</code></pre></p> </li> <li> <p>\u65b0\u5efa\u4e0d\u540cIP\u7f51\u7ad9\u7684\u6570\u636e\u76ee\u5f55\uff0c\u5e76\u5199\u5165\u4e3b\u9875 Bash<pre><code>mkdir -p /home/wwwroot/10\nmkdir -p /home/wwwroot/20\nmkdir -p /home/wwwroot/30\necho \"IP:192.168.10.10\" &gt; /home/wwwroot/10/index.html\necho \"IP:192.168.10.20\" &gt; /home/wwwroot/20/index.html\necho \"IP:192.168.10.30\" &gt; /home/wwwroot/30/index.html\nsemanage fcontext -a -t httpd_sys_content_t \"/home/wwwroot/10/index.html\"\n\uff08\u6dfb\u52a0selinux\u5b89\u5168\u4e0a\u4e0b\u6587\uff09\n</code></pre></p> </li> <li> <p>\u4fee\u6539httpd.conf\u4e2d\u7684\u6743\u9650\u8bbe\u7f6e Bash<pre><code>#\u865a\u62df\u4e3b\u673a\u8bbe\u7f6e\uff08\u57fa\u4e8eIP\u5730\u5740\uff09\nNameVirtualHost *:80\n&lt;VirtualHost 192.168.10.10&gt;\n        DocumentRoot /home/wwwroot/10\n        ServerName www.minayao10.com\n        &lt;Directory /home/wwwroot/10&gt;\n        AllowOverride None\n        Require all granted\n        &lt;/Directory&gt;\n&lt;/VirtualHost&gt;\n&lt;VirtualHost 192.168.10.20&gt;\nDocumentRoot /home/wwwroot/20\nServerName www.minayao20.com\n&lt;Directory /home/wwwroot/10&gt;\nAllowOverride None\nRequire all granted\n&lt;/Directory&gt;\n&lt;/VirtualHost&gt;\n\n\n&lt;VirtualHost 192.168.10.30&gt;\nDocumentRoot /home/wwwroot/30\nServerName www.minayao30.com\n&lt;Directory /home/wwwroot/10&gt;\nAllowOverride None\nRequire all granted\n&lt;/Directory&gt;\n&lt;/VirtualHost&gt;\n//\u6743\u9650\u8bbe\u7f6e\nDocumentRoot \"/home/wwwroot\"\n\n\n&lt;Directory \"/home/wwwroot\"&gt;\nAllowOverride None\n# Allow open access:\nRequire all granted\n&lt;/Directory&gt;\n\n\nFurther relax access to the default document root:\n\n&lt;Directory \"/home/wwwroot\"&gt;\n</code></pre></p> </li> <li> <p>\u57fa\u4e8e\u4e3b\u673a\u57df\u540d</p> </li> <li>\u7ed1\u5b9aIP\u548c\u57df\u540d Bash<pre><code>#\u7f16\u8f91/etc/hosts\n92.168.10.10   www.minayao10.com\n192.168.10.20   www.minayao20.com\n192.168.10.30   www.minayao30.com\n</code></pre></li> <li> <p>\u521b\u5efa\u51e0\u4e2a\u76ee\u5f55\u5b58\u653e\u6570\u636e\uff0c\u5e76\u521b\u5efa\u9996\u9875\u6587\u4ef6 Bash<pre><code>[root@192 wwwroot]# mkdir -p /home/wwwroot/minayao10\n[root@192 wwwroot]# mkdir -p /home/wwwroot/minayao20\n[root@192 wwwroot]# mkdir -p /home/wwwroot/minayao30\n[root@192 wwwroot]# echo www.minayao10.com &gt; minayao10/index.html\n[root@192 wwwroot]# echo www.minayao20.com &gt; minayao20/index.html\n[root@192 wwwroot]# echo www.minayao30.com &gt; minayao30/index.html\n</code></pre></p> </li> <li> <p>\u4fee\u6539/etc/httpd/conf/httpd.conf Bash<pre><code>NameVirtualHost *:80\n&lt;VirtualHost 192.168.10.10&gt;\n        DocumentRoot /home/wwwroot/minayao10    \u2b05here\n        ServerName www.minayao10.com\n        &lt;Directory /home/wwwroot/minayao10&gt;     \u2b05\n        AllowOverride None\n        Require all granted\n        &lt;/Directory&gt;\n&lt;/VirtualHost&gt;\n&lt;VirtualHost 192.168.10.20&gt;\nDocumentRoot /home/wwwroot/minayao20   \u2b05\nServerName www.minayao20.com\n&lt;Directory /home/wwwroot/minayao10&gt;    \u2b05\nAllowOverride None\nRequire all granted\n&lt;/Directory&gt;\n&lt;/VirtualHost&gt;\n\n\n&lt;VirtualHost 192.168.10.30&gt;\nDocumentRoot /home/wwwroot/minayao30   \u2b05\nServerName www.minayao30.com\n&lt;Directory /home/wwwroot/minayao10&gt;    \u2b05\nAllowOverride None\nRequire all granted\n&lt;/Directory&gt;\n&lt;/VirtualHost&gt;\n</code></pre></p> </li> <li> <p>\u5982\u679c\u6ca1\u6709\u8bbe\u7f6eselinux\u4e0a\u4e0b\u6587\u7684\u8bdd\u8981\u8bbe\u7f6e</p> </li> <li> <p>\u57fa\u4e8e\u7aef\u53e3\u53f7</p> </li> <li>\u521b\u5efa\u76ee\u5f55 Bash<pre><code>[root@192 wwwroot]# mkdir 6111\n[root@192 wwwroot]# mkdir 6112\n[root@192 wwwroot]# mkdir 6113\n</code></pre></li> <li>\u6dfb\u52a0\u9996\u9875\u6587\u4ef6 Bash<pre><code>[root@192 wwwroot]# echo \"port:6111\" &gt; 6111/index.html\n[root@192 wwwroot]# echo \"port:6112\" &gt; 6112/index.html\n[root@192 wwwroot]# echo \"port:6113\" &gt; 6113/index.html\n</code></pre></li> <li>\u4fee\u6539http.conf Bash<pre><code>Listen 6111\nListen 6112\nListen 6113\n&lt;VirtualHost 192.168.10.10:6111&gt;    \u2b05here\nDocumentRoot /home/wwwroot/6111    \u2b05here\nServerName www.minayao10.com\n&lt;Directory /home/wwwroot/6111&gt;    \u2b05here\nAllowOverride None\nRequire all granted\n&lt;/Directory&gt;\n&lt;/VirtualHost&gt;\n\n\n&lt;VirtualHost 192.168.10.20:6112&gt;\nDocumentRoot /home/wwwroot/6112\nServerName www.minayao20.com\n&lt;Directory /home/wwwroot/6112&gt;\nAllowOverride None\nRequire all granted\n&lt;/Directory&gt;\n&lt;/VirtualHost&gt;\n\n\n&lt;VirtualHost 192.168.10.30:6113&gt;\nDocumentRoot /home/wwwroot/6113\nServerName www.minayao30.com\n&lt;Directory /home/wwwroot/6113&gt;\nAllowOverride None\nRequire all granted\n&lt;/Directory&gt;\n&lt;/VirtualHost&gt;\n</code></pre></li> </ul>"},{"location":"Linux/linux/#apache","title":"apache\u7684\u8bbf\u95ee\u63a7\u5236","text":"<ol> <li> <p>\u521b\u5efa\u76ee\u5f55server\uff0c\u5e76\u521b\u5efa\u9996\u9875\u6587\u4ef6</p> </li> <li> <p>\u7f16\u8f91httpd.conf Bash<pre><code>\u9650\u5236\u6d4f\u89c8\u5668\u767b\u5f55\n&lt;Directory \"/home/wwwroot/server\"&gt;\n        SetEnvIf User-Agent \"Firefox\" ff=1\n        Order allow,deny\n        Allow from env=ff\n&lt;/Directory&gt;\n</code></pre> Bash<pre><code>\u9650\u5236IP\u5730\u5740\n&lt;Directory \"/home/wwwroot/server\"&gt;\n        Order allow,deny\n        Allow from 192.168.10.10\n&lt;/Directory&gt;\n</code></pre></p> </li> </ol> <p>\u60f3\u8981\u67e5\u8be2\u5e76\u8fc7\u6ee4http\u534f\u8bae\u76f8\u5173\u7684selinux\u57df\u7b56\u7565\u6709\u54ea\u4e9b\uff1f Bash<pre><code>* getsebool -a | grep http\n</code></pre> \u4f7f\u7528\u7aef\u53e3\u53f7\u914d\u7f6e\u865a\u62df\u4e3b\u673a\u7f51\u7ad9\u6709\u4ec0\u4e48\u7279\u70b9</p> <p>\u5728\u4f7f\u7528\u7aef\u53e3\u53f7\u6765\u914d\u7f6e\u865a\u62df\u4e3b\u673a\u7f51\u7ad9\u65f6\uff0c\u5fc5\u987b\u8981\u8003\u8651\u5230SELinux\u57df\u5bf9httpd\u670d\u52a1\u7a0b\u5e8f\u6240\u7528\u7aef\u53e3\u53f7\u7684\u63a7\u5236\u7b56\u7565\uff0c\u8fd8\u8981\u5728httpd\u670d\u52a1\u7a0b\u5e8f\u7684\u4e3b\u914d\u7f6e\u6587\u4ef6\u4e2d\u4f7f\u7528Listen\u53c2\u6570\u6765\u5f00\u542f\u8981\u76d1\u542c\u7684\u7aef\u53e3\u53f7\u3002</p>"},{"location":"Linux/linux/#7vsftpd","title":"7.\u4f7f\u7528vsftpd\u670d\u52a1\u4f20\u8f93\u6587\u4ef6","text":""},{"location":"Linux/linux/#_28","title":"\u6587\u4ef6\u4f20\u8f93\u534f\u8bae","text":"Text Only<pre><code>ftp\u662f\u4e00\u79cd\u5728\u4e92\u8054\u7f51\u4e2d\u8fdb\u884c\u6587\u4ef6\u4f20\u8f93\u7684\u534f\u8bae\uff0c\u57fa\u4e8eC/S\u6a21\u5f0f\uff0c\u9ed8\u8ba4\u4f7f\u752820\u300121\u7aef\u53e3\uff0c20\u7528\u6765\u8fdb\u884c\u6570\u636e\u4f20\u8f93\uff0c21\u7528\u4e8e\u63a5\u6536\u5ba2\u6237\u7aef\u53d1\u51fa\u7684\u547d\u4ee4\u548c\u53c2\u6570\n\nftp\u534f\u8bae\u6709\u4e24\u79cd\u5de5\u4f5c\u6a21\u5f0f\n\n\u4e3b\u52a8\u6a21\u5f0f\uff1aFTP\u670d\u52a1\u5668\u4e3b\u52a8\u5411\u5ba2\u6237\u7aef\u53d1\u8d77\u8fde\u63a5\u8bf7\u6c42\u3002\n\n\u88ab\u52a8\u6a21\u5f0f\uff1aFTP\u670d\u52a1\u5668\u7b49\u5f85\u5ba2\u6237\u7aef\u53d1\u8d77\u8fde\u63a5\u8bf7\u6c42\uff08\u9ed8\u8ba4\u5de5\u4f5c\u6a21\u5f0f\uff09\u3002\n</code></pre>"},{"location":"Linux/linux/#vsftpd","title":"vsftpd\u670d\u52a1\u7a0b\u5e8f","text":"<ul> <li> <p>vsftpd\u7684\u4e3b\u914d\u7f6e\u6587\u4ef6/etc/vsftpd/vsftpd.conf</p> </li> <li> <p>\u886811-1 vsftpd\u670d\u52a1\u7a0b\u5e8f\u5e38\u7528\u7684\u53c2\u6570\u4ee5\u53ca\u4f5c\u7528</p> </li> </ul> \u53c2\u6570 \u4f5c\u7528 listen=[YES NO] listen_address=IP\u5730\u5740 \u8bbe\u7f6e\u8981\u76d1\u542c\u7684IP\u5730\u5740 listen_port=21 \u8bbe\u7f6eFTP\u670d\u52a1\u7684\u76d1\u542c\u7aef\u53e3 download_enable\uff1d[YES NO] userlist_enable=[YES NO] userlist_deny=[YES max_clients=0 \u6700\u5927\u5ba2\u6237\u7aef\u8fde\u63a5\u6570\uff0c0\u4e3a\u4e0d\u9650\u5236 max_per_ip=0 \u540c\u4e00IP\u5730\u5740\u7684\u6700\u5927\u8fde\u63a5\u6570\uff0c0\u4e3a\u4e0d\u9650\u5236 anonymous_enable=[YES NO] anon_upload_enable=[YES NO] anon_umask=022 \u533f\u540d\u7528\u6237\u4e0a\u4f20\u6587\u4ef6\u7684umask\u503c anon_root=/var/ftp \u533f\u540d\u7528\u6237\u7684FTP\u6839\u76ee\u5f55 anon_mkdir_write_enable=[YES NO] anon_other_write_enable=[YES NO] anon_max_rate=0 \u533f\u540d\u7528\u6237\u7684\u6700\u5927\u4f20\u8f93\u901f\u7387\uff08\u5b57\u8282/\u79d2\uff09\uff0c0\u4e3a\u4e0d\u9650\u5236 local_enable=[YES NO] local_umask=022 \u672c\u5730\u7528\u6237\u4e0a\u4f20\u6587\u4ef6\u7684umask\u503c local_root=/var/ftp \u672c\u5730\u7528\u6237\u7684FTP\u6839\u76ee\u5f55 chroot_local_user=[YES NO] local_max_rate=0 \u672c\u5730\u7528\u6237\u6700\u5927\u4f20\u8f93\u901f\u7387\uff08\u5b57\u8282/\u79d2\uff09\uff0c0\u4e3a\u4e0d\u9650\u5236 <ul> <li>vsftpd\u7684\u4e09\u79cd\u8ba4\u8bc1\u6a21\u5f0f         1. \u533f\u540d\u5f00\u653e\u6a21\u5f0f\uff1a\u662f\u6700\u4e0d\u5b89\u5168\u7684\u4e00\u79cd\u8ba4\u8bc1\u6a21\u5f0f\uff0c\u4efb\u4f55\u4eba\u90fd\u53ef\u4ee5\u65e0\u987b\u5bc6\u7801\u9a8c\u8bc1\u800c\u76f4\u63a5\u767b\u5f55\u5230FTP\u670d\u52a1\u5668\u3002         2. \u672c\u5730\u7528\u6237\u6a21\u5f0f\uff1a\u662f\u901a\u8fc7Linux\u7cfb\u7edf\u672c\u5730\u7684\u8d26\u6237\u5bc6\u7801\u4fe1\u606f\u8fdb\u884c\u8ba4\u8bc1\u7684\u6a21\u5f0f\uff0c\u76f8\u8f83\u4e8e\u533f\u540d\u5f00\u653e\u6a21\u5f0f\u66f4\u5b89\u5168\uff0c\u800c\u4e14\u914d\u7f6e\u8d77\u6765\u4e5f\u5f88\u7b80\u5355\u3002\u4f46\u662f\u5982\u679c\u9ed1\u5ba2\u7834\u89e3\u4e86\u8d26\u6237\u7684\u4fe1\u606f\uff0c\u5c31\u53ef\u4ee5\u7545\u901a\u65e0\u963b\u5730\u767b\u5f55FTP\u670d\u52a1\u5668\uff0c\u4ece\u800c\u5b8c\u5168\u63a7\u5236\u6574\u53f0\u670d\u52a1\u5668\u3002         3. \u865a\u62df\u7528\u6237\u6a21\u5f0f\uff1a\u66f4\u5b89\u5168\u7684\u4e00\u79cd\u8ba4\u8bc1\u6a21\u5f0f\uff0c\u5b83\u9700\u8981\u4e3aFTP\u670d\u52a1\u5355\u72ec\u5efa\u7acb\u7528\u6237\u6570\u636e\u5e93\u6587\u4ef6\uff0c\u865a\u62df\u51fa\u7528\u6765\u8fdb\u884c\u5bc6\u7801\u9a8c\u8bc1\u7684\u8d26\u6237\u4fe1\u606f\uff0c\u800c\u8fd9\u4e9b\u8d26\u6237\u4fe1\u606f\u5728\u670d\u52a1\u5668\u7cfb\u7edf\u4e2d\u5b9e\u9645\u4e0a\u662f\u4e0d\u5b58\u5728\u7684\uff0c\u4ec5\u4f9bFTP\u670d\u52a1\u7a0b\u5e8f\u8fdb\u884c\u8ba4\u8bc1\u4f7f\u7528\u3002\u8fd9\u6837\uff0c\u5373\u4f7f\u9ed1\u5ba2\u7834\u89e3\u4e86\u8d26\u6237\u4fe1\u606f\u4e5f\u65e0\u6cd5\u767b\u5f55\u670d\u52a1\u5668\uff0c\u4ece\u800c\u6709\u6548\u964d\u4f4e\u4e86\u7834\u574f\u8303\u56f4\u548c\u5f71\u54cd\u3002</li> <li> <p>ftp\u5ba2\u6237\u7aef</p> </li> <li> <p>\u533f\u540d\u5f00\u653e\u6a21\u5f0f</p> </li> <li>\u886811-2 \u5411\u533f\u540d\u7528\u6237\u5f00\u653e\u7684\u6743\u9650\u53c2\u6570\u4ee5\u53ca\u4f5c\u7528</li> </ul> \u53c2\u6570 \u4f5c\u7528 anonymous_enable=YES \u5141\u8bb8\u533f\u540d\u8bbf\u95ee\u6a21\u5f0f anon_umask=022 \u533f\u540d\u7528\u6237\u4e0a\u4f20\u6587\u4ef6\u7684umask\u503c anon_upload_enable=YES \u5141\u8bb8\u533f\u540d\u7528\u6237\u4e0a\u4f20\u6587\u4ef6 anon_mkdir_write_enable=YES \u5141\u8bb8\u533f\u540d\u7528\u6237\u521b\u5efa\u76ee\u5f55 anon_other_write_enable=YES \u5141\u8bb8\u533f\u540d\u7528\u6237\u4fee\u6539\u76ee\u5f55\u540d\u79f0\u6216\u5220\u9664\u76ee\u5f55 Bash<pre><code>[root@linuxprobe ~]# vim /etc/vsftpd/vsftpd.conf\n  1 anonymous_enable=YES\n  2 anon_umask=022\n  3 anon_upload_enable=YES\n  4 anon_mkdir_write_enable=YES\n  5 anon_other_write_enable=YES\n  6 local_enable=YES\n  7 write_enable=YES\n  8 local_umask=022\n  9 dirmessage_enable=YES\n 10 xferlog_enable=YES\n 11 connect_from_port_20=YES\n 12 xferlog_std_format=YES\n 13 listen=NO\n 14 listen_ipv6=YES\n 15 pam_service_name=vsftpd\n 16 userlist_enable=YES\n[root@linuxprobe ~]# systemctl restart vsftpd\n[root@linuxprobe ~]# systemctl enable vsftpd\n[root@linuxprobe ~]# setsebool -P ftpd_full_access=on\n</code></pre> <ul> <li>\u672c\u5730\u7528\u6237\u6a21\u5f0f</li> <li>\u886811-3 \u672c\u5730\u7528\u6237\u6a21\u5f0f\u4f7f\u7528\u7684\u6743\u9650\u53c2\u6570\u4ee5\u53ca\u4f5c\u7528</li> </ul> \u53c2\u6570 \u4f5c\u7528 anonymous_enable=NO \u7981\u6b62\u533f\u540d\u8bbf\u95ee\u6a21\u5f0f local_enable=YES \u5141\u8bb8\u672c\u5730\u7528\u6237\u6a21\u5f0f write_enable=YES \u8bbe\u7f6e\u53ef\u5199\u6743\u9650 local_umask=022 \u672c\u5730\u7528\u6237\u6a21\u5f0f\u521b\u5efa\u6587\u4ef6\u7684umask\u503c userlist_deny=YES \u542f\u7528\u201c\u7981\u6b62\u7528\u6237\u540d\u5355\u201d\uff0c\u540d\u5355\u6587\u4ef6\u4e3aftpusers\u548cuser_list userlist_enable=YES \u5f00\u542f\u7528\u6237\u4f5c\u7528\u540d\u5355\u6587\u4ef6\u529f\u80fd Bash<pre><code>[root@linuxprobe ~]# vim /etc/vsftpd/vsftpd.conf\n  1 anonymous_enable=NO\n  2 local_enable=YES\n  3 write_enable=YES\n  4 local_umask=022\n  5 dirmessage_enable=YES\n  6 xferlog_enable=YES\n  7 connect_from_port_20=YES\n  8 xferlog_std_format=YES\n  9 listen=NO\n 10 listen_ipv6=YES\n 11 pam_service_name=vsftpd\n 12 userlist_enable=YES\n[root@linuxprobe ~]# systemctl restart vsftpd\n[root@linuxprobe ~]# systemctl enable vsftpd\n[root@linuxprobe ~]# cat /etc/vsftpd/user_list \n#root  \u9ed1\u540d\u5355\u6a21\u5f0f\uff08\u9ed8\u8ba4userlist_deny=yes\uff09\u4e0b\u5c06\u8981\u767b\u9646\u7684\u8d26\u53f7\u6ce8\u91ca\u6389\u624d\u80fd\u767b\u5f55\u6210\u529f\n[root@linuxprobe ~]# cat /etc/vsftpd/ftpusers \n#root\n[root@linuxprobe ~]# ftp 192.168.10.10\nConnected to 192.168.10.10 (192.168.10.10).\n220 (vsFTPd 3.0.3)\nName (192.168.10.10:root): root\n331 Please specify the password.\nPassword:\u6b64\u5904\u8f93\u5165\u8be5\u7528\u6237\u7684\u5bc6\u7801\n230 Login successful.\nRemote system type is UNIX.\nUsing binary mode to transfer files.\nftp&gt;\n</code></pre> <ul> <li>\u865a\u62df\u7528\u6237\u6a21\u5f0f</li> <li>\u91cd\u65b0\u5b89\u88c5vsftpd\u670d\u52a1\u3002\u521b\u5efa\u7528\u4e8e\u8fdb\u884cFTP\u8ba4\u8bc1\u7684\u7528\u6237\u6570\u636e\u5e93\u6587\u4ef6\uff0c\u5176\u4e2d\u5947\u6570\u884c\u4e3a\u8d26\u6237\u540d\uff0c\u5076\u6570\u884c\u4e3a\u5bc6\u7801\u3002\u4f8b\u5982\uff0c\u5206\u522b\u521b\u5efazhangsan\u548clisi\u4e24\u4e2a\u7528\u6237\uff0c\u5bc6\u7801\u5747\u4e3aredhat\uff1a Bash<pre><code>[root@linuxprobe ~]# cd /etc/vsftpd/\n[root@linuxprobe vsftpd]# vim vuser.list\nzhangsan\nredhat\nlisi\nredhat\n</code></pre> \u7531\u4e8e\u660e\u6587\u4fe1\u606f\u65e2\u4e0d\u5b89\u5168\uff0c\u4e5f\u4e0d\u7b26\u5408\u8ba9vsftpd\u670d\u52a1\u7a0b\u5e8f\u76f4\u63a5\u52a0\u8f7d\u7684\u683c\u5f0f\uff0c\u56e0\u6b64\u9700\u8981\u4f7f\u7528db_load\u547d\u4ee4\u7528\u54c8\u5e0c\uff08hash\uff09\u7b97\u6cd5\u5c06\u539f\u59cb\u7684\u660e\u6587\u4fe1\u606f\u6587\u4ef6\u8f6c\u6362\u6210\u6570\u636e\u5e93\u6587\u4ef6\uff0c\u5e76\u4e14\u964d\u4f4e\u6570\u636e\u5e93\u6587\u4ef6\u7684\u6743\u9650\uff08\u907f\u514d\u5176\u4ed6\u4eba\u770b\u5230\u6570\u636e\u5e93\u6587\u4ef6\u7684\u5185\u5bb9\uff09\uff0c\u7136\u540e\u518d\u628a\u539f\u59cb\u7684\u660e\u6587\u4fe1\u606f\u6587\u4ef6\u5220\u9664\u3002 Bash<pre><code>[root@linuxprobe vsftpd]# db_load -T -t hash -f vuser.list vuser.db\n[root@linuxprobe vsftpd]# chmod 600 vuser.db\n[root@linuxprobe vsftpd]# rm -f vuser.list\n</code></pre></li> <li>\u521b\u5efavsftpd\u670d\u52a1\u7a0b\u5e8f\u7528\u4e8e\u5b58\u50a8\u6587\u4ef6\u7684\u6839\u76ee\u5f55\u4ee5\u53ca\u7528\u4e8e\u865a\u62df\u7528\u6237\u6620\u5c04\u7684\u7cfb\u7edf\u672c\u5730\u7528\u6237\u3002vsftpd\u670d\u52a1\u7528\u4e8e\u5b58\u50a8\u6587\u4ef6\u7684\u6839\u76ee\u5f55\u6307\u7684\u662f\uff0c\u5f53\u865a\u62df\u7528\u6237\u767b\u5f55\u540e\u6240\u8bbf\u95ee\u7684\u9ed8\u8ba4\u4f4d\u7f6e\u3002 Bash<pre><code>[root@linuxprobe ~]# useradd -d /var/ftproot -s /sbin/nologin virtual\n[root@linuxprobe ~]# ls -ld /var/ftproot/\ndrwx------. 3 virtual virtual 74 Jul 14 17:50 /var/ftproot/\n[root@linuxprobe ~]# chmod -Rf 755 /var/ftproot/\n</code></pre></li> <li>\u5efa\u7acb\u7528\u4e8e\u652f\u6301\u865a\u62df\u7528\u6237\u7684PAM\u6587\u4ef6\u3002</li> </ul> <p>\u65b0\u5efa\u4e00\u4e2a\u7528\u4e8e\u865a\u62df\u7528\u6237\u8ba4\u8bc1\u7684PAM\u6587\u4ef6vsftpd.vu\uff0c\u5176\u4e2dPAM\u6587\u4ef6\u5185\u7684\u201cdb=\u201d\u53c2\u6570\u4e3a\u4f7f\u7528db_load\u547d\u4ee4\u751f\u6210\u7684\u8d26\u6237\u5bc6\u7801\u6570\u636e\u5e93\u6587\u4ef6\u7684\u8def\u5f84\uff0c\u4f46\u4e0d\u7528\u5199\u6570\u636e\u5e93\u6587\u4ef6\u7684\u540e\u7f00\uff1a Bash<pre><code>[root@linuxprobe ~]# vim /etc/pam.d/vsftpd.vu\nauth       required     pam_userdb.so db=/etc/vsftpd/vuser\naccount    required     pam_userdb.so db=/etc/vsftpd/vuser\n</code></pre>   4. \u5728vsftpd\u670d\u52a1\u7a0b\u5e8f\u7684\u4e3b\u914d\u7f6e\u6587\u4ef6\u4e2d\u901a\u8fc7pam_service_name\u53c2\u6570\u5c06PAM\u8ba4\u8bc1\u6587\u4ef6\u7684\u540d\u79f0\u4fee\u6539\u4e3avsftpd.vu\u3002PAM\u4f5c\u4e3a\u5e94\u7528\u7a0b\u5e8f\u5c42\u4e0e\u9274\u522b\u6a21\u5757\u5c42\u7684\u8fde\u63a5\u7ebd\u5e26\uff0c\u53ef\u4ee5\u8ba9\u5e94\u7528\u7a0b\u5e8f\u6839\u636e\u9700\u6c42\u7075\u6d3b\u5730\u5728\u81ea\u8eab\u63d2\u5165\u6240\u9700\u7684\u9274\u522b\u529f\u80fd\u6a21\u5757\u3002\u5f53\u5e94\u7528\u7a0b\u5e8f\u9700\u8981PAM\u8ba4\u8bc1\u65f6\uff0c\u5219\u9700\u8981\u5728\u5e94\u7528\u7a0b\u5e8f\u4e2d\u5b9a\u4e49\u8d1f\u8d23\u8ba4\u8bc1\u7684PAM\u914d\u7f6e\u6587\u4ef6\uff0c\u5b9e\u73b0\u6240\u9700\u7684\u8ba4\u8bc1\u529f\u80fd\u3002    \u4f8b\u5982\uff0c\u5728vsftpd\u670d\u52a1\u7a0b\u5e8f\u7684\u4e3b\u914d\u7f6e\u6587\u4ef6\u4e2d\u9ed8\u8ba4\u5c31\u5e26\u6709\u53c2\u6570pam_service_name=vsftpd\uff0c\u8868\u793a\u767b\u5f55FTP\u670d\u52a1\u5668\u65f6\u662f\u6839\u636e/etc/pam.d/vsftpd\u6587\u4ef6\u8fdb\u884c\u5b89\u5168\u8ba4\u8bc1\u7684\u3002\u73b0\u5728\u6211\u4eec\u8981\u505a\u7684\u5c31\u662f\u628avsftpd\u4e3b\u914d\u7f6e\u6587\u4ef6\u4e2d\u539f\u6709\u7684PAM\u8ba4\u8bc1\u6587\u4ef6vsftpd\u4fee\u6539\u4e3a\u65b0\u5efa\u7684vsftpd.vu\u6587\u4ef6\u5373\u53ef\u3002\u8be5\u64cd\u4f5c\u4e2d\u7528\u5230\u7684\u53c2\u6570\u4ee5\u53ca\u4f5c\u7528\u5982\u886811-4\u6240\u793a\u3002</p> <ul> <li>\u886811-4 \u5229\u7528PAM\u6587\u4ef6\u8fdb\u884c\u8ba4\u8bc1\u65f6\u4f7f\u7528\u7684\u53c2\u6570\u4ee5\u53ca\u4f5c\u7528</li> </ul> \u53c2\u6570 \u4f5c\u7528 anonymous_enable=NO \u7981\u6b62\u533f\u540d\u5f00\u653e\u6a21\u5f0f local_enable=YES \u5141\u8bb8\u672c\u5730\u7528\u6237\u6a21\u5f0f guest_enable=YES \u5f00\u542f\u865a\u62df\u7528\u6237\u6a21\u5f0f guest_username=virtual \u6307\u5b9a\u865a\u62df\u7528\u6237\u8d26\u6237 pam_service_name=vsftpd.vu \u6307\u5b9aPAM\u6587\u4ef6 allow_writeable_chroot=YES \u5141\u8bb8\u5bf9\u7981\u9522\u7684FTP\u6839\u76ee\u5f55\u6267\u884c\u5199\u5165\u64cd\u4f5c\uff0c\u800c\u4e14\u4e0d\u62d2\u7edd\u7528\u6237\u7684\u767b\u5f55\u8bf7\u6c42 Bash<pre><code>[root@linuxprobe ~]# vim /etc/vsftpd/vsftpd.conf  \n  1 anonymous_enable=NO\n  2 local_enable=YES\n  3 write_enable=YES\n  4 guest_enable=YES\n  5 guest_username=virtual\n  6 allow_writeable_chroot=YES\n  7 local_umask=022\n  8 dirmessage_enable=YES\n  9 xferlog_enable=YES\n 10 connect_from_port_20=YES\n 11 xferlog_std_format=YES\n 12 listen=NO\n 13 listen_ipv6=YES\n 14 pam_service_name=vsftpd.vu\n 15 userlist_enable=YES\n</code></pre> <ol> <li>\u4e3a\u865a\u62df\u7528\u6237\u8bbe\u7f6e\u4e0d\u540c\u7684\u6743\u9650\u3002\u867d\u7136\u8d26\u6237zhangsan\u548clisi\u90fd\u662f\u7528\u4e8evsftpd\u670d\u52a1\u7a0b\u5e8f\u8ba4\u8bc1\u7684\u865a\u62df\u8d26\u6237\uff0c\u4f46\u662f\u6211\u4eec\u4f9d\u7136\u60f3\u5bf9\u8fd9\u4e24\u4eba\u8fdb\u884c\u533a\u522b\u5bf9\u5f85\u3002\u6bd4\u5982\uff0c\u5141\u8bb8\u5f20\u4e09\u4e0a\u4f20\u3001\u521b\u5efa\u3001\u4fee\u6539\u3001\u67e5\u770b\u3001\u5220\u9664\u6587\u4ef6\uff0c\u53ea\u5141\u8bb8\u674e\u56db\u67e5\u770b\u6587\u4ef6\u3002\u8fd9\u53ef\u4ee5\u901a\u8fc7vsftpd\u670d\u52a1\u7a0b\u5e8f\u6765\u5b9e\u73b0\u3002\u53ea\u9700\u65b0\u5efa\u4e00\u4e2a\u76ee\u5f55\uff0c\u5728\u91cc\u9762\u5206\u522b\u521b\u5efa\u4e24\u4e2a\u4ee5zhangsan\u548clisi\u547d\u540d\u7684\u6587\u4ef6\uff0c\u5176\u4e2d\u5728\u540d\u4e3azhangsan\u7684\u6587\u4ef6\u4e2d\u5199\u5165\u5141\u8bb8\u7684\u76f8\u5173\u6743\u9650\uff08\u4f7f\u7528\u533f\u540d\u7528\u6237\u7684\u53c2\u6570\uff09\uff1a Bash<pre><code>[root@linuxprobe ~]# mkdir /etc/vsftpd/vusers_dir/\n[root@linuxprobe ~]# cd /etc/vsftpd/vusers_dir/\n[root@linuxprobe vusers_dir]# touch lisi\n[root@linuxprobe vusers_dir]# vim zhangsan\nanon_upload_enable=YES\nanon_mkdir_write_enable=YES\nanon_other_write_enable=YES\n</code></pre></li> </ol> <p>\u7136\u540e\u518d\u6b21\u4fee\u6539vsftpd\u4e3b\u914d\u7f6e\u6587\u4ef6\uff0c\u901a\u8fc7\u6dfb\u52a0user_config_dir\u53c2\u6570\u6765\u5b9a\u4e49\u8fd9\u4e24\u4e2a\u865a\u62df\u7528\u6237\u4e0d\u540c\u6743\u9650\u7684\u914d\u7f6e\u6587\u4ef6\u6240\u5b58\u653e\u7684\u8def\u5f84\u3002\u4e3a\u4e86\u8ba9\u4fee\u6539\u540e\u7684\u53c2\u6570\u7acb\u5373\u751f\u6548\uff0c\u9700\u8981\u91cd\u542fvsftpd\u670d\u52a1\u7a0b\u5e8f\u5e76\u5c06\u8be5\u670d\u52a1\u6dfb\u52a0\u5230\u5f00\u673a\u542f\u52a8\u9879\u4e2d\uff1a</p> Bash<pre><code>[root@linuxprobe ~]# vim /etc/vsftpd/vsftpd.conf\n  1 anonymous_enable=NO\n  2 local_enable=YES\n  3 write_enable=YES\n  4 guest_enable=YES\n  5 guest_username=virtual\n  6 allow_writeable_chroot=YES\n  7 local_umask=022\n  8 dirmessage_enable=YES\n  9 xferlog_enable=YES\n 10 connect_from_port_20=YES\n 11 xferlog_std_format=YES\n 12 listen=NO\n 13 listen_ipv6=YES\n 14 pam_service_name=vsftpd.vu\n 15 userlist_enable=YES\n 16 user_config_dir=/etc/vsftpd/vusers_dir     \u2b05   here\n[root@linuxprobe ~]# systemctl restart vsftpd\n[root@linuxprobe ~]# systemctl enable vsftpd\nCreated symlink /etc/systemd/system/multi-user.target.wants/vsftpd.service \u2192 /usr/lib/systemd/system/vsftpd.service.\n[root@linuxprobe ~]# setsebool -P ftpd_full_access=on\n</code></pre> <p>\u4f7f\u7528\u4e0d\u540c\u7684\u65b9\u5f0f\u767b\u5f55\u6587\u4ef6\u4f20\u8f93\u670d\u52a1\u5668\u540e\uff0c\u9ed8\u8ba4\u6240\u5728\u7684\u4f4d\u7f6e\uff0c\u5982\u886811-5\u6240\u793a\u3002</p> <ul> <li>\u886811-5 vsftpd\u670d\u52a1\u7a0b\u5e8f\u767b\u9646\u540e\u6240\u5728\u76ee\u5f55</li> </ul> \u767b\u5f55\u65b9\u5f0f \u9ed8\u8ba4\u76ee\u5f55 \u533f\u540d\u516c\u5f00 /var/ftp \u672c\u5730\u7528\u6237 \u8be5\u7528\u6237\u7684\u5bb6\u76ee\u5f55 \u865a\u62df\u7528\u6237 \u5bf9\u5e94\u6620\u5c04\u7528\u6237\u7684\u5bb6\u76ee\u5f55"},{"location":"Linux/linux/#tftp","title":"TFTP\u7b80\u5355\u6587\u4ef6\u4f20\u8f93\u534f\u8bae","text":"<p>\u56e0\u4e3aTFTP\u4e0d\u9700\u8981\u5ba2\u6237\u7aef\u7684\u6743\u9650\u8ba4\u8bc1\uff0c\u4e5f\u5c31\u51cf\u5c11\u4e86\u65e0\u8c13\u7684\u7cfb\u7edf\u548c\u7f51\u7edc\u5e26\u5bbd\u6d88\u8017\uff0c\u56e0\u6b64\u5728\u4f20\u8f93\u7410\u788e\uff08trivial\uff09\u4e0d\u5927\u7684\u6587\u4ef6\u65f6\uff0c\u6548\u7387\u66f4\u9ad8\u3002tftp-server\u662f\u670d\u52a1\u7a0b\u5e8f\uff0ctftp\u662f\u7528\u4e8e\u8fde\u63a5\u6d4b\u8bd5\u7684\u5ba2\u6237\u7aef\u5de5\u5177\uff0cxinetd\u662f\u7ba1\u7406\u670d\u52a1</p> Bash<pre><code>[root@linuxprobe ~]# dnf install tftp-server tftp xinetd\n[root@linuxprobe ~]# vim /etc/xinetd.d/tftp\nservice tftp\n{\n        socket_type             = dgram\n        protocol                = udp\n        wait                    = yes\n        user                    = root\n        server                  = /usr/sbin/in.tftpd\n        server_args             = -s /var/lib/tftpboot\n        disable                 = no\n        per_source              = 11\n        cps                     = 100 2\n        flags                   = IPv4\n}\n[root@linuxprobe ~]# systemctl restart tftp\n[root@linuxprobe ~]# systemctl enable tftp\n[root@linuxprobe ~]# systemctl restart xinetd\n[root@linuxprobe ~]# systemctl enable xinetd\n[root@linuxprobe ~]# firewall-cmd --zone=public --permanent --add-port=69/udp\nsuccess\n[root@linuxprobe ~]# firewall-cmd --reload \nsuccess\n</code></pre> <ul> <li>\u886811-6 tftp\u547d\u4ee4\u4e2d\u53ef\u7528\u7684\u53c2\u6570\u4ee5\u53ca\u4f5c\u7528</li> </ul> \u53c2\u6570 \u4f5c\u7528 ? \u5e2e\u52a9\u4fe1\u606f put \u4e0a\u4f20\u6587\u4ef6 get \u4e0b\u8f7d\u6587\u4ef6 verbose \u663e\u793a\u8be6\u7ec6\u7684\u5904\u7406\u4fe1\u606f status \u663e\u793a\u5f53\u524d\u7684\u72b6\u6001\u4fe1\u606f binary \u4f7f\u7528\u4e8c\u8fdb\u5236\u8fdb\u884c\u4f20\u8f93 ascii \u4f7f\u7528ASCII\u7801\u8fdb\u884c\u4f20\u8f93 timeout \u8bbe\u7f6e\u91cd\u4f20\u7684\u8d85\u65f6\u65f6\u95f4 quit \u9000\u51fa Bash<pre><code>[root@linuxprobe ~]# echo \"i love linux\" &gt; /var/lib/tftpboot/readme.txt\n[root@linuxprobe ~]# tftp 192.168.10.10\ntftp&gt; get readme.txt\ntftp&gt; quit\n[root@linuxprobe ~]# ls\nanaconda-ks.cfg  Documents  initial-setup-ks.cfg  Pictures  readme.txt  Videos\nDesktop          Downloads  Music                 Public    Templates\n[root@linuxprobe ~]# cat readme.txt \ni love linux\n</code></pre>"},{"location":"Linux/linux/#8sambanfs","title":"8.\u4f7f\u7528samba/NFS\u5b9e\u73b0\u6587\u4ef6\u5171\u4eab","text":""},{"location":"Linux/linux/#samba","title":"samba\u6587\u4ef6\u5171\u4eab\u670d\u52a1","text":"<ol> <li> <p>\u5b89\u88c5samba\u670d\u52a1\u7a0b\u5e8f Bash<pre><code>[root@www ~]# yum -y install samba samba-client\n</code></pre></p> </li> <li> <p>\u914d\u7f6e\u6587\u4ef6/etc/samba/smb.conf</p> </li> <li> <p>\u886812-1 Samba\u670d\u52a1\u7a0b\u5e8f\u4e2d\u7684\u53c2\u6570\u4ee5\u53ca\u4f5c\u7528</p> </li> </ol> \u884c\u6570 \u53c2\u6570 \u4f5c\u7528 1 # See smb.conf.example for a more detailed config file or \u6ce8\u91ca\u4fe1\u606f 2 # read the smb.conf manpage. 3 # Run 'testparm' to verify the config is correct after 4 # you modified it. 5 [global] \u5168\u5c40\u53c2\u6570 6 workgroup = SAMBA \u5de5\u4f5c\u7ec4\u540d\u79f0 7 8 security = user \u5b89\u5168\u9a8c\u8bc1\u7684\u65b9\u5f0f\uff0c\u603b\u5171\u67094\u79cd 9 10 passdb backend = tdbsam \u5b9a\u4e49\u7528\u6237\u540e\u53f0\u7684\u7c7b\u578b\uff0c\u603b\u5171\u67093\u79cd 11 12 printing = cups \u6253\u5370\u670d\u52a1\u534f\u8bae 13 printcap name = cups \u6253\u5370\u670d\u52a1\u540d\u79f0 14 load printers = yes \u662f\u5426\u52a0\u8f7d\u6253\u5370\u673a 15 cups options = raw \u6253\u5370\u673a\u7684\u9009\u9879 16 17 [homes] \u5171\u4eab\u540d\u79f0 18 comment = Home Directories \u63cf\u8ff0\u4fe1\u606f 19 valid users = %S, %D%w%S \u53ef\u7528\u8d26\u6237 20 browseable = No \u6307\u5b9a\u5171\u4eab\u4fe1\u606f\u662f\u5426\u5728\u201c\u7f51\u4e0a\u90bb\u5c45\u201d\u4e2d\u53ef\u89c1 21 read only = No \u662f\u5426\u53ea\u8bfb 22 inherit acls = Yes \u662f\u5426\u7ee7\u627f\u8bbf\u95ee\u63a7\u5236\u5217\u8868 23 24 [printers] \u5171\u4eab\u540d\u79f0 25 comment = All Printers \u63cf\u8ff0\u4fe1\u606f 26 path = /var/tmp \u5171\u4eab\u8def\u5f84 27 printable = Yes \u662f\u5426\u53ef\u6253\u5370 28 create mask = 0600 \u6587\u4ef6\u6743\u9650 29 browseable = No \u6307\u5b9a\u5171\u4eab\u4fe1\u606f\u662f\u5426\u5728\u201c\u7f51\u4e0a\u90bb\u5c45\u201d\u4e2d\u53ef\u89c1 30 31 [print$]   \u5171\u4eab\u540d\u79f0 32 comment = Printer Drivers \u63cf\u8ff0\u4fe1\u606f 33 path = /var/lib/samba/drivers \u5171\u4eab\u8def\u5f84 34 write list = @printadmin root \u53ef\u5199\u5165\u6587\u4ef6\u7684\u7528\u6237\u5217\u8868 35 force group = @printadmin \u7528\u6237\u7ec4\u5217\u8868 36 create mask = 0664 \u6587\u4ef6\u6743\u9650 37 directory mask = 0775 \u76ee\u5f55\u6743\u9650 <p>\u5728\u4e0a\u9762\u7684\u4ee3\u7801\u4e2d\uff0csecurity\u53c2\u6570\u4ee3\u8868\u7528\u6237\u767b\u5f55Samba\u670d\u52a1\u65f6\u91c7\u7528\u7684\u9a8c\u8bc1\u65b9\u5f0f\u3002\u603b\u5171\u67094\u79cd\u53ef\u7528\u53c2\u6570\u3002</p> <p>share\uff1a\u4ee3\u8868\u4e3b\u673a\u65e0\u987b\u9a8c\u8bc1\u5bc6\u7801\u3002\u8fd9\u76f8\u5f53\u4e8evsftpd\u670d\u52a1\u7684\u533f\u540d\u516c\u5f00\u8bbf\u95ee\u6a21\u5f0f\uff0c\u6bd4\u8f83\u65b9\u4fbf\uff0c\u4f46\u5b89\u5168\u6027\u5f88\u5dee\u3002</p> <p>user\uff1a\u4ee3\u8868\u767b\u5f55Samba\u670d\u52a1\u65f6\u9700\u8981\u4f7f\u7528\u8d26\u53f7\u5bc6\u7801\u8fdb\u884c\u9a8c\u8bc1\uff0c\u901a\u8fc7\u540e\u624d\u80fd\u83b7\u53d6\u5230\u6587\u4ef6\u3002\u8fd9\u662f\u9ed8\u8ba4\u7684\u9a8c\u8bc1\u65b9\u5f0f\uff0c\u6700\u4e3a\u5e38\u7528\u3002</p> <p>domain\uff1a\u4ee3\u8868\u901a\u8fc7\u57df\u63a7\u5236\u5668\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\uff0c\u7528\u6765\u9650\u5236\u7528\u6237\u7684\u6765\u6e90\u57df\u3002</p> <p>server\uff1a\u4ee3\u8868\u4f7f\u7528\u72ec\u7acb\u4e3b\u673a\u9a8c\u8bc1\u6765\u8bbf\u7528\u6237\u63d0\u4f9b\u7684\u5bc6\u7801\u3002\u8fd9\u76f8\u5f53\u4e8e\u96c6\u4e2d\u7ba1\u7406\u8d26\u53f7\uff0c\u5e76\u4e0d\u5e38\u7528\u3002 </p> <ul> <li> <p>\u914d\u7f6e\u5171\u4eab</p> </li> <li> <p>\u886812-2 \u7528\u4e8e\u8bbe\u7f6eSamba\u670d\u52a1\u7a0b\u5e8f\u7684\u53c2\u6570\u4ee5\u53ca\u4f5c\u7528</p> </li> </ul> \u53c2\u6570 \u4f5c\u7528 [database] \u5171\u4eab\u540d\u79f0\u4e3adatabase comment = Do not arbitrarily modify the database file \u8b66\u544a\u7528\u6237\u4e0d\u8981\u968f\u610f\u4fee\u6539\u6570\u636e\u5e93 path = /home/database \u5171\u4eab\u76ee\u5f55\u4e3a/home/database public = no \u5173\u95ed\u201c\u6240\u6709\u4eba\u53ef\u89c1\u201d writable = yes \u5141\u8bb8\u5199\u5165\u64cd\u4f5c <ol> <li>\u914d\u7f6e Bash<pre><code>[root@www ~]# pdbedit -a -u minayao\n#\u521b\u5efa\u5171\u4eab\u8d26\u6237\uff08\u8d26\u6237\u9700\u8981\u662f\u672c\u5730\u5b58\u5728\u7684\u7528\u6237\uff09\n[root@www ~]# mkdir /home/database\n#\u521b\u5efa\u5171\u4eab\u8d44\u6e90\u7684\u6587\u4ef6\u76ee\u5f55\n[root@www ~]# chown -Rf minayao:minayao /home/database\n#\u6539\u6743\u9650\n[root@www ~]# semanage fcontext -a -t samba_share_t /home/database\n#\u6539\u5b89\u5168\u4e0a\u4e0b\u6587\n[root@www ~]# restorecon -Rv /home/database\n#\u8ba9\u5b89\u5168\u4e0a\u4e0b\u6587\u7acb\u5373\u751f\u6548\n[root@www ~]# setsebool -P samba_enable_home_dirs on\n#\u66f4\u6539selinux\u57df\u7b56\u7565\u653e\u884c\u5bb6\u76ee\u5f55\u5171\u4eab\n[root@www ~]# vim /etc/samba/smb.conf\n[global]\n        workgroup = SAMBA\n        security = user\n        passdb backend = tdbsam\n[database]\n        comment = Do not arbitrarily modify the database file\n        path = /home/database\n        public = no\n        writable = yes\n#\u4fee\u6539\u914d\u7f6e\u6587\u4ef6\uff0c\u6700\u540e\u91cd\u542f\u670d\u52a1\n\\\\192.168.10.10   windos\u6302\u8f7d\u5171\u4eab\n[root@www ~]# smbclient -U minayao -L 192.168.10.10\n#\u67e5\u770b\u5f53\u524d\u5171\u4eab\u4e86\u54ea\u4e9b\u6587\u4ef6\n</code></pre></li> <li> <p>\u6302\u8f7d  Bash<pre><code>[root@www ~]# yum -y install cifs-utils\n#Linux\u652f\u6301\u6587\u4ef6\u5171\u4eab\u7684\u8f6f\u4ef6\u5305\n[root@www ~]# mkdir /database\n#\u521b\u5efa\u6302\u8f7d\u70b9\n[root@www ~]# mount -t cifs -o username=minayao,password=aaaa //192.168.10.10/database /database\n#\u6302\u8f7d\n</code></pre></p> </li> <li> <p>\u81ea\u52a8\u52a0\u8f7d\u5171\u4eab Bash<pre><code>[root@www ~]# vim auth.smb\nusername=minayao\npassword=aaaa\ndomain=MYGROUP\n[root@www ~]# chmod 600 auth.smb\n\n\n[root@www ~]# vim /etc/fstab\n//192.168.10.10/database /database      cifs    credentials=/root/auth.smb 0 0\n</code></pre></p> </li> </ol>"},{"location":"Linux/linux/#nfs","title":"NFS\u7f51\u7edc\u6587\u4ef6\u7cfb\u7edf","text":"<ol> <li> <p>\u5b89\u88c5nfs Bash<pre><code>[root@www ~]# yum -y install nfs-utils.x86_64\n</code></pre></p> </li> <li> <p>\u653e\u884c\u9632\u706b\u5899 Bash<pre><code>[root@www ~]# firewall-cmd --permanent --zone=public --add-service=rpc-bind \nsuccess\n[root@www ~]# firewall-cmd --permanent --zone=public --add-service=nfs\nsuccess\n[root@www ~]# firewall-cmd --permanent --zone=public --add-service=mountd \nsuccess\n[root@www ~]# firewall-cmd --reload \nsuccess\n</code></pre></p> </li> <li> <p>\u521b\u5efa\u5171\u4eab\u76ee\u5f55\u548c\u6587\u4ef6 Bash<pre><code>[root@www ~]# mkdir /nfsfile\n[root@www ~]# chmod -R 777 /nfsfile\n[root@www ~]# echo \"welcome to.192.168.10.10\" &gt; /nfsfile/readme.md\n</code></pre></p> </li> <li> <p>\u7f16\u8f91nfs\u4e3b\u914d\u7f6e\u6587\u4ef6/etc/exports</p> </li> </ol> <p>\u886812-7 \u7528\u4e8e\u914d\u7f6eNFS\u670d\u52a1\u7a0b\u5e8f\u914d\u7f6e\u6587\u4ef6\u7684\u53c2\u6570</p> \u53c2\u6570 \u4f5c\u7528 ro \u53ea\u8bfb rw \u8bfb\u5199 root_squash \u5f53NFS\u5ba2\u6237\u7aef\u4ee5root\u7ba1\u7406\u5458\u8bbf\u95ee\u65f6\uff0c\u6620\u5c04\u4e3aNFS\u670d\u52a1\u5668\u7684\u533f\u540d\u7528\u6237 no_root_squash \u5f53NFS\u5ba2\u6237\u7aef\u4ee5root\u7ba1\u7406\u5458\u8bbf\u95ee\u65f6\uff0c\u6620\u5c04\u4e3aNFS\u670d\u52a1\u5668\u7684root\u7ba1\u7406\u5458 all_squash \u65e0\u8bbaNFS\u5ba2\u6237\u7aef\u4f7f\u7528\u4ec0\u4e48\u8d26\u6237\u8bbf\u95ee\uff0c\u5747\u6620\u5c04\u4e3aNFS\u670d\u52a1\u5668\u7684\u533f\u540d\u7528\u6237 sync \u540c\u65f6\u5c06\u6570\u636e\u5199\u5165\u5230\u5185\u5b58\u4e0e\u786c\u76d8\u4e2d\uff0c\u4fdd\u8bc1\u4e0d\u4e22\u5931\u6570\u636e async \u4f18\u5148\u5c06\u6570\u636e\u4fdd\u5b58\u5230\u5185\u5b58\uff0c\u7136\u540e\u518d\u5199\u5165\u786c\u76d8\uff1b\u8fd9\u6837\u6548\u7387\u66f4\u9ad8\uff0c\u4f46\u53ef\u80fd\u4f1a\u4e22\u5931\u6570\u636e Bash<pre><code>[root@www ~]# vim /etc/exports\n/nfsfile 192.168.10.*(rw,sync,root_squash)\n</code></pre> <ol> <li> <p>\u91cd\u542f\u670d\u52a1 Bash<pre><code>[root@www ~]# systemctl restart nfs-server.service \n[root@www ~]# systemctl enable --now nfs-server.service \nCreated symlink from /etc/systemd/system/multi-user.target.wants/nfs-server.service to /usr/lib/systemd/system/nfs-server.service.\n[root@www ~]# systemctl restart rpcbind\n[root@www ~]# systemctl enable --now rpcbind  \uff08\u8fdc\u7a0b\u8fc7\u7a0b\u8c03\u7528\uff09\n</code></pre></p> </li> <li> <p>showmount \u67e5\u770bNFS\u670d\u52a1\u5668\u7684\u8fdc\u7a0b\u5171\u4eab\u4fe1\u606f</p> </li> </ol> <p>\u886812-8 showmount\u547d\u4ee4\u4e2d\u53ef\u7528\u7684\u53c2\u6570\u4ee5\u53ca\u4f5c\u7528</p> \u53c2\u6570 \u4f5c\u7528 -e \u663e\u793aNFS\u670d\u52a1\u5668\u7684\u5171\u4eab\u5217\u8868 -a \u663e\u793a\u672c\u673a\u6302\u8f7d\u7684\u6587\u4ef6\u8d44\u6e90\u7684\u60c5\u51b5NFS\u8d44\u6e90\u7684\u60c5\u51b5 -v \u663e\u793a\u7248\u672c\u53f7 Bash<pre><code>[root@www ~]# showmount -e 192.168.10.10\nExport list for 192.168.10.10:\n/nfsfile 192.168.10.*\n</code></pre> <ol> <li>\u5728\u5ba2\u6237\u7aef\u521b\u5efa\u6302\u8f7d\u70b9\u5e76\u6302\u8f7d Bash<pre><code>[root@www ~]# mkdir /nfsfile\n[root@www ~]# mount -t nfs 192.168.10.10:/nfsfile /nfsfile\n</code></pre></li> </ol>"},{"location":"Linux/linux/#autofs","title":"autofs\u81ea\u52a8\u6302\u8f7d","text":"<ol> <li>\u5b89\u88c5autofs</li> </ol> <p>yum -y install autofs</p> <ol> <li>\u7f16\u8f91\u914d\u7f6e\u6587\u4ef6/etc/auto.master\u548c/etc/auto.misc</li> </ol> <p>/misc /etc/auto.misc</p> <p>nfsfile 192.168.10.10:/nfsfile</p> <ol> <li>\u521b\u5efa\u6302\u8f7d\u76ee\u5f55</li> </ol> <p>mkdir /misc/nfsfile</p> <ol> <li> <p>\u91cd\u542fautofs</p> </li> <li> <p>\u8fdb\u5165\u6302\u8f7d\u76ee\u5f55\u81ea\u52a8\u6302\u8f7d</p> </li> </ol>"},{"location":"Linux/linux/#9bind","title":"9.\u4f7f\u7528bind\u63d0\u4f9b\u57df\u540d\u89e3\u6790\u670d\u52a1","text":""},{"location":"Linux/linux/#dns","title":"DNS\u57df\u540d\u89e3\u6790\u670d\u52a1","text":"<p>DNS\u6280\u672f\u4f5c\u4e3a\u4e92\u8054\u7f51\u57fa\u7840\u8bbe\u65bd\u4e2d\u91cd\u8981\u7684\u4e00\u73af\uff0c\u4e3a\u4e86\u4e3a\u7f51\u6c11\u63d0\u4f9b\u4e0d\u95f4\u65ad\u3001\u7a33\u5b9a\u4e14\u5feb\u901f\u7684\u57df\u540d\u67e5\u8be2\u670d\u52a1\uff0c\u4fdd\u8bc1\u4e92\u8054\u7f51\u7684\u6b63\u5e38\u8fd0\u8f6c\uff0c\u63d0\u4f9b\u4e86\u4e0b\u97623\u79cd\u7c7b\u578b\u7684\u670d\u52a1\u5668\u3002</p> <p>\u4e3b\u670d\u52a1\u5668\uff1a\u5728\u7279\u5b9a\u533a\u57df\u5185\u5177\u6709\u552f\u4e00\u6027\uff0c\u8d1f\u8d23\u7ef4\u62a4\u8be5\u533a\u57df\u5185\u7684\u57df\u540d\u4e0eIP\u5730\u5740\u4e4b\u95f4\u7684\u5bf9\u5e94\u5173\u7cfb\u3002</p> <p>\u4ece\u670d\u52a1\u5668\uff1a\u4ece\u4e3b\u670d\u52a1\u5668\u4e2d\u83b7\u5f97\u57df\u540d\u4e0eIP\u5730\u5740\u7684\u5bf9\u5e94\u5173\u7cfb\u5e76\u8fdb\u884c\u7ef4\u62a4\uff0c\u4ee5\u9632\u4e3b\u670d\u52a1\u5668\u5b95\u673a\u7b49\u60c5\u51b5\u3002</p> <p>\u7f13\u5b58\u670d\u52a1\u5668\uff1a\u901a\u8fc7\u5411\u5176\u4ed6\u57df\u540d\u89e3\u6790\u670d\u52a1\u5668\u67e5\u8be2\u83b7\u5f97\u57df\u540d\u4e0eIP\u5730\u5740\u7684\u5bf9\u5e94\u5173\u7cfb\uff0c\u5e76\u5c06\u7ecf\u5e38\u67e5\u8be2\u7684\u57df\u540d\u4fe1\u606f\u4fdd\u5b58\u5230\u670d\u52a1\u5668\u672c\u5730\uff0c\u4ee5\u6b64\u6765\u63d0\u9ad8\u91cd\u590d\u67e5\u8be2\u65f6\u7684\u6548\u7387\u3002</p>"},{"location":"Linux/linux/#bind","title":"\u5b89\u88c5Bind\u670d\u52a1\u7a0b\u5e8f","text":"<ul> <li> <p>[root@192 ~]# yum -y install bind-chroot.x86_64</p> </li> <li> <p>\u5728bind\u670d\u52a1\u7a0b\u5e8f\u4e2d\u6709\u4e0b\u9762\u8fd93\u4e2a\u6bd4\u8f83\u5173\u952e\u7684\u6587\u4ef6\u3002</p> </li> </ul> <p>\u4e3b\u914d\u7f6e\u6587\u4ef6\uff08/etc/named.conf\uff09\uff1a\u53ea\u670959\u884c\uff0c\u800c\u4e14\u5728\u53bb\u9664\u6ce8\u91ca\u4fe1\u606f\u548c\u7a7a\u884c\u4e4b\u540e\uff0c\u5b9e\u9645\u6709\u6548\u7684\u53c2\u6570\u4ec5\u670930\u884c\u5de6\u53f3\uff0c\u8fd9\u4e9b\u53c2\u6570\u7528\u6765\u5b9a\u4e49bind\u670d\u52a1\u7a0b\u5e8f\u7684\u8fd0\u884c\u3002</p> <p>\u533a\u57df\u914d\u7f6e\u6587\u4ef6\uff08/etc/named.rfc1912.zones\uff09\uff1a\u7528\u6765\u4fdd\u5b58\u57df\u540d\u548cIP\u5730\u5740\u5bf9\u5e94\u5173\u7cfb\u7684\u6240\u5728\u4f4d\u7f6e\u3002\u7c7b\u4f3c\u4e8e\u56fe\u4e66\u7684\u76ee\u5f55\uff0c\u5bf9\u5e94\u7740\u6bcf\u4e2a\u57df\u548c\u76f8\u5e94IP\u5730\u5740\u6240\u5728\u7684\u5177\u4f53\u4f4d\u7f6e\uff0c\u5f53\u9700\u8981\u67e5\u770b\u6216\u4fee\u6539\u65f6\uff0c\u53ef\u6839\u636e\u8fd9\u4e2a\u4f4d\u7f6e\u627e\u5230\u76f8\u5173\u6587\u4ef6\u3002</p> <p>\u6570\u636e\u914d\u7f6e\u6587\u4ef6\u76ee\u5f55\uff08/var/named\uff09\uff1a\u8be5\u76ee\u5f55\u7528\u6765\u4fdd\u5b58\u57df\u540d\u548cIP\u5730\u5740\u771f\u5b9e\u5bf9\u5e94\u5173\u7cfb\u7684\u6570\u636e\u914d\u7f6e\u6587\u4ef6\u3002 </p> <ul> <li>\u7f16\u8f91\u4e3b\u914d\u7f6e\u6587\u4ef6/etc/named.conf Bash<pre><code>#\u670d\u52a1\u5668\u4e0a\u7684\u6240\u6709IP\u5730\u5740\u5747\u53ef\u63d0\u4f9bDNS\u57df\u540d\u89e3\u6790\u670d\u52a1\uff0c\u4ee5\u53ca\u5141\u8bb8\u6240\u6709\u4eba\u5bf9\u672c\u670d\u52a1\u5668\u53d1\u9001DNS\u67e5\u8be2\u8bf7\u6c42\n      listen-on port 53 { any; };\n      allow-query     { any; };\n</code></pre></li> </ul>"},{"location":"Linux/linux/#-ip","title":"\u6b63\u5411\u89e3\u6790\uff08\u57df\u540d-&gt;IP\uff09","text":"<ul> <li>\u7f16\u8f91\u533a\u57df\u914d\u7f6e\u6587\u4ef6 Bash<pre><code>zone \"www.minayao10.com\" IN {\n        type master;\n        file \"www.minayao10.com.zone\";\n        allow-update {none;};\n};\n</code></pre></li> <li> <p>\u7f16\u8f91\u6570\u636e\u914d\u7f6e\u6587\u4ef6/var/named/minayao.com.zone Bash<pre><code>$TTL 1D\n@       IN SOA  minayao.com. root.minayao.com. (\n                                        0       ; serial\n                                        1D      ; refresh\n                                        1H      ; retry\n                                        1W      ; expire\n                                        3H )    ; minimum\n        NS      ns.minayao10.com.\nns      IN A    192.168.1.10\nwww     IN A    192.168.1.10\n        AAAA    ::1\n</code></pre> Bash<pre><code>$TTL 1D     #\u751f\u5b58\u5468\u671f\u4e3a1\u5929                \n@   IN SOA  linuxprobe.com.     root.linuxprobe.com.    (   \n    #\u6388\u6743\u4fe1\u606f\u5f00\u59cb:    #DNS\u533a\u57df\u7684\u5730\u5740   #\u57df\u540d\u7ba1\u7406\u5458\u7684\u90ae\u7bb1(\u4e0d\u8981\u7528@\u7b26\u53f7)   \n                0;serial    #\u66f4\u65b0\u5e8f\u5217\u53f7\n                1D;refresh  #\u66f4\u65b0\u65f6\u95f4\n                1H;retry    #\u91cd\u8bd5\u5ef6\u65f6\n                1W;expire   #\u5931\u6548\u65f6\u95f4\n                3H );minimum    #\u65e0\u6548\u89e3\u6790\u8bb0\u5f55\u7684\u7f13\u5b58\u65f6\u95f4\n    NS  ns.linuxprobe.com.  #\u57df\u540d\u670d\u52a1\u5668\u8bb0\u5f55\nns  IN A    192.168.10.10   #\u5730\u5740\u8bb0\u5f55(ns.linuxprobe.com.)\nwww     IN A    192.168.10.10   #\u5730\u5740\u8bb0\u5f55(www.linuxprobe.com.)\n</code></pre></p> </li> <li> <p>\u5c06\u7f51\u5361DNS\u5730\u5740\u53c2\u6570\u6539\u6210\u672c\u673aIP\uff0cnmcli\u91cd\u542f\uff0c\u5e76\u91cd\u542fnamed\u670d\u52a1</p> </li> <li> <p>nslookup\u786e\u8ba4\u670d\u52a1\u5668\u4fe1\u606f\u662f\u5426\u4e3a\u201cAddress: 192.168.10.10#53\u201d\uff0c\u5373\u7531\u672c\u5730\u670d\u52a1\u5668192.168.10.10\u768453\u7aef\u53e3\u53f7\u8fdb\u884c\u89e3\u6790\uff1b\u82e5\u4e0d\u662f\uff0c\u5219\u91cd\u542f\u7f51\u7edc\u540e\u518d\u8bd5\u4e00\u4e0b\u3002</p> </li> </ul>"},{"location":"Linux/linux/#ip-","title":"\u53cd\u5411\u89e3\u6790\uff08IP-&gt;\u57df\u540d\uff09","text":"<ul> <li> <p>\u533a\u57df\u914d\u7f6e\u6587\u4ef6/etc/named.rfc1912.zones Bash<pre><code>zone \"1.168.192.in-addr.arpa\" IN {\n        type master;\n        file \"192.168.1.arpa\"\n        allow-update {none;};\n};\n</code></pre></p> </li> <li> <p>\u6570\u636e\u914d\u7f6e\u6587\u4ef6/var/named/192.168.1.arpa Bash<pre><code>$TTL 1D\n@       IN SOA  minayo.com.     root.minayao.com. (\n                                        0       ; serial\n                                        1D      ; refresh\n                                        1H      ; retry\n                                        1W      ; expire\n                                        3H )    ; minimum\n        NS      ns.minayao.com.\n        A       192.168.1.10\n        AAAA    ::1\n10      PTR     ns.minayao.com.\n10      PTR     www.minayao.com.\n20      PTR     bbs.minayao.com.\n\u6ce8\uff1aPTR\u4e3a\u6307\u9488\u8bb0\u5f55\uff0c\u4ec5\u7528\u4e8e\u53cd\u5411\u89e3\u6790\u4e2d\uff0cnslookup\u547d\u4ee4\u7528\u4e8e\u68c0\u6d4b\u80fd\u5426\u4eceDNS\u670d\u52a1\u5668\u4e2d\u67e5\u8be2\u5230\u57df\u540d\u4e0eIP\u5730\u5740\u7684\u89e3\u6790\u8bb0\u5f55\n</code></pre></p> </li> </ul>"},{"location":"Linux/linux/#_29","title":"\u90e8\u7f72\u4ece\u670d\u52a1\u5668","text":"<p>\u901a\u8fc7\u90e8\u7f72\u4ece\u670d\u52a1\u5668\u4e0d\u4ec5\u53ef\u4ee5\u51cf\u8f7b\u4e3b\u670d\u52a1\u5668\u7684\u8d1f\u8f7d\u538b\u529b\uff0c\u8fd8\u53ef\u4ee5\u63d0\u5347\u7528\u6237\u7684\u67e5\u8be2\u6548\u7387\u3002</p> <ol> <li> <p>\u4fee\u6539allow-update {192.168.1.20;}; IP\u4e3a\u4ece\u670d\u52a1\u5668\u7684IP\uff0c\u91cd\u542fnamed</p> </li> <li> <p>\u9632\u706b\u5899\u653e\u884cdns Bash<pre><code>[root@minayao named]# iptables -F\n[root@minayao named]# firewall-cmd --permanent --zone=public --add-service=dns\nsuccess\n[root@minayao named]# firewall-cmd --reload \nsuccess\n[root@minayao named]# \n</code></pre></p> </li> <li> <p>\u5728\u4ece\u670d\u52a1\u5668\u4e0a\u5b89\u88c5bind-chroot\uff0c\u5e76\u4fee\u6539\u4e3b\u914d\u7f6e\u6587\u4ef6/etc/named.conf Bash<pre><code>listen-on port 53 { any; };\nallow-query     { any; };\n</code></pre></p> </li> <li> <p>\u5728\u4ece\u670d\u52a1\u5668\u4e2d\u586b\u5199\u4e3b\u670d\u52a1\u5668\u7684IP\u548c\u6293\u53d6\u7684\u533a\u57df\u4fe1\u606f\uff0c\u91cd\u542f\u670d\u52a1 Bash<pre><code>[root@localhost ~]# vim /etc/named.rfc1912.zones \nzone \"minayao.com\" IN {\n        type slave;\n        masters { 192.168.1.10; };\n        file \"slaves/minayao.com.zone\";\n};\nzone \"1.168.192.in-addr.arpa\" IN {\ntype slave;\nmasters { 192.168.1.10; };\nfile \"slaves/192.168.1.arpa\";\n};\n[root@localhost ~]# systemctl restart named\n</code></pre></p> </li> <li> <p>\u68c0\u9a8c\uff0c\u5c06\u4ece\u670d\u52a1\u5668\u7684dns\u53c2\u6570\u6539\u6210192.168.1.20\uff08\u6b64\u5904\u5982\u679c\u662fDHCP\u5206\u914d\u7684IP\u4f1a\u51fa\u95ee\u9898\uff0c\u53ef\u4ee5\u65b0\u5efa\u8fde\u63a5\uff0c\u7528nmcli\u624b\u52a8\u914d\u7f6e\u8fde\u63a5\u7684\u53c2\u6570\uff0c\uff09\u5e76up\u8d77\u6765 Bash<pre><code>[root@192 ~]# nmcli connection add con-name zidong type ethernet ifname ens32 \n[root@192 ~]# nmcli connection modify zidong ipv4.method manual ipv4.addresses 192.168.1.20/24 ipv4.gateway 192.168.1.2 ipv4.dns 192.168.1.20 autoconnect yes\n[root@192 ~]# nmcli connection up zidong \n[root@192 ~]# nslookup \n&gt; www.baidu.com\nServer:     192.168.1.20\nAddress:    192.168.1.20#53\nNon-authoritative answer:\nwww.baidu.com   canonical name = www.a.shifen.com.\nName:   www.a.shifen.com\nAddress: 112.80.248.75\nName:   www.a.shifen.com\nAddress: 112.80.248.76\n&gt; www.minayao.com\nServer:     192.168.1.20\nAddress:    192.168.1.20#53\n\n\nName:   www.minayao.com\nAddress: 192.168.1.10\n</code></pre></p> </li> </ol>"},{"location":"Linux/linux/#_30","title":"\u5b89\u5168\u7684\u52a0\u5bc6\u4f20\u8f93","text":"<ol> <li> <p>\u914d\u7f6e\u4e3b\u670d\u52a1\u5668</p> </li> <li> <p>\u751f\u6210DNS\u5b89\u5168\u5bc6\u94a5 Bash<pre><code>[root@localhost ~]# dnssec-keygen -a HMAC-MD5 -b 128 -n HOST master-slave\n</code></pre></p> </li> <li> <p>\u521b\u5efa\u5bc6\u94a5\u9a8c\u8bc1\u6587\u4ef6transfer.key\uff0c\u5199\u5165\u5bc6\u94a5\u540d\u79f0\u3001\u52a0\u5bc6\u7b97\u6cd5\u3001\u79c1\u94a5\u5b57\u7b26\u7b49\u3002\u66f4\u6539\u6743\u9650\u3001\u5c5e\u7ec4\uff0c\u8bbe\u7f6e\u786c\u94fe\u6307\u5411/etc/transfer.key Bash<pre><code>[root@localhost etc]# vim transfer.key \nkey \"master-slave\" {\n    algorithm hmac-md5;\n    secret \"M7E5DcFHZrOtXR+7qBpBeg==\";\n};\n[root@localhost etc]# chown root:named transfer.key \n[root@localhost etc]# chmod 640 transfer.key \n[root@localhost etc]# ln transfer.key /etc/transfer.key \n</code></pre></p> </li> <li> <p>\u914d\u7f6e\u4e3b\u914d\u7f6e\u6587\u4ef6\uff0c\u5f00\u542fbind\u670d\u52a1\u7684\u5bc6\u94a5\u9a8c\u8bc1\u529f\u80fd Bash<pre><code>[root@localhost ~]# vim /etc/named.conf \ninclude \"/etc/transfer.key\";\noption  \u6dfb\u52a0      allow-transfer  { key master-slave; };\n</code></pre></p> </li> <li> <p>\u914d\u7f6e\u4ece\u670d\u52a1\u5668</p> </li> <li> <p>\u5220\u9664/var/named/slaves\u4e0b\u7684\u6587\u4ef6</p> </li> <li> <p>\u521b\u5efa\u5bc6\u94a5\u6587\u4ef6\uff0c\u5e76\u8bbe\u7f6e\u6743\u9650\uff0c\u540c\u4e3b\u670d\u52a1\u5668 Bash<pre><code>[root@localhost etc]# vim transfer.key \nkey \"master-slave\" {\n    algorithm hmac-md5;\n    secret \"M7E5DcFHZrOtXR+7qBpBeg==\";\n};\n[root@localhost etc]# chown root:named transfer.key \n[root@localhost etc]# chmod 640 transfer.key \n[root@localhost etc]# ln transfer.key /etc/transfer.key \n</code></pre></p> </li> <li> <p>\u914d\u7f6e\u4e3b\u914d\u7f6e\u6587\u4ef6/etc/named.conf Bash<pre><code>include \"/etc/transfer.key\";\nserver 192.168.1.10\n{\n        keys { master-slave; };\n};\n</code></pre></p> </li> <li> <p>\u91cd\u542fnamed\u670d\u52a1\uff0c\u67e5\u770bslaves\u4e0b\u6709\u6570\u636e\u6587\u4ef6\u4e86</p> </li> <li> <p>\u9a8c\u8bc1 Bash<pre><code>[root@localhost slaves]# nslookup www.minayao.com\nServer:     192.168.1.20\nAddress:    192.168.1.20#53\nName:   www.minayao.com\nAddress: 192.168.1.10\n\n\n[root@localhost slaves]# nslookup 192.168.1.10\nServer:     192.168.1.20\nAddress:    192.168.1.20#53\n\n\n10.1.168.192.in-addr.arpa   name = www.minayao.com.\n10.1.168.192.in-addr.arpa   name = ns.minayao.com.\n\n\n[root@localhost slaves]# nslookup 192.168.1.20\nServer:     192.168.1.20\nAddress:    192.168.1.20#53\n\n\n20.1.168.192.in-addr.arpa   name = bbs.minayao.com.\n</code></pre></p> </li> </ol>"},{"location":"Linux/linux/#_31","title":"\u90e8\u7f72\u7f13\u5b58\u670d\u52a1\u5668","text":"Bash<pre><code>cat /etc/named.conf\n\nforwarders  { 114.114.114.114; };\nsystemctl restart named\n\u5c06\u5ba2\u6237\u7aef\u7f51\u7edcdns\u53c2\u6570\u8bbe\u7f6e\u6210\u7f13\u5b58\u670d\u52a1\u5668\u7684\u5730\u5740\n</code></pre> <p>\u5206\u79bb\u89e3\u6790\u6280\u672f</p>"},{"location":"Linux/linux/#10dhcp","title":"10.\u4f7f\u7528DHCP\u52a8\u6001\u7ba1\u7406\u4e3b\u673a\u5730\u5740","text":""},{"location":"Linux/linux/#dhcpd","title":"\u90e8\u7f72dhcpd\u670d\u52a1\u7a0b\u5e8f","text":"<ul> <li>\u5b89\u88c5 Bash<pre><code>[root@www ~]# yum -y install dhcp\n</code></pre></li> <li>\u7f16\u8f91\u914d\u7f6e\u6587\u4ef6/etc/dhcp/dhcpd.conf</li> <li>\u886814-1 dhcpd\u670d\u52a1\u7a0b\u5e8f\u914d\u7f6e\u6587\u4ef6\u4e2d\u4f7f\u7528\u7684\u5e38\u89c1\u53c2\u6570\u4ee5\u53ca\u4f5c\u7528</li> </ul> \u53c2\u6570 \u4f5c\u7528 ddns-update-style \u7c7b\u578b \u5b9a\u4e49DNS\u670d\u52a1\u52a8\u6001\u66f4\u65b0\u7684\u7c7b\u578b\uff0c\u7c7b\u578b\u5305\u62ec\uff1a none\uff08\u4e0d\u652f\u6301\u52a8\u6001\u66f4\u65b0\uff09\u3001interim\uff08\u4e92\u52a8\u66f4\u65b0\u6a21\u5f0f\uff09\u4e0ead-hoc\uff08\u7279\u6b8a\u66f4\u65b0\u6a21\u5f0f\uff09 allow/ignore client-updates \u5141\u8bb8/\u5ffd\u7565\u5ba2\u6237\u7aef\u66f4\u65b0DNS\u8bb0\u5f55 default-lease-time 21600 \u9ed8\u8ba4\u8d85\u65f6\u65f6\u95f4 max-lease-time 43200   \u6700\u5927\u8d85\u65f6\u65f6\u95f4 option domain-name-servers 8.8.8.8 \u5b9a\u4e49DNS\u670d\u52a1\u5668\u5730\u5740 option domain-name \"domain.org\" \u5b9a\u4e49DNS\u57df\u540d range \u5b9a\u4e49\u7528\u4e8e\u5206\u914d\u7684IP\u5730\u5740\u6c60 option subnet-mask \u5b9a\u4e49\u5ba2\u6237\u7aef\u7684\u5b50\u7f51\u63a9\u7801 option routers \u5b9a\u4e49\u5ba2\u6237\u7aef\u7684\u7f51\u5173\u5730\u5740 broadcast-address \u5e7f\u64ad\u5730\u5740 \u5b9a\u4e49\u5ba2\u6237\u7aef\u7684\u5e7f\u64ad\u5730\u5740 ntp-server IP\u5730\u5740 \u5b9a\u4e49\u5ba2\u6237\u7aef\u7684\u7f51\u7edc\u65f6\u95f4\u670d\u52a1\u5668\uff08NTP\uff09 nis-servers IP\u5730\u5740 \u5b9a\u4e49\u5ba2\u6237\u7aef\u7684NIS\u57df\u670d\u52a1\u5668\u7684\u5730\u5740 hardware \u786c\u4ef6\u7c7b\u578b MAC\u5730\u5740 \u6307\u5b9a\u7f51\u5361\u63a5\u53e3\u7684\u7c7b\u578b\u4e0eMAC\u5730\u5740 server-name \u4e3b\u673a\u540d \u5411DHCP\u5ba2\u6237\u7aef\u901a\u77e5DHCP\u670d\u52a1\u5668\u7684\u4e3b\u673a\u540d fixed-address IP\u5730\u5740 \u5c06\u67d0\u4e2a\u56fa\u5b9a\u7684IP\u5730\u5740\u5206\u914d\u7ed9\u6307\u5b9a\u4e3b\u673a time-offset \u504f\u79fb\u5dee \u6307\u5b9a\u5ba2\u6237\u7aef\u4e0e\u683c\u6797\u5c3c\u6cbb\u65f6\u95f4\u7684\u504f\u79fb\u5dee"},{"location":"Linux/linux/#ip","title":"\u81ea\u52a8\u7ba1\u7406IP\u5730\u5740","text":"<p>\u670d\u52a1\u7aef Bash<pre><code># DHCP Server Configuration file.\n#   see /usr/share/doc/dhcp*/dhcpd.conf.example\n#   see dhcpd.conf(5) man page\n#\nddns-update-style none;\nignore client-updates;\nsubnet 192.168.1.0 netmask 255.255.255.0 {\nrange 192.168.1.50 192.168.1.150;\noption subnet-mask 255.255.255.0;\noption routers 192.168.1.10;\noption domain-name \"www.minayao10.com\";\noption domain-name-servers 192.168.1.10;\ndefault-lease-time 21600;\nmax-lease-time 43200;\n}\n</code></pre></p> <p>\u5ba2\u6237\u7aef Bash<pre><code>TYPE=\"Ethernet\"\nBOOTPROTO=\"dhcp\"\nONBOOT=\"yes\"\n</code></pre></p> <ul> <li>\u886814-4 dhcpd\u670d\u52a1\u7a0b\u5e8f\u914d\u7f6e\u6587\u4ef6\u4e2d\u4f7f\u7528\u7684\u53c2\u6570\u4ee5\u53ca\u4f5c\u7528</li> </ul> \u53c2\u6570 \u4f5c\u7528 ddns-update-style none; \u8bbe\u7f6eDNS\u670d\u52a1\u4e0d\u81ea\u52a8\u8fdb\u884c\u52a8\u6001\u66f4\u65b0 ignore client-updates; \u5ffd\u7565\u5ba2\u6237\u7aef\u66f4\u65b0DNS\u8bb0\u5f55 subnet 192.168.10.0 netmask 255.255.255.0 { \u4f5c\u7528\u57df\u4e3a192.168.10.0/24\u7f51\u6bb5 range 192.168.10.50 192.168.10.150; IP\u5730\u5740\u6c60\u4e3a192.168.10.50-150\uff08\u7ea6100\u4e2aIP\u5730\u5740\uff09 option subnet-mask 255.255.255.0; \u5b9a\u4e49\u5ba2\u6237\u7aef\u9ed8\u8ba4\u7684\u5b50\u7f51\u63a9\u7801 option routers 192.168.10.1; \u5b9a\u4e49\u5ba2\u6237\u7aef\u7684\u7f51\u5173\u5730\u5740 option domain-name \"linuxprobe.com\"; \u5b9a\u4e49\u9ed8\u8ba4\u7684\u641c\u7d22\u57df option domain-name-servers 192.168.10.1; \u5b9a\u4e49\u5ba2\u6237\u7aef\u7684DNS\u5730\u5740 default-lease-time 21600; \u5b9a\u4e49\u9ed8\u8ba4\u79df\u7ea6\u65f6\u95f4\uff08\u5355\u4f4d\uff1a\u79d2\uff09 max-lease-time 43200; \u5b9a\u4e49\u6700\u5927\u9884\u7ea6\u65f6\u95f4\uff08\u5355\u4f4d\uff1a\u79d2\uff09 } \u7ed3\u675f\u7b26 Bash<pre><code>[root@192 ~]# systemctl restart dhcpd\n[root@192 ~]# systemctl enable --now dhcpd\n[root@192 ~]# firewall-cmd --permanent --zone=public --add-service=dhcp\n[root@192 ~]# firewall-cmd --reload \n</code></pre>"},{"location":"Linux/linux/#ip_1","title":"\u5206\u914d\u56fa\u5b9aIP\u5730\u5740","text":"Bash<pre><code># DHCP Server Configuration file.\n#   see /usr/share/doc/dhcp*/dhcpd.conf.example\n#   see dhcpd.conf(5) man page\n#\nddns-update-style none;\nignore client-updates;\nsubnet 192.168.1.0 netmask 255.255.255.0 {\nrange 192.168.1.50 192.168.1.150;\noption subnet-mask 255.255.255.0;\noption routers 192.168.1.10;\noption domain-name \"www.minayao10.com\";\noption domain-name-servers 192.168.1.10;\ndefault-lease-time 21600;\nmax-lease-time 43200;\nhost www.minayao10.com {\nhardware ethernet 00:0c:29:76:8b:a0;\nfixed-address 192.168.1.100;\n}\n}\n</code></pre>"},{"location":"Linux/linux/#11postfixdovecot","title":"11.\u4f7f\u7528Postfix\u4e0eDovecot\u90e8\u7f72\u90ae\u4ef6\u7cfb\u7edf","text":""},{"location":"Linux/linux/#_32","title":"\u7535\u5b50\u90ae\u4ef6\u7cfb\u7edf","text":"<p>\u7535\u5b50\u90ae\u4ef6\u7cfb\u7edf\u57fa\u4e8e\u90ae\u4ef6\u534f\u8bae\u6765\u5b8c\u6210\u7535\u5b50\u90ae\u4ef6\u7684\u4f20\u8f93\uff0c\u5e38\u89c1\u7684\u90ae\u4ef6\u534f\u8bae\u6709\u4e0b\u9762\u8fd9\u4e9b\u3002</p> <p>\u7b80\u5355\u90ae\u4ef6\u4f20\u8f93\u534f\u8bae\uff08Simple Mail Transfer Protocol\uff0cSMTP\uff09\uff1a\u7528\u4e8e\u53d1\u9001\u548c\u4e2d\u8f6c\u53d1\u51fa\u7684\u7535\u5b50\u90ae\u4ef6\uff0c\u5360\u7528\u670d\u52a1\u5668\u7684TCP/25\u7aef\u53e3\u3002</p> <p>\u90ae\u5c40\u534f\u8bae\u7248\u672c3\uff08Post Office Protocol 3\uff09\uff1a\u7528\u4e8e\u5c06\u7535\u5b50\u90ae\u4ef6\u5b58\u50a8\u5230\u672c\u5730\u4e3b\u673a\uff0c\u5360\u7528\u670d\u52a1\u5668\u7684TCP/110\u7aef\u53e3\u3002</p> <p>Internet\u6d88\u606f\u8bbf\u95ee\u534f\u8bae\u7248\u672c4\uff08Internet Message Access Protocol 4\uff09\uff1a\u7528\u4e8e\u5728\u672c\u5730\u4e3b\u673a\u4e0a\u8bbf\u95ee\u90ae\u4ef6\uff0c\u5360\u7528\u670d\u52a1\u5668\u7684TCP/143\u7aef\u53e3\u3002</p> <p>\u5927\u5bb6\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u90e8\u7f72\u4f01\u4e1a\u7ea7\u7684\u7535\u5b50\u90ae\u4ef6\u7cfb\u7edf\u65f6\uff0c\u67094\u4e2a\u6ce8\u610f\u4e8b\u9879\u8bf7\u7559\u610f\u3002</p> <p>\u6dfb\u52a0\u53cd\u5783\u573e\u4e0e\u53cd\u75c5\u6bd2\u6a21\u5757\uff1a\u5b83\u80fd\u591f\u5f88\u6709\u6548\u5730\u963b\u6b62\u5783\u573e\u90ae\u4ef6\u6216\u75c5\u6bd2\u90ae\u4ef6\u5bf9\u4f01\u4e1a\u4fe1\u7bb1\u7684\u5e72\u6270\u3002</p> <p>\u5bf9\u90ae\u4ef6\u52a0\u5bc6\uff1a\u53ef\u6709\u6548\u4fdd\u62a4\u90ae\u4ef6\u5185\u5bb9\u4e0d\u88ab\u9ed1\u5ba2\u76d7\u53d6\u548c\u7be1\u6539\u3002</p> <p>\u6dfb\u52a0\u90ae\u4ef6\u76d1\u63a7\u5ba1\u6838\u6a21\u5757\uff1a\u53ef\u6709\u6548\u5730\u76d1\u63a7\u4f01\u4e1a\u5168\u4f53\u5458\u5de5\u7684\u90ae\u4ef6\u4e2d\u662f\u5426\u6709\u654f\u611f\u8bcd\uff0c\u662f\u5426\u6709\u900f\u9732\u4f01\u4e1a\u8d44\u6599\u7b49\u8fdd\u89c4\u884c\u4e3a\u3002</p> <p>\u4fdd\u969c\u7a33\u5b9a\u6027\uff1a\u7535\u5b50\u90ae\u4ef6\u7cfb\u7edf\u7684\u7a33\u5b9a\u6027\u81f3\u5173\u91cd\u8981\uff0c\u8fd0\u7ef4\u4eba\u5458\u5e94\u505a\u5230\u4fdd\u8bc1\u7535\u5b50\u90ae\u4ef6\u7cfb\u7edf\u7684\u7a33\u5b9a\u8fd0\u884c\uff0c\u5e76\u53ca\u65f6\u505a\u597d\u9632\u8303\u5206\u5e03\u5f0f\u62d2\u7edd\u670d\u52a1\uff08Distributed Denial of Service\uff0cDDoS\uff09\u653b\u51fb\u7684\u51c6\u5907\u3002</p>"},{"location":"Linux/linux/#_33","title":"\u90e8\u7f72\u57fa\u7840\u7684\u7535\u5b50\u90ae\u4ef6\u7cfb\u7edf","text":"<ol> <li> <p>\u914d\u7f6e\u670d\u52a1\u5668\u4e3b\u673a\u540d\uff0c\u670d\u52a1\u5668\u4e3b\u673a\u540d\u9700\u8981\u548c\u53d1\u4fe1\u57df\u540d\u4fdd\u6301\u4e00\u81f4</p> </li> <li> <p>\u6e05\u7a7a\u9632\u706b\u5899\uff0c\u5141\u8bb8DNS\u534f\u8bae</p> </li> <li> <p>\u4e3a\u7535\u5b50\u90ae\u4ef6\u7cfb\u7edf\u63d0\u4f9b\u57df\u540d\u89e3\u6790\uff08bind-chroot\uff09</p> </li> </ol> Bash<pre><code>1.\u4e3b\u914d\u7f6e\u6587\u4ef6/etc/named.conf\noptions {\n    listen-on port 53 { any; };    \u2b05here\n    listen-on-v6 port 53 { ::1; };\n    directory   \"/var/named\";\n    dump-file   \"/var/named/data/cache_dump.db\";\n    statistics-file \"/var/named/data/named_stats.txt\";\n    memstatistics-file \"/var/named/data/named_mem_stats.txt\";\n    recursing-file  \"/var/named/data/named.recursing\";\n    secroots-file   \"/var/named/data/named.secroots\";\n    allow-query     { any; };   \u2b05here\n\n2.\u533a\u57df\u914d\u7f6e\u6587\u4ef6/etc/named.rfc1912.zones\n  zone \"minayao.com\" IN {\n    type master;\n    file \"minayao.com.zone\";\n    allow-update { none; };\n  };\n3.\u57df\u540d\u6570\u636e\u6587\u4ef6/var/named/minayao.com.zone\n$TTL 1D\n@   IN SOA  minayao.com. root.minayao.com. (\n                    0   ; serial\n                    1D  ; refresh\n                    1H  ; retry\n                    1W  ; expire\n                    3H )    ; minimum\n    NS  ns.minayao.com.\nns  IN A    192.168.10.10\n@   IN MX 10    mail.minayao.com.\nmail    IN A    192.168.10.10\n4.\u91cd\u542fbind\uff08named\uff09\n5.\u5c1d\u8bd5ping mail.minayao.com,\u82e5\u80fd\u89e3\u6790\u5730\u5740\u5219\u6b63\u786e\n</code></pre>"},{"location":"Linux/linux/#postfix","title":"\u914d\u7f6ePostfix\u670d\u52a1\u7a0b\u5e8f","text":"<ol> <li>\u5b89\u88c5postfix Bash<pre><code>[root@mail ~]# yum -y install postfix.x86_64\n</code></pre></li> <li>\u914d\u7f6epostfix\u670d\u52a1</li> </ol> <p>Postfix\u670d\u52a1\u7a0b\u5e8f\u4e3b\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684\u91cd\u8981\u53c2\u6570</p> \u53c2\u6570 \u4f5c\u7528 myhostname \u90ae\u5c40\u7cfb\u7edf\u7684\u4e3b\u673a\u540d mydomain \u90ae\u5c40\u7cfb\u7edf\u7684\u57df\u540d myorigin \u4ece\u672c\u673a\u53d1\u51fa\u90ae\u4ef6\u7684\u57df\u540d\u540d\u79f0 inet_interfaces \u76d1\u542c\u7684\u7f51\u5361\u63a5\u53e3 mydestination \u53ef\u63a5\u6536\u90ae\u4ef6\u7684\u4e3b\u673a\u540d\u6216\u57df\u540d mynetworks \u8bbe\u7f6e\u53ef\u8f6c\u53d1\u54ea\u4e9b\u4e3b\u673a\u7684\u90ae\u4ef6 relay_domains \u8bbe\u7f6e\u53ef\u8f6c\u53d1\u54ea\u4e9b\u7f51\u57df\u7684\u90ae\u4ef6 Bash<pre><code>[root@mail ~]# vim /etc/postfix/main.cf \nmyhostname = mail.minayao.com\nmydomain = minayao.com\nmyorigin = $mydomain\ninet_interfaces = all\nmydestination = $myhostname, $mydomain\n</code></pre> <ol> <li>\u521b\u5efa\u90ae\u4ef6\u7cfb\u7edf\u767b\u5f55\u8d26\u6237 Bash<pre><code>[root@mail ~]# useradd gm\n[root@mail ~]# echo qqqq | passwd --stdin gm\n[root@mail ~]# systemctl restart postfix.service \n[root@mail ~]# systemctl enable --now postfix.service \n[root@mail ~]# systemctl status postfix.service \n</code></pre></li> </ol>"},{"location":"Linux/linux/#dovecot","title":"\u914d\u7f6eDovecot\u670d\u52a1\u7a0b\u5e8f","text":"<ol> <li> <p>\u5b89\u88c5dovecot Bash<pre><code>[root@mail ~]# yum -y install dovecot.x86_64\n</code></pre></p> </li> <li> <p>\u914d\u7f6e\u90e8\u7f72Dovecot\u670d\u52a1\u7a0b\u5e8f Bash<pre><code>[root@mail ~]# vim /etc/dovecot/dovecot.conf \nprotocols = imap pop3 lmtp\ndisable_plaintext_auth = no\nlogin_trusted_networks = 192.168.10.10/24\n</code></pre></p> </li> <li>\u914d\u7f6e\u90ae\u4ef6\u683c\u5f0f\u4e0e\u5b58\u50a8\u8def\u5f84 Bash<pre><code>[root@mail ~]# vim /etc/dovecot/conf.d/10-mail.conf \nmail_location = mbox:~/mail:INBOX=/var/mail/%u\n[root@mail ~]# su - gm\n[gm@mail ~]#  mkdir -p mail/.imap/INBOX\n[root@mail ~]# systemctl restart dovecot\n[root@mail ~]# systemctl enable --now dovecot\n</code></pre></li> </ol>"},{"location":"Linux/linux/#_34","title":"\u5ba2\u6237\u4f7f\u7528\u7535\u5b50\u90ae\u4ef6\u65b0\u7cfb\u7edf","text":"<ol> <li> <p>\u914d\u7f6eIP\u5728\u540c\u4e00\u7f51\u6bb5\uff0cDNS\u4e3a\u90ae\u4ef6\u7cfb\u7edf\u7684IP</p> </li> <li> <p>\u4f7f\u7528\u5ba2\u6237\u7aef(\u5982outlook\u3001thunderbird\u7b49) Bash<pre><code>#1.\u5b89\u88c5thunderbird\nyum -y install thunderbird\n</code></pre></p> </li> <li>\u67e5\u770b\u90ae\u4ef6mailx</li> </ol>"},{"location":"Linux/linux/#_35","title":"\u8bbe\u7f6e\u7528\u6237\u522b\u540d\u90ae\u7bb1","text":""},{"location":"Linux/linux/#12iscsi","title":"12.\u4f7f\u7528ISCSI\u670d\u52a1\u90e8\u7f72\u7f51\u7edc\u5b58\u50a8","text":""},{"location":"Linux/linux/#_36","title":"\u65e0\u4eba\u503c\u5b88\u5b89\u88c5\u7cfb\u7edf","text":"<ol> <li>\u5b89\u88c5\u914d\u7f6edhcp Bash<pre><code>[root@192 yum.repos.d]# yum -y install dhcp\n[root@192 yum.repos.d]# vim /etc/dhcp/dhcpd.conf\nallow booting;\nallow bootp;\nddns-update-style none;\nignore client-updates;\nsubnet 192.168.10.0 netmask 255.255.255.0 {\n        option subnet-mask                 255.255.255.0;\n        option domain-name-servers         192.168.10.10;\n        range dynamic-bootp 192.168.10.100 192.168.10.200;\n        default-lease-time                 21600;\n        max-lease-time                     43200;\n        next-server                        192.168.10.10;\n        filename                           \"pxelinux.0\";\n}\n</code></pre></li> <li> <p>\u5b89\u88c5TFTP\u5e76\u914d\u7f6e Bash<pre><code># \u5b89\u88c5\n[root@192 yum.repos.d]# yum -y install tftp-server xinetd\n# \u914d\u7f6e\u5f00\u542fTFTP\u670d\u52a1\u7a0b\u5e8f\n[root@192 yum.repos.d]# vim /etc/xinetd.d/tftp\n# default: off\n# description: The tftp server serves files using the trivial file transfer \\\n#   protocol.  The tftp protocol is often used to boot diskless \\\n#   workstations, download configuration files to network-aware printers, \\\n#   and to start the installation process for some operating systems.\nservice tftp\n{\n    socket_type     = dgram\n    protocol        = udp\n    wait            = yes\n    user            = root\n    server          = /usr/sbin/in.tftpd\n    server_args     = -s /var/lib/tftpboot\n    #disable            = yes\n    disable         = no\n    per_source      = 11\n    cps         = 100 2\n    flags           = IPv4\n}\n</code></pre></p> </li> <li> <p>\u914d\u7f6esyslinux\u670d\u52a1\u7a0b\u5e8f Bash<pre><code># \u5b89\u88c5\n[root@192 yum.repos.d]# yum -y install syslinux\n# \u914d\u7f6e\n</code></pre> updating......................</p> </li> </ol>"},{"location":"Linux/%E4%B8%89%E5%89%91%E5%AE%A2/","title":"linux\u4e09\u5251\u5ba2","text":""},{"location":"Linux/%E4%B8%89%E5%89%91%E5%AE%A2/#_1","title":"\u6b63\u5219\u8868\u8fbe\u5f0f","text":"<ul> <li> <p>\u57fa\u672c\u6b63\u5219\u8868\u8fbe\u5f0f BRE\u96c6\u5408</p> </li> <li> \u7b26\u53f7 \u4f5c\u7528 ^ ^abc,\u4ee5abc\u5f00\u5934\u7684\u884c $ abc$,\u4ee5abc\u7ed3\u5c3e\u7684\u884c ^$ \u7a7a\u884c . \u6709\u4e14\u53ea\u6709\u4e00\u4e2a\u5b57\u7b26 \\ \u8f6c\u4e49\u5b57\u7b26\uff0c.\u8868\u793a\u5c0f\u6570\u70b9. * \u5339\u914d\u524d\u4e00\u4e2a\u5b57\u7b260\u6b21\u6216\u591a\u6b21 .* \u5339\u914d\u6240\u6709 ^.* \u4efb\u610f\u591a\u4e2a\u5b57\u7b26\u5f00\u5934\u7684 .*$ \u4efb\u610f\u591a\u4e2a\u5b57\u7b26\u7ed3\u5c3e\u7684 [abc] a\u6216b\u6216c [^abc] \u4e0d\u53d6a\u6216b\u6216c\uff0c\u9664\u4e86abc\u7684\u5b57\u7b26 </li> <li> <p>\u6269\u5c55\u6b63\u5219\u8868\u8fbe\u5f0fERE\u96c6\u5408</p> </li> <li> \u7b26\u53f7 \u4f5c\u7528 + \u5339\u914d\u524d\u4e00\u4e2a\u5b57\u7b26\u4e00\u6b21\u6216\u591a\u6b21 [:/]+ \u5339\u914d\u62ec\u53f7\u5185\u7684\uff1a\u6216\u8005/\u4e00\u6b21\u6216\u591a\u6b21 ? \u5339\u914d\u524d\u4e00\u4e2a\u5b57\u7b260\u62161\u6b21 | \u6216\u8005\uff0c\u540c\u65f6\u8fc7\u6ee4\u591a\u4e2a\u5b57\u7b26\u4e32 () \u5206\u7ec4\u8fc7\u6ee4\uff0c\u88ab\u62ec\u8d77\u6765\u7684\u5185\u5bb9\u662f\u4e00\u4e2a\u6574\u4f53 a(n,m) \u524d\u4e00\u4e2a\u5b57\u7b26\u6700\u5c11n\u6b21\uff0c\u6700\u591am\u6b21 a(n,) \u524d\u4e00\u4e2a\u5b57\u7b26\u6700\u5c11nci a(,m) \u524d\u4e00\u4e2a\u5b57\u7b26\u6700\u591am\u6b21 </li> </ul>"},{"location":"Linux/%E4%B8%89%E5%89%91%E5%AE%A2/#grep","title":"grep","text":"<p>\u64c5\u957f\u5355\u7eaf\u7684\u67e5\u627e\u6216\u5339\u914d\u6587\u672c\u7684\u5185\u5bb9</p>"},{"location":"Linux/%E4%B8%89%E5%89%91%E5%AE%A2/#sed","title":"sed","text":"<p>\u66f4\u9002\u5408\u7f16\u8f91\u3001\u5904\u7406\u5339\u914d\u5230\u7684\u6587\u672c\u5185\u5bb9</p> <ul> <li> \u547d\u4ee4 \u4f5c\u7528 -i \u5c06\u4fee\u6539\u5199\u5165\u78c1\u76d8,\u4e0d\u52a0-i\u53ea\u662f\u4fee\u6539\u5185\u5b58\u4e2d\u7684\u6570\u636e -n \u53ea\u8f93\u51fa\u4fee\u6539\u7684\u5185\u5bb9\uff0c\u901a\u5e38\u8981\u548c\u5185\u7f6e\u547d\u4ee4p\u4e00\u8d77\u4f7f\u7528 -r \u652f\u6301\u6269\u5c55\u6b63\u5219\u8868\u8fbe\u5f0f -e \u591a\u6b21\u7f16\u8f91\uff0c\u4e0d\u9700\u8981\u7ba1\u9053 </li> <li> \u5185\u7f6e\u547d\u4ee4 \u4f5c\u7528 a \u884c\u540e\u63d2\u5165 i \u884c\u524d\u63d2\u5165 d \u5220\u9664 p \u6253\u5370 s \u66ff\u6362 </li> </ul> <p>eg.\u83b7\u53d6IP\u5730\u5740</p> Bash<pre><code>  [root@localhost minan]# ifconfig ens33\n  ens33: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500\n          inet 192.168.10.10  netmask 255.255.255.0  broadcast 192.168.10.255\n          inet6 fe80::5102:4887:698b:945e  prefixlen 64  scopeid 0x20&lt;link&gt;\n          ether 00:0c:29:1a:46:cd  txqueuelen 1000  (Ethernet)\n          RX packets 10090  bytes 855551 (835.4 KiB)\n          RX errors 0  dropped 0  overruns 0  frame 0\n          TX packets 4713  bytes 793026 (774.4 KiB)\n          TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n\n  [root@localhost minan]# ifconfig ens33 | sed -e \"2s/^.*inet//\" -e \"2s/net.*$//p\" -n\n   192.168.10.10\n\n  [root@localhost minan]# ifconfig ens33\n  ens33: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500\n          inet 192.168.10.10  netmask 255.255.255.0  broadcast 192.168.10.255\n          inet6 fe80::5102:4887:698b:945e  prefixlen 64  scopeid 0x20&lt;link&gt;\n          ether 00:0c:29:1a:46:cd  txqueuelen 1000  (Ethernet)\n          RX packets 8008  bytes 720357 (703.4 KiB)\n          RX errors 0  dropped 0  overruns 0  frame 0\n          TX packets 2474  bytes 220362 (215.1 KiB)\n          TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n\n  [root@localhost minan]# ifconfig ens33 | sed  '2s/^.*inet[[:space:]]//;2s/net.*$//p' -n\n  192.168.10.10  \n\n  #\u627e\u51fa\u7cfb\u7edf\u7684\u5927\u7248\u672c\uff08sed&amp;awk\uff09\n  [root@localhost minan]# cat /etc/redhat-release \n  CentOS Linux release 7.6.1810 (Core) \n\n  [root@localhost minan]# cat /etc/redhat-release | sed 's/^.*ease[[:space:]]//' \n  7.6.1810 (Core) \n  [root@localhost minan]# cat /etc/redhat-release | sed 's/^.*ease[[:space:]]//' | awk -F \".\" '{print $1}'\n  7\n\n  #eg1\u53bb\u5934\u53bb\u5c3e\n  [root@localhost minan]# cat /etc/redhat-release \n  CentOS Linux release        fsgbksdghlskdj;7.6.1810 (Core) \n  [root@localhost minan]# sed -r 's/^.*ease[[:space:]]*//'  /etc/redhat-release | sed -r 's/([.]).*//'\n  fsgbksdghlskdj;7\n\n  [root@localhost minan]# cat /etc/redhat-release \n  CentOS Linux release        fsgbksdghlskdj;7.6.1810 (Core) \n  [root@localhost minan]# sed -r 's/^.*[[:space:]]*dj;//'  /etc/redhat-release | sed -r 's/([.]).*//'\n  7\n\n\n  [root@localhost minan]# sed -r 's/^.*[[:space:]]*dj;//'  /etc/redhat-release | sed -r 's/([^.]).*/\\1/'\n  7\n</code></pre> <p>eg.\u6b63\u5219\u5206\u7ec4</p> Bash<pre><code>  ###\u4fee\u6539\u540e\n  [root@localhost minan]# sed -r 's/(^.)/@\\1/g' test1.cfg \n  @#version=DEVEL\n  @# System authorization information\n  @auth --enableshadow --passalgo=sha512\n  @# Use CDROM installation media\n  @cdrom\n  @# Use graphical install\n  @graphical\n  @# Run the Setup Agent on first boot\n  @firstboot --enable\n  @ignoredisk --only-use=sda\n\n  #\u6e90\u6587\u4ef6\n  [root@localhost minan]# cat test1.cfg \n  #version=DEVEL\n  # System authorization information\n  auth --enableshadow --passalgo=sha512\n  # Use CDROM installation media\n  cdrom\n  # Use graphical install\n  graphical\n  # Run the Setup Agent on first boot\n  firstboot --enable\n  ignoredisk --only-use=sda\n</code></pre>"},{"location":"Linux/%E4%B8%89%E5%89%91%E5%AE%A2/#awk","title":"awk","text":"<p>\u66f4\u9002\u5408\u683c\u5f0f\u5316\u5904\u7406\u6587\u672c\u5185\u5bb9\uff0c\u5bf9\u6587\u672c\u8fdb\u884c\u590d\u6742\u5904\u7406</p> <p>\u7528\u6cd5\uff1aawk  [option\u9009\u9879] '\u6a21\u5f0f{\u52a8\u4f5c} \u6a21\u5f0f{\u52a8\u4f5c} \u6a21\u5f0f{\u52a8\u4f5c} \u6a21\u5f0f{\u52a8\u4f5c}'  \u6587\u4ef6</p>"},{"location":"Linux/%E4%B8%89%E5%89%91%E5%AE%A2/#awk_1","title":"awk\u57fa\u7840","text":"<p>awk\u5fc5\u987b\u5916\u5c42\u5355\u5f15\u53f7\uff0c\u5185\u5c42\u53cc\u5f15\u53f7</p>"},{"location":"Linux/%E4%B8%89%E5%89%91%E5%AE%A2/#awk_2","title":"awk\u5206\u9694\u7b26","text":"<p>awk\u9ed8\u8ba4\u4ee5\u7a7a\u683c\u4e3a\u5206\u9694\u7b26\uff0c\u591a\u4e2a\u7a7a\u683c\u4e5f\u8bc6\u522b\u4e3a\u4e00\u4e2a</p> <p>awk\u7684\u5206\u9694\u7b26\u6709\u4e24\u79cd</p> <ol> <li>\u8f93\u5165\u5206\u9694\u7b26\uff0c\u9ed8\u8ba4\u7a7a\u683c\uff0c\u53d8\u91cf\u540dFS</li> </ol> Bash<pre><code>  [root@localhost minan]# awk -v FS=\":\" '{print $1,$NF}' passwd.txt\n  [root@localhost minan]# awk -F \":\" '{print $1,$NF}' passwd.txt \n</code></pre> <ol> <li> <p>\u8f93\u51fa\u5206\u9694\u7b26\uff0cOFS Bash<pre><code>  [root@localhost minan]# awk -F \":\" -v OFS=\"------\" '{print $1,$NF}' passwd.txt \n  root------/bin/bash\n  bin------/sbin/nologin\n  daemon------/sbin/nologin\n  adm------/sbin/nologin\n  lp------/sbin/nologin\n  [root@localhost minan]# awk -F \":\" -v OFS=\"\\t------\" '{print $1,$NF}' passwd.txt \n  root  ------/bin/bash\n  bin   ------/sbin/nologin\n  daemon    ------/sbin/nologin\n  adm   ------/sbin/nologin\n  lp    ------/sbin/nologin\n</code></pre></p> </li> <li> <p>\u6362\u884c\u7b26ORS(\u8f93\u51fa)/RS(\u8f93\u5165)</p> </li> </ol> Bash<pre><code>  [root@localhost minan]# awk -F \":\" -v ORS=\"\\t/\u4f5c\u8005:minan\\n\" -v OFS=\"\\t------\" '{print $1,$NF}' passwd.txt \n  root  ------/bin/bash /\u4f5c\u8005:minan\n  bin   ------/sbin/nologin /\u4f5c\u8005:minan\n  daemon    ------/sbin/nologin /\u4f5c\u8005:minan\n  adm   ------/sbin/nologin /\u4f5c\u8005:minan\n  lp    ------/sbin/nologin /\u4f5c\u8005:minan\n</code></pre>"},{"location":"Linux/%E4%B8%89%E5%89%91%E5%AE%A2/#awk_3","title":"awk\u53d8\u91cf","text":"<p>$0:\u6574\u884c</p> <p>$NF:\u5f53\u524d\u5206\u5272\u540e\u7684\u6700\u540e\u4e00\u5217</p> <p>$(NF-1):\u5012\u6570\u7b2c\u4e8c\u5217</p> <p>\u5185\u7f6e\u53d8\u91cf</p> <ul> <li> \u5185\u7f6e\u53d8\u91cf \u89e3\u91ca $n \u6307\u5b9a\u5206\u9694\u7b26\u540e\u7684\u7b2cn\u4e2a\u5b57\u6bb5 $0 \u5b8c\u6574\u7684\u8f93\u5165\u8bb0\u5f55 FS \u5b57\u6bb5\u5206\u9694\u7b26\uff0c\u9ed8\u8ba4\u662f\u7a7a\u683c NF \u5206\u5272\u540e\uff0c\u5f53\u524d\u884c\u5171\u6709\u7684\u5b57\u6bb5\u6570 NR \u5f53\u524d\u8bb0\u5f55\u6570\uff0c\u884c\u6570 OFS \u8f93\u51fa\u5206\u9694\u7b26 RS \u8f93\u5165\u8bb0\u5f55\u5206\u9694\u7b26\uff08\u8f93\u5165\u6362\u884c\u7b26\uff09\uff0c\u6307\u5b9a\u8f93\u5165\u65f6\u7684\u6362\u884c\u7b26 ORS \u8f93\u51fa\u8bb0\u5f55\u5206\u9694\u7b26\uff08\u8f93\u51fa\u6362\u884c\u7b26\uff09\uff0c\u8f93\u51fa\u65f6\u7528\u6307\u5b9a\u7b26\u53f7\u4ee3\u66ff\u6362\u884c\u7b26 FILENAME \u5f53\u524d\u6587\u4ef6\u540d ARGC \u547d\u4ee4\u884c\u53c2\u6570\u7684\u4e2a\u6570 ARGV \u6570\u7ec4\uff0c\u4fdd\u5b58\u7684\u662f\u547d\u4ee4\u884c\u6240\u7ed9\u7684\u53c2\u6570 \u66f4\u591a\u67e5\u770bman\u624b\u518c man awk </li> <li> <p>ARGC&amp;ARGV</p> </li> </ul> Bash<pre><code>  [root@localhost minan]# awk -v ORS=\"\\tauthor:minan\\n\" 'BEGIN{print \"lets go&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;\"}  NR==1{print \"\u5f53\u524d\u5171\u6709\"ARGC\"\u4e2a\u53c2\u6570\",\"1:\"ARGV[0],\"2:\"ARGV[1]}' test.cfg\n  lets go&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;   author:minan\n  \u5f53\u524d\u5171\u67092\u4e2a\u53c2\u6570 1:awk 2:test.cfg author:minan\n</code></pre> <p>\u81ea\u5b9a\u4e49\u53d8\u91cfawk -v</p> Bash<pre><code>  [root@localhost minan]# awk -v MA=\"minan\" 'BEGIN{print \"My name is \"MA}'\n  My name is minan\n</code></pre> <p>awk\u53c2\u6570</p> <ul> <li> \u53c2\u6570 \u89e3\u91ca -F \u6307\u5b9a\u5206\u9694\u7b26 -v \u5b9a\u4e49\u6216\u4fee\u6539\u4e00\u4e2aawk\u7684\u5185\u90e8\u53d8\u91cf -f \u4ece\u811a\u672c\u6587\u4ef6\u4e2d\u8bfb\u53d6awk\u547d\u4ee4 </li> </ul>"},{"location":"Linux/%E4%B8%89%E5%89%91%E5%AE%A2/#awk_4","title":"awk\u683c\u5f0f\u5316\u8f93\u51fa","text":"<ul> <li>print</li> <li> <p>printf</p> </li> <li> <p>\u4e0eprint\u4e0d\u540c\uff0cprintf \u9700\u8981\u6307\u5b9aformat</p> </li> <li> <p>format\u7528\u4e8e\u6307\u5b9a\u540e\u9762\u6bcf\u4e2aitem\u7684\u8f93\u51fa\u683c\u5f0f</p> </li> <li> <p>printf\u4e0d\u4f1a\u81ea\u52a8\u6253\u5370\u6362\u884c\u7b26\uff0c\u9700\u8981\u6dfb\u52a0\u6362\u884c\u7b26\\n</p> </li> </ul> Bash<pre><code>format\u683c\u5f0f\u7684\u6307\u793a\u7b26\u90fd\u4ee5%\u5f00\u5934\uff0c\u540e\u9762\u8ddf\u4e00\u4e2a\u5b57\u7b26\uff1a\n%c\uff1a\u663e\u793a\u5b57\u7b26\u7684ASCII\u7801\n%d,%i\uff1a\u5341\u8fdb\u5236\u6574\u6570\n%e,%E\uff1a\u79d1\u5b66\u8ba1\u6570\u6cd5\u663e\u793a\u6570\u503c\n%f\uff1a\u663e\u793a\u6d6e\u70b9\u6570\n%g,%G\uff1a\u4ee5\u79d1\u5b66\u8ba1\u6570\u6cd5\u7684\u683c\u5f0f\u6216\u6d6e\u70b9\u6570\u7684\u683c\u5f0f\u663e\u793a\u6570\u503c\n%s\uff1a\u663e\u793a\u5b57\u7b26\u4e32\n%u\uff1a\u65e0\u7b26\u53f7\u6574\u6570\n%%\uff1a\u663e\u793a%\u81ea\u8eab\n\nprintf\u4fee\u9970\u7b26\uff1a\n-\uff1a\u5de6\u5bf9\u9f50\uff1b\u9ed8\u8ba4\u53f3\u5bf9\u9f50\n+\uff1a\u663e\u793a\u6570\u503c\u7b26\u53f7\uff0c\u5982printf  \"%+d\"\n</code></pre> Bash<pre><code>   [root@localhost minan]# awk -v ORS=\"\\tauthor:minan\\n\" 'BEGIN{print \"lets go&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;\"}  NR==1{printf \"\u5f53\u524d\u5171\u6709%d\u4e2a\u53c2\u6570:\\n1:\\t%s\\n2:\\t%s\\n\",ARGC,ARGV[0],ARGV[1]}' test.cfg\n   lets go&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;  author:minan\n   \u5f53\u524d\u5171\u67092\u4e2a\u53c2\u6570:\n   1:   awk\n   2:   test.cfg\n</code></pre>"},{"location":"Linux/%E4%B8%89%E5%89%91%E5%AE%A2/#awk_5","title":"awk\u6a21\u5f0f","text":"<ul> <li> <p>\u7a7a\u6a21\u5f0f\u5339\u914d\u6bcf\u4e00\u884c\u8fdb\u884c\u5904\u7406</p> </li> <li> <p>BEGIN\u6a21\u5f0f\uff1a\u5904\u7406\u6587\u672c\u4e4b\u524d\u9700\u8981\u6267\u884c\u7684\u52a8\u4f5c</p> </li> </ul> Bash<pre><code>    [root@localhost minan]# awk -v ORS=\"\\tauthor:minan\\n\" 'BEGIN{print \"lets go&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;\"}  NR==1{print \"\u5f53\u524d\u5171\u6709\"ARGC\"\u4e2a\u53c2\u6570\",\"1:\"ARGV[0],\"2:\"ARGV[1]}' test.cfg\n    lets go&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; author:minan\n    \u5f53\u524d\u5171\u67092\u4e2a\u53c2\u6570 1:awk 2:test.cfg   author:minan\n</code></pre> <ul> <li>END\u6a21\u5f0f\uff1a\u5904\u7406\u5b8c\u6240\u6709\u7684\u884c\u4e4b\u540e\u9700\u8981\u6267\u884c\u7684\u52a8\u4f5c</li> </ul> Bash<pre><code>    [root@localhost minan]# awk -v ORS=\"\\tauthor:minan\\n\" 'END{print \"lets go&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;\"}  NR==1{print \"\u5f53\u524d\u5171\u6709\"ARGC\"\u4e2a\u53c2\u6570\",\"1:\"ARGV[0],\"2:\"ARGV[1]}' test.cfg\n    \u5f53\u524d\u5171\u67092\u4e2a\u53c2\u6570 1:awk 2:test.cfg   author:minan\n    lets go&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; author:minan\n</code></pre> <p>eg1.\u83b7\u53d6IP\u5730\u5740</p> Bash<pre><code>  [root@localhost minan]# ifconfig ens33 | sed \"2p\" -n\n          inet 192.168.10.10  netmask 255.255.255.0  broadcast 192.168.10.255\n  [root@localhost minan]# ifconfig ens33 | sed \"2p\" -n | awk '{print $2}'\n  192.168.10.10\n</code></pre> <p>eg2.\u83b7\u53d6IP\u5730\u5740</p> Bash<pre><code>  [root@localhost minan]# ifconfig ens33 \n  ens33: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500\n          inet 192.168.10.10  netmask 255.255.255.0  broadcast 192.168.10.255\n          inet6 fe80::5102:4887:698b:945e  prefixlen 64  scopeid 0x20&lt;link&gt;\n          ether 00:0c:29:1a:46:cd  txqueuelen 1000  (Ethernet)\n          RX packets 14888  bytes 1255714 (1.1 MiB)\n          RX errors 0  dropped 0  overruns 0  frame 0\n          TX packets 7031  bytes 1068364 (1.0 MiB)\n          TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n\n  [root@localhost minan]# ifconfig ens33 | awk 'NR==2{print $2}'\n  192.168.10.10\n</code></pre>"},{"location":"Linux/%E4%B8%89%E5%89%91%E5%AE%A2/#awk_6","title":"awk\u6b63\u5219\u8868\u8fbe","text":"Bash<pre><code>awk  -F   \":\"   '/pattern/{\u52a8\u4f5c}'\n\n# \u627e\u51fagames\u5f00\u5934\u7684\u884c\n\n  [root@localhost minan]# awk '/^game/{print}' passwd.txt \n  games:x:12:100:games:/usr/games:/sbin/nologin\n\n# \u53ea\u8f93\u51fa\u7b2c\u4e00\u5217\u548c\u6700\u540e\u4e00\u5217\n\n  [root@localhost minan]# awk -F \":\" '/game/{print $1,$NF}' passwd.txt \n  games /sbin/nologin\n\n# \u683c\u5f0f\u5316\u8f93\u51fa\n\n\n  [root@localhost minan]# awk -F \":\" 'BEGIN{printf \"%-15s\\t %-15s\\t %-15s\\t %-15s\\t\\n\",\"\u7528\u6237\u540d\",\"\u7528\u6237id\",\"\u7528\u6237\u5bb6\u76ee\u5f55\",\"\u7528\u6237\u89e3\u91ca\u5668\"}/^game/{printf \"%-20s\\t %-20s\\t %-20s\\t %-20s\\t\\n\",$1,$3,$(NF-1),$NF}' passwd.txt \n  \u7528\u6237\u540d                \u7528\u6237id                \u7528\u6237\u5bb6\u76ee\u5f55               \u7528\u6237\u89e3\u91ca\u5668              \n  games                  12                      /usr/games              /sbin/nologin\n\n  [root@localhost minan]# awk -F \":\" 'BEGIN{printf \"%-15s\\t %-15s\\t %-15s\\t %-15s\\t\\n\",\"\u7528\u6237\u540d\",\"\u7528\u6237id\",\"\u7528\u6237\u5bb6\u76ee\u5f55\",\"\u7528\u6237\u89e3\u91ca\u5668\"}{printf \"%-20s\\t %-20s\\t %-20s\\t %-20s\\t\\n\",$1,$3,$(NF-1),$NF}' passwd.txt | head -n5\n  \u7528\u6237\u540d                \u7528\u6237id                \u7528\u6237\u5bb6\u76ee\u5f55               \u7528\u6237\u89e3\u91ca\u5668              \n  root                   0                       /root                   /bin/bash              \n  bin                    1                       /bin                    /sbin/nologin          \n  daemon                 2                       /sbin                   /sbin/nologin          \n  adm                    3                       /var/adm                /sbin/nologin   \n\n# \u627e\u51fa\u6307\u5b9a\u884c\u6ee1\u8db3\u6761\u4ef6\u7684\u5185\u5bb9\n\n  [root@localhost minan]# awk -F \":\" '/^operator/,/^chrony/{print NR,$1,$NF}' passwd.txt \n  10 operator /sbin/nologin\n  11 games /sbin/nologin\n  12 ftp /sbin/nologin\n  13 nobody /sbin/nologin\n  14 systemd-network /sbin/nologin\n  15 dbus /sbin/nologin\n  16 polkitd /sbin/nologin\n  17 libstoragemgmt /sbin/nologin\n  18 colord /sbin/nologin\n  19 rpc /sbin/nologin\n  20 gluster /sbin/nologin\n  21 saslauth /sbin/nologin\n  22 abrt /sbin/nologin\n  23 rtkit /sbin/nologin\n  24 pulse /sbin/nologin\n  25 radvd /sbin/nologin\n  26 rpcuser /sbin/nologin\n  27 nfsnobody /sbin/nologin\n  28 unbound /sbin/nologin\n  29 chrony /sbin/nologin\n</code></pre>"},{"location":"Linux/%E4%B8%89%E5%89%91%E5%AE%A2/#awk_7","title":"awk\u6848\u4f8b","text":"<p>\u83b7\u53d6\u8bbf\u95ee\u7f51\u7ad9\u9891\u7387\u6700\u9ad8\u7684IP</p> Bash<pre><code>  [root@localhost httpd]# awk '{print $1}' access_log-20221120 | sort -n| uniq\n  192.168.10.1\n  192.168.10.100\n  192.168.10.101\n  [root@localhost httpd]# awk '{print $1}' access_log-20221120 | sort -n| uniq -c\n       18 192.168.10.1\n     2797 192.168.10.100\n     2797 192.168.10.101\n  [root@localhost httpd]# awk '{print $1}' access_log-20221120 | sort -n| uniq -c| sort -n\n       18 192.168.10.1\n     2797 192.168.10.100\n     2797 192.168.10.101\n  [root@localhost httpd]# awk '{print $1}' access_log-20221120 | sort -n| uniq -c| sort -nr\n     2797 192.168.10.101\n     2797 192.168.10.100\n       18 192.168.10.1\n  [root@localhost httpd]# awk '{print $1}' access_log-20221120 | sort -n| uniq -c| sort -nr | head -2\n     2797 192.168.10.101\n     2797 192.168.10.100\n</code></pre> <p>\u5339\u914d\u6574\u4e2a\u5355\u8bcd</p> Bash<pre><code>  [root@localhost minan]# grep -E \"^(minan|minayao)\" passwd.txt \n  minayao:x:1000:1000:minayao:/home/minayao:/bin/bash\n  minayao1:x:1001:1001::/home/minayao1:/bin/bash\n  minayao2:x:1002:1002::/home/minayao2:/bin/bash\n  minan:x:1003:1003::/home/minan:/bin/bash\n  minan1:x:1004:1004::/home/minan1:/bin/bash\n  minan2:x:1005:1005::/home/minan2:/bin/bash\n\n  [root@localhost minan]# grep -E \"^(minan|minayao)\" passwd.txt -w\n  minayao:x:1000:1000:minayao:/home/minayao:/bin/bash\n  minan:x:1003:1003::/home/minan:/bin/bash\n\n  [root@localhost minan]# grep -E \"^(minan|minayao)\\&gt;\" passwd.txt \n  minayao:x:1000:1000:minayao:/home/minayao:/bin/bash\n  minan:x:1003:1003::/home/minan:/bin/bash\n</code></pre>"},{"location":"ME/me/","title":"\u5173\u4e8e\u6211","text":"<p>\u4e00\u4e2a\u5de5\u4f5c\u4e86 4 \u5e74\u7684\u8ff7\u832b\u4eba\uff0c\u5728\u6b64\u5904\u8bb0\u5f55\u4e00\u4e0b\u5b66\u4e60\u7684\u4e1c\u897f\uff0c\u548c\u5e73\u65f6\u7684\u6240\u89c1\u6240\u5f97</p>"}]}